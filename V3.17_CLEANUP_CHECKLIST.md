# ğŸ§¹ v3.17+ å¾¹åº•æ¸…ç†æª¢æŸ¥æ¸…å–®

**ç›®æ¨™**: ç§»é™¤æ‰€æœ‰ v3.16 åŠæ›´æ—©ç‰ˆæœ¬çš„éºç•™ä»£ç¢¼ï¼Œå¯¦ç¾æ¥µç°¡ã€ç„¡æŠ€è¡“å‚µçš„æ¶æ§‹

**æ¸…ç†é¡å‹**: ç ´å£æ€§å‡ç´šï¼ˆä¸ä¿ç•™å‘ä¸‹å…¼å®¹ï¼‰

---

## âœ… æ¸…ç†æª¢æŸ¥æ¸…å–®

### ğŸ“ 1. åˆªé™¤æ•´å€‹ç›®éŒ„

#### src/ml/ - æ‰€æœ‰æ·±åº¦å­¸ç¿’æ¨¡å¡Šï¼ˆå·²æ£„ç”¨ï¼‰
```bash
rm -rf src/ml/
```

**åŒ…å«çš„æ–‡ä»¶ï¼ˆ25å€‹ï¼‰**:
- âœ… `adaptive_learner.py` - è‡ªé©æ‡‰å­¸ç¿’å™¨
- âœ… `adaptive_strategy_evolver.py` - ç­–ç•¥æ¼”åŒ–å™¨
- âœ… `async_batch_predictor.py` - æ‰¹é‡é æ¸¬å™¨
- âœ… `data_archiver.py` - æ•¸æ“šæ­¸æª”
- âœ… `data_processor.py` - æ•¸æ“šè™•ç†å™¨
- âœ… `drift_detector.py` - æ¼‚ç§»æª¢æ¸¬
- âœ… `ensemble_model.py` - é›†æˆæ¨¡å‹
- âœ… `feature_cache.py` - ç‰¹å¾µç·©å­˜ï¼ˆé‡è¤‡ï¼‰
- âœ… `feature_discovery_network.py` - ç‰¹å¾µç™¼ç¾ç¶²çµ¡ï¼ˆDLï¼‰
- âœ… `feature_importance_monitor.py` - ç‰¹å¾µé‡è¦æ€§ç›£æ§
- âœ… `high_quality_filter.py` - é«˜è³ªé‡éæ¿¾å™¨
- âœ… `hyperparameter_tuner.py` - è¶…åƒæ•¸èª¿å„ª
- âœ… `imbalance_handler.py` - ä¸å¹³è¡¡è™•ç†
- âœ… `label_leakage_validator.py` - æ¨™ç±¤æ³„æ¼é©—è­‰
- âœ… `light_feature_vector.py` - è¼•é‡ç´šç‰¹å¾µå‘é‡
- âœ… `liquidity_prediction_model.py` - æµå‹•æ€§é æ¸¬æ¨¡å‹ï¼ˆDLï¼‰
- âœ… `market_structure_autoencoder.py` - å¸‚å ´çµæ§‹è‡ªå‹•ç·¨ç¢¼å™¨ï¼ˆDLï¼‰
- âœ… `model_persistence.py` - æ¨¡å‹æŒä¹…åŒ–ï¼ˆæ”¹ç”¨ XGBoostï¼‰
- âœ… `model_quantizer.py` - æ¨¡å‹é‡åŒ–ï¼ˆTFLiteï¼‰
- âœ… `model_trainer.py` - æ¨¡å‹è¨“ç·´å™¨
- âœ… `multivariate_drift.py` - å¤šè®Šé‡æ¼‚ç§»
- âœ… `predictor.py` - ML é æ¸¬å™¨ï¼ˆé‡æ§‹åˆ° Controllerï¼‰
- âœ… `quality_training_pipeline.py` - è³ªé‡è¨“ç·´ç®¡é“
- âœ… `target_optimizer.py` - ç›®æ¨™å„ªåŒ–å™¨
- âœ… `uncertainty_quantifier.py` - ä¸ç¢ºå®šæ€§é‡åŒ–

**åŸå› **: v3.17+ ä½¿ç”¨ç´” XGBoostï¼Œç„¡éœ€ TensorFlow/PyTorch æ·±åº¦å­¸ç¿’æ¨¡å‹

---

#### docs/archive/ - æ­·å²æ–‡æª”
```bash
rm -rf docs/archive/
```

**åŸå› **: v3.0-v3.2 çš„æ­·å²æ–‡æª”å·²ç„¡åƒè€ƒåƒ¹å€¼

---

#### data/training_cache/ - èˆŠè¨“ç·´ç·©å­˜
```bash
rm -rf data/training_cache/
```

**åŸå› **: é¿å…èˆŠæ•¸æ“šæ±¡æŸ“æ–°è¨“ç·´

---

#### reports/ - èˆŠç‰ˆå ±å‘Šï¼ˆå¦‚æœå­˜åœ¨ï¼‰
```bash
# åƒ…ä¿ç•™ v3.17+ å ±å‘Šç›®éŒ„
mkdir -p reports/daily
rm -rf reports/v3.16/ reports/v3.15/ reports/legacy/
```

---

### ğŸ“„ 2. åˆªé™¤å–®å€‹æ–‡ä»¶

#### src/managers/risk_manager.py
```bash
rm src/managers/risk_manager.py
```

**åŸå› **: é¢¨éšªé‚è¼¯å·²æ•´åˆåˆ° `LeverageEngine` å’Œ `PositionSizer`

---

#### src/core/performance_modules.py
```bash
rm src/core/performance_modules.py
```

**åŸå› **: v3.16.0 ç‰¹å®šæ¨¡å¡Šï¼Œv3.17+ ä¸ä½¿ç”¨

---

#### src/core/market_regime_predictor.py
```bash
rm src/core/market_regime_predictor.py
```

**åŸå› **: v3.16.0 ç‰¹å®šæ¨¡å¡Š

---

#### src/core/dynamic_feature_generator.py
```bash
rm src/core/dynamic_feature_generator.py
```

**åŸå› **: v3.16.0 ç‰¹å®šæ¨¡å¡Š

---

#### src/core/liquidity_hunter.py
```bash
rm src/core/liquidity_hunter.py
```

**åŸå› **: v3.16.0 ç‰¹å®šæ¨¡å¡Š

---

#### src/core/memory_mapped_features.py
```bash
rm src/core/memory_mapped_features.py
```

**åŸå› **: v3.15.0 å„ªåŒ–ï¼Œv3.17+ ä¸ä½¿ç”¨

---

#### scripts/convert_to_tflite.py
```bash
rm scripts/convert_to_tflite.py
```

**åŸå› **: TensorFlow Lite å·²æ£„ç”¨

---

#### scripts/convert_xgboost_to_onnx.py
```bash
rm scripts/convert_xgboost_to_onnx.py
```

**åŸå› **: ONNX è½‰æ›å·²æ£„ç”¨

---

#### scripts/check_onnx_compatibility.py
```bash
rm scripts/check_onnx_compatibility.py
```

**åŸå› **: ONNX ç›¸é—œè…³æœ¬å·²æ£„ç”¨

---

### ğŸ—‘ï¸ 3. æ¸…ç†æ¨¡å‹æ–‡ä»¶

```bash
# åˆªé™¤æ‰€æœ‰ TensorFlow/ONNX æ¨¡å‹
find data/models/ -name "*.h5" -delete
find data/models/ -name "*.tflite" -delete
find data/models/ -name "*.onnx" -delete
find models/ -name "*.h5" -delete
find models/ -name "*.tflite" -delete
find models/ -name "*.onnx" -delete

# åƒ…ä¿ç•™ XGBoost æ¨¡å‹
# ä¿ç•™: *.ubj, *.json, *.pkl (XGBoost åŸç”Ÿæ ¼å¼)
```

---

### ğŸ“ 4. æ¸…ç†èˆŠç‰ˆæ–‡æª”

```bash
# åˆªé™¤ v3.0-v3.16 æ¶æ§‹æ–‡æª”
rm ARCHITECTURE_v3.14.0.md
rm ARCHITECTURE_v3.15.0.md
rm SYSTEM_AUDIT_REPORT_v3.16.1.md
rm SYSTEM_OVERVIEW_v3.16.2.md
rm v3.14.0_CODE_AUDIT_REPORT.md

# åˆªé™¤èˆŠç‰ˆä¿®å¾©æ–‡æª”
rm CODE_REVIEW_REPORT_v3.9.2.8.md
rm VERSION_v3.9.2.7_SUMMARY.md
rm V3.16.2_GLOBAL_PROCESS_POOL_FIX_FINAL.md
rm V3.16.2_SERIALIZATION_FIX_COMPLETE.md
rm V3.16.2_THREADPOOL_FIX_COMPLETE.md
rm V3.16.3_INCREMENTAL_LEARNING_COMPLETE.md

# ä¿ç•™ v3.17+ æ–‡æª”
# V3.17_DEPLOYMENT_GUIDE.md
# V3.17_INTEGRATION_ROADMAP.md
# INTEGRATION_CHECKLIST.md
```

---

### âš™ï¸ 5. æ¸…ç† src/config.py

#### ç§»é™¤çš„åƒæ•¸ï¼ˆ46-51è¡Œï¼‰:
```python
# åˆªé™¤é€™äº›è¡Œï¼š
BASE_LEVERAGE: int = 3
MAX_LEVERAGE: int = 20
MIN_LEVERAGE: int = 3
BASE_MARGIN_PCT: float = 0.10
MIN_MARGIN_PCT: float = 0.03
MAX_MARGIN_PCT: float = 0.13
```

#### ç§»é™¤çš„åƒæ•¸ï¼ˆ82è¡Œï¼‰:
```python
# åˆªé™¤ï¼š
VOLATILITY_SPIKE_MAX_LEVERAGE: int = 5
```

#### ç§»é™¤çš„åƒæ•¸ï¼ˆ127-154è¡Œï¼‰:
```python
# åˆªé™¤æ•´å€‹ v3.14.0-v3.16.0 é…ç½®å€å¡Šï¼š
# ===== è‡ªæˆ‘å­¦ä¹ é…ç½® (v3.14.0) =====
STRATEGY_MODE  # å·²ç§»è‡³ ConfigProfile
ENABLE_SELF_LEARNING
SELF_LEARNING_MODE
STRUCTURE_VECTOR_DIM
FEATURE_DISCOVERY_RATE
STRATEGY_EVOLUTION_INTERVAL

# ===== è®­ç»ƒé…ç½® (v3.14.0) =====
REINFORCEMENT_LEARNING_ENABLED
AUTOENCODER_TRAINING_ENABLED
FEATURE_DISCOVERY_ENABLED

# ===== v3.16.0 æ€§èƒ½æ¨¡å—é…ç½® =====
ENABLE_MARKET_REGIME_PREDICTION
REGIME_PREDICTION_THRESHOLD
REGIME_PREDICTION_LOOKBACK
ENABLE_DYNAMIC_FEATURES
DYNAMIC_FEATURE_MIN_SHARPE
DYNAMIC_FEATURE_MAX_COUNT
ENABLE_LIQUIDITY_HUNTING
LIQUIDITY_HUNT_CONFIDENCE_THRESHOLD
LIQUIDITY_SLIPPAGE_TOLERANCE
```

#### ç§»é™¤çš„åƒæ•¸ï¼ˆ200-219è¡Œï¼‰:
```python
# åˆªé™¤ v3.15.0 å„ªåŒ–é…ç½®ï¼š
ENABLE_QUANTIZATION
QUANTIZED_MODEL_PATH
ENABLE_INCREMENTAL_CACHE
ENABLE_BATCH_PREDICTION
BATCH_PREDICTION_SIZE
BATCH_MAX_DELAY
ENABLE_MEMORY_MAPPED_STORAGE
MAX_MEMORY_MAPPED_POSITIONS
FEATURE_DIMENSION
ENABLE_SMART_MONITORING
```

#### ä¿ç•™çš„åƒæ•¸:
```python
# ä¿ç•™é€™äº›æ ¸å¿ƒåƒæ•¸ï¼š
MIN_CONFIDENCE: float = 0.35  # å°‡åœ¨ v3.17+ ä¸­ä½¿ç”¨
MAX_SIGNALS: int = 10
IMMEDIATE_EXECUTION_RANK: int = 3
SCAN_INTERVAL
TOP_VOLATILITY_SYMBOLS
# ... æŠ€è¡“æŒ‡æ¨™é…ç½® ...
# ... ADX é…ç½® ...
# ... Order Blocks é…ç½® ...
# ... API é™æµé…ç½® ...
```

---

### ğŸ“¦ 6. æ¸…ç† requirements.txt

#### ç§»é™¤çš„ä¾è³´:
```
tensorflow>=2.13.0          # æ·±åº¦å­¸ç¿’æ¡†æ¶ï¼ˆå·²æ£„ç”¨ï¼‰
tensorflow-addons>=0.19.0   # TensorFlow æ“´å±•ï¼ˆå·²æ£„ç”¨ï¼‰
onnxmltools>=1.11.0         # ONNX è½‰æ›å·¥å…·ï¼ˆå·²æ£„ç”¨ï¼‰
onnxruntime>=1.18.0         # ONNX æ¨ç†å¼•æ“ï¼ˆå·²æ£„ç”¨ï¼‰
```

#### ä¿ç•™çš„ä¾è³´:
```
aiohttp>=3.9.1              # ç•°æ­¥ HTTP å®¢æˆ¶ç«¯
ccxt>=4.2.0                 # åŠ å¯†è²¨å¹£äº¤æ˜“æ‰€ API
discord.py>=2.3.0           # Discord é€šçŸ¥
pandas>=2.0.0               # æ•¸æ“šè™•ç†
numpy>=1.24.0,<2.0.0        # æ•¸å€¼è¨ˆç®—
python-dotenv>=1.0.0        # ç’°å¢ƒè®Šé‡
psutil>=5.9.0               # ç³»çµ±ç›£æ§
xgboost>=2.0.0              # ML æ¨¡å‹ï¼ˆå”¯ä¸€ä¿ç•™ï¼‰
scikit-learn>=1.3.0         # ML å·¥å…·ï¼ˆç‰¹å¾µå·¥ç¨‹ï¼‰
aiofiles                    # ç•°æ­¥æ–‡ä»¶ I/O
```

---

### ğŸ”§ 7. æ¸…ç† src/core/global_pool.py

**æª¢æŸ¥ä¸¦ç¢ºèª**:
```python
# ç¢ºèªåƒ…ä½¿ç”¨ ThreadPoolExecutor
from concurrent.futures import ThreadPoolExecutor

# âœ… æ­£ç¢º
executor = ThreadPoolExecutor(max_workers=4)

# ğŸš¨ ç¦æ­¢
# from concurrent.futures import ProcessPoolExecutor  # åˆªé™¤
# from multiprocessing import Pool  # åˆªé™¤
```

---

### ğŸ§ª 8. æ¸…ç†æ¸¬è©¦æ–‡ä»¶ï¼ˆå¯é¸ï¼‰

```bash
# åˆªé™¤èˆŠç‰ˆæ¸¬è©¦
rm tests/test_complete_virtual_system.py
rm tests/test_incremental_cache.py
rm tests/test_mutable_virtual_position.py
rm tests/test_performance_benchmarks.py
rm tests/test_virtual_position_integration.py

# æœªä¾†æ·»åŠ  v3.17+ æ¸¬è©¦ï¼š
# tests/test_leverage_engine.py
# tests/test_position_sizer.py
# tests/test_model_rating.py
```

---

## ğŸ“Š æ¸…ç†çµ±è¨ˆ

| é¡åˆ¥ | æ•¸é‡ | æ“ä½œ |
|------|------|------|
| **ç›®éŒ„åˆªé™¤** | 4å€‹ | `src/ml/`, `docs/archive/`, `data/training_cache/`, `reports/legacy/` |
| **æ–‡ä»¶åˆªé™¤** | 35+ | æ¨¡å¡Šæ–‡ä»¶ã€è…³æœ¬ã€èˆŠæ–‡æª” |
| **é…ç½®æ¸…ç†** | 30+ | Config åƒæ•¸ç§»é™¤ |
| **ä¾è³´ç§»é™¤** | 4å€‹ | TensorFlow, ONNX ç›¸é—œ |
| **æ¨¡å‹æ¸…ç†** | å…¨éƒ¨ | .h5, .tflite, .onnx æ–‡ä»¶ |

**é è¨ˆç¯€çœç©ºé–“**: ~500MB+ï¼ˆä¸»è¦æ˜¯ TensorFlow ä¾è³´ï¼‰

**é è¨ˆæ¸›å°‘ä»£ç¢¼**: ~5000+ è¡Œ

---

## ğŸš€ åŸ·è¡Œé †åº

### éšæ®µ 1: å®‰å…¨å‚™ä»½ï¼ˆå¯é¸ï¼‰
```bash
# å‰µå»ºå‚™ä»½ï¼ˆä»¥é˜²è¬ä¸€ï¼‰
git add .
git commit -m "Backup before v3.17+ cleanup"
git tag v3.16.3-backup
```

### éšæ®µ 2: åˆªé™¤ç›®éŒ„
```bash
rm -rf src/ml/
rm -rf docs/archive/
rm -rf data/training_cache/
```

### éšæ®µ 3: åˆªé™¤å–®å€‹æ–‡ä»¶
```bash
# ä½¿ç”¨æ¸…å–®ä¸­çš„ rm å‘½ä»¤
rm src/managers/risk_manager.py
rm src/core/performance_modules.py
# ... ç­‰ç­‰
```

### éšæ®µ 4: æ¸…ç†æ¨¡å‹æ–‡ä»¶
```bash
find . -name "*.h5" -delete
find . -name "*.tflite" -delete
find . -name "*.onnx" -delete
```

### éšæ®µ 5: æ›´æ–°é…ç½®æ–‡ä»¶
```bash
# æ‰‹å‹•ç·¨è¼¯ä»¥ä¸‹æ–‡ä»¶ï¼š
# - src/config.py
# - requirements.txt
# - .env.exampleï¼ˆå‰µå»ºæ–°ç¯„æœ¬ï¼‰
```

### éšæ®µ 6: é©—è­‰ç„¡åºåˆ—åŒ–é¢¨éšª
```bash
# æª¢æŸ¥æ˜¯å¦é‚„æœ‰ ProcessPool
grep -r "ProcessPool" src/
grep -r "multiprocessing" src/

# æ‡‰è©²è¿”å›ç©ºæˆ–åƒ…åœ¨è¨»é‡‹ä¸­
```

### éšæ®µ 7: æ¸¬è©¦å•Ÿå‹•
```bash
# é‡æ–°å®‰è£ä¾è³´
pip install -r requirements.txt

# æ¸¬è©¦å°å…¥
python -c "from src.core.config_profile import ConfigProfile; print('OK')"

# æ¸¬è©¦å•Ÿå‹•ï¼ˆä¸äº¤æ˜“ï¼‰
export TRADING_ENABLED=false
python src/main.py
```

---

## âœ… é©—æ”¶æ¨™æº–

æ¸…ç†å®Œæˆå¾Œï¼Œç¢ºèªä»¥ä¸‹æ¢ä»¶ï¼š

- [ ] `src/ml/` ç›®éŒ„ä¸å­˜åœ¨
- [ ] `requirements.txt` ä¸­ç„¡ TensorFlow/ONNX
- [ ] `src/config.py` ä¸­ç„¡ `MAX_LEVERAGE`ã€`BASE_LEVERAGE` ç­‰èˆŠåƒæ•¸
- [ ] `find . -name "*.h5"` è¿”å›ç©º
- [ ] `find . -name "*.tflite"` è¿”å›ç©º
- [ ] `grep -r "ProcessPool" src/` ç„¡çµæœ
- [ ] ç³»çµ±èƒ½æ­£å¸¸å•Ÿå‹•ï¼ˆç„¡ ImportErrorï¼‰
- [ ] `ls -lh` é¡¯ç¤ºé …ç›®å¤§å°é¡¯è‘—æ¸›å°

---

**æ¸…ç†ç‰ˆæœ¬**: v3.17+  
**å‰µå»ºæ—¥æœŸ**: 2025-10-28  
**é¢¨éšªç­‰ç´š**: ğŸ”´ é«˜ï¼ˆç ´å£æ€§å‡ç´šï¼Œä¸å¯é€†ï¼‰  
**å»ºè­°**: åŸ·è¡Œå‰å‰µå»º Git å‚™ä»½æ¨™ç±¤
