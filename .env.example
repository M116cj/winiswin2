# ===== v3.17+ SelfLearningTrader 完整生產級配置 =====
# 核心理念：「模型擁有無限制槓桿控制權，唯一準則是勝率 × 信心度」

# ===== Binance API 配置 =====
BINANCE_API_KEY=your_api_key_here
BINANCE_API_SECRET=your_api_secret_here
BINANCE_TESTNET=false

# ===== 核心策略配置 (v3.17+ SelfLearningTrader) =====
STRATEGY_MODE=self_learning
ENABLE_SELF_LEARNING=true
# SelfLearningTrader：基於規則驅動信號 + 智能槓桿計算 + 動態 SL/TP

# ===== 開倉條件 (v3.17+ SelfLearningTrader) =====
# 槓桿計算：leverage = (1 + (win_prob - 0.55) / 0.15 × 11) × (confidence / 0.5)
# 勝率 70% + 信心度 100% → 槓桿可達 24x（無上限）
MIN_WIN_PROBABILITY=0.55
MIN_CONFIDENCE=0.50
MIN_RR_RATIO=1.0
MAX_RR_RATIO=2.0

# ===== 倉位計算 (v3.17+) =====
# 確保符合 Binance 規格：最低 10 USDT 名義價值
EQUITY_USAGE_RATIO=0.8
MIN_NOTIONAL_VALUE=10.0
MIN_STOP_DISTANCE_PCT=0.003

# ===== 倉位監控 (v3.17+ PositionController) =====
# 24/7 全權控制，每 2 秒監控，PnL ≤ -99% 立即平倉
POSITION_MONITOR_ENABLED=true
POSITION_MONITOR_INTERVAL=2
RISK_KILL_THRESHOLD=0.99

# 動態 SL/TP 調整（高槓桿 → 寬止損）
SLTP_SCALE_FACTOR=0.05
SLTP_MAX_SCALE=3.0

# ===== 模型評級 (v3.17+ ModelEvaluator) =====
# 100 分制評分系統：6 大維度 + 100% 虧損懲罰
MODEL_RATING_ENABLED=true
ENABLE_DAILY_REPORT=true
REPORTS_DIR=reports/daily

# 評級等級：S(90-100) A(80-89) B(70-79) C(<70)
# 每次 100% 虧損懲罰 -15 分
RATING_LOSS_PENALTY=15.0

# ===== 交易設置 =====
# 啟用交易（true=實盤交易，false=僅監控）
TRADING_ENABLED=true
MAX_POSITIONS=999
CYCLE_INTERVAL=60

# ===== 掃描配置（監控所有 U 本位合約）=====
SCAN_INTERVAL=60
# 監控所有交易所上架的 USDT 永續合約（設為 999 監控所有，默認 200）
TOP_LIQUIDITY_SYMBOLS=999

# ===== 系統配置 =====
LOG_LEVEL=INFO
MAX_WORKERS=4

# ===== Discord 通知（可選）=====
# DISCORD_TOKEN=your_discord_token
# DISCORD_CHANNEL_ID=your_channel_id

# ===== v3.17+ 生產級優化 =====

## 模型自動初始化（零配置部署）
INITIAL_TRAINING_ENABLED=true
INITIAL_TRAINING_SAMPLES=200
INITIAL_TRAINING_LOOKBACK_DAYS=30

## XGBoost 中性參數（零偏見啟動）
XGBOOST_N_ESTIMATORS=50
XGBOOST_MAX_DEPTH=4
XGBOOST_LEARNING_RATE=0.1
XGBOOST_SUBSAMPLE=0.8
XGBOOST_COLSAMPLE=0.8
XGBOOST_MIN_CHILD_WEIGHT=1
XGBOOST_GAMMA=0

## 高速監控優化
# 倉位監控間隔（1 秒極速檢查）
POSITION_MONITOR_INTERVAL=1

# 趨勢監控間隔（30 秒更新市場狀態）
TREND_MONITOR_INTERVAL=30
TREND_MONITOR_ENABLED=true

## 即時學習配置
REALTIME_TRAINING_ENABLED=true
TRAINING_MIN_SAMPLES=30
TRAINING_UPDATE_INTERVAL=3600

# ===== 進階配置（可選，保持默認值即可）=====
# 槓桿計算微調
# LEVERAGE_BASE=1.0
# LEVERAGE_WIN_THRESHOLD=0.55
# LEVERAGE_WIN_SCALE=0.15
# LEVERAGE_WIN_MULTIPLIER=11.0

# 倉位計算微調
# EQUITY_USAGE_RATIO=0.8
# MIN_NOTIONAL_VALUE=10.0
# MIN_STOP_DISTANCE_PCT=0.003

# SL/TP 調整微調
# SLTP_SCALE_FACTOR=0.05
# SLTP_MAX_SCALE=3.0

# 模型評級權重（總和必須為 1.0）
# RATING_RR_WEIGHT=0.25
# RATING_WINRATE_WEIGHT=0.20
# RATING_EV_WEIGHT=0.20
# RATING_MDD_WEIGHT=0.15
# RATING_SHARPE_WEIGHT=0.10
# RATING_FREQUENCY_WEIGHT=0.10
# RATING_LOSS_PENALTY=15.0
