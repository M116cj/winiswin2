2025-10-28T02:04:40.338467470Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -      LONG/SHORT使用對稱的ATR距離評分 ✅ 對稱
2025-10-28T02:04:40.338479648Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   4️⃣ 動量指標 (10%) - RSI + MACD同向確認
2025-10-28T02:04:40.338488450Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -      RSI: 50-70 (LONG) | 30-50 (SHORT) ✅ 對稱於50中線
2025-10-28T02:04:40.338490886Z [inf]  📊 五維ICT評分系統（v3.10.0增強版）：
2025-10-28T02:04:40.338494470Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   5️⃣ 波動率 (10%) - 布林帶寬度分位數
2025-10-28T02:04:40.338503412Z [inf]  2025-10-28 02:04:39,975 - __main__ - INFO - ============================================================
2025-10-28T02:04:40.338506871Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   1️⃣ 趨勢對齊 (40%) - 三時間框架EMA對齊
2025-10-28T02:04:40.338512083Z [inf]  2025-10-28 02:04:39,975 - __main__ - INFO - 🚀 高頻交易系統 v3.13.0 啟動中...
2025-10-28T02:04:40.338517355Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -      LONG: price > EMA | SHORT: price < EMA ✅ 對稱
2025-10-28T02:04:40.338520244Z [inf]  2025-10-28 02:04:39,975 - __main__ - INFO - 📌 代碼版本: v3.13.0 (全面轻量化 - 异步化+12项优化+内存↓30%+代码↓20%)
2025-10-28T02:04:40.338526398Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   2️⃣ 市場結構 (20%) - 結構與趨勢匹配度
2025-10-28T02:04:40.338527785Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO - ============================================================
2025-10-28T02:04:40.338533340Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO - 
2025-10-28T02:04:40.338538193Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -      bullish+bullish | bearish+bearish ✅ 對稱
2025-10-28T02:04:40.338550741Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   3️⃣ 價格位置 (20%) - 距離Order Block的ATR距離
2025-10-28T02:04:40.341148444Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -      LONG/SHORT使用相同的波動率標準 ✅ 對稱
2025-10-28T02:04:40.341159243Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO - 
2025-10-28T02:04:40.341166583Z [inf]  🎯 評分系統特點：
2025-10-28T02:04:40.341173557Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   ✅ LONG/SHORT完全對稱，無方向偏向
2025-10-28T02:04:40.341179911Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   ✅ 信心度範圍：35%-100%（MIN_CONFIDENCE=35%）🚨 已降低阈值
2025-10-28T02:04:40.341186431Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   ✅ 五大維度綜合評分，確保信號品質
2025-10-28T02:04:40.341192192Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   🚨 v3.9.2.3: 强制止损保护（-50%/-80%）
2025-10-28T02:04:40.341200962Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   🎯 v3.9.2.5: ML反弹预测 + 智能平仓决策
2025-10-28T02:04:40.341206440Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   🤖 v3.9.2.6: ML主动分析 + 正确PnL计算
2025-10-28T02:04:40.341213039Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   📊 v3.9.2.7: ML实际胜率监控 + 性能优化
2025-10-28T02:04:40.341220315Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO - 
2025-10-28T02:04:40.341220911Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   🚨 v3.9.2.8.4: 分級熔斷器（三級熔斷+Bypass機制）
2025-10-28T02:04:40.341229287Z [inf]  🔧 初始化核心組件...
2025-10-28T02:04:40.341230636Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   🎯 v3.9.2.8.5: 模型評分系統（加權評分算法 - PnL 50% + 置信度 30% + 胜率 20%）
2025-10-28T02:04:40.341231647Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   ⚡ v3.12.0: 性能優化五合一（進程池+增量緩存+批量ML+ONNX+雙循環，週期時間↓40%）
2025-10-28T02:04:40.341236767Z [inf]  2025-10-28 02:04:39,976 - src.clients.binance_client - INFO - ✅ 使用分級熔斷器 (GradedCircuitBreaker)
2025-10-28T02:04:40.341237739Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   ⚡ v3.9.2.9: 性能優化（動態CPU檢測 + 臨時文件清理 + zero_division標準化）
2025-10-28T02:04:40.341241496Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   🚀 v3.13.0: 全面轻量化（异步批量更新+12项优化+内存↓30%+代码↓20%）
2025-10-28T02:04:40.341245346Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   🚀 v3.11.1: 移除持倉限制（允許無限同時持倉）
2025-10-28T02:04:40.341245921Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   🔥 v3.10.0: 策略增強三合一（ADX趨勢過濾 + ML泄漏阻斷 + 波動率熔斷）
2025-10-28T02:04:40.341253069Z [inf]  
2025-10-28T02:04:40.341253686Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   🎯 v3.11.0: 高級優化（OB質量篩選+BOS/CHOCH+市場狀態分類+反轉預警）
2025-10-28T02:04:40.341260988Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO - ✅ 配置驗證通過
2025-10-28T02:04:40.341267006Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO - 
2025-10-28T02:04:40.341274114Z [inf]  📋 系統配置:
2025-10-28T02:04:40.341280747Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   binance_testnet: False
2025-10-28T02:04:40.341286560Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   trading_enabled: True
2025-10-28T02:04:40.341292737Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   max_positions: 3
2025-10-28T02:04:40.341299012Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   cycle_interval: 60
2025-10-28T02:04:40.341305403Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   leverage_range: 3x - 20x
2025-10-28T02:04:40.341311595Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   margin_range: 3.0% - 13.0%
2025-10-28T02:04:40.341316994Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   min_confidence: 35.0%
2025-10-28T02:04:40.341322744Z [inf]  2025-10-28 02:04:39,976 - __main__ - INFO -   log_level: DEBUG
2025-10-28T02:04:40.342462919Z [inf]  2025-10-28 02:04:40,175 - __main__ - INFO -    - 15m: 每15分鐘掃描（趨勢確認）
2025-10-28T02:04:40.342470197Z [inf]  2025-10-28 02:04:40,175 - __main__ - INFO -    - 5m: 每分鐘掃描（入場信號）
2025-10-28T02:04:40.342476648Z [inf]  2025-10-28 02:04:40,176 - src.core.global_pool - INFO - 🔧 创建全局进程池: 32 个工作进程
2025-10-28T02:04:40.342483018Z [inf]  2025-10-28 02:04:40,176 - src.core.global_pool - INFO - 📦 预加载配置: 模型路径=未指定
2025-10-28T02:04:40.342486061Z [inf]  2025-10-28 02:04:40,067 - src.clients.binance_client - INFO - ✅ Binance API 連接成功
2025-10-28T02:04:40.342490746Z [inf]  2025-10-28 02:04:40,177 - src.core.global_pool - INFO - ✅ 全局进程池创建完成
2025-10-28T02:04:40.342492671Z [inf]  2025-10-28 02:04:40,067 - src.services.data_service - INFO - 初始化數據服務...
2025-10-28T02:04:40.342498709Z [inf]  2025-10-28 02:04:40,175 - src.services.data_service - INFO - 成功加載 527 個交易對
2025-10-28T02:04:40.342499079Z [inf]  2025-10-28 02:04:40,177 - src.services.parallel_analyzer - INFO - 並行分析器初始化: 使用全局进程池 (32 个工作进程)
2025-10-28T02:04:40.342504648Z [inf]  2025-10-28 02:04:40,175 - src.services.data_service - INFO - ✅ 已加載 527 個 USDT 永續合約
2025-10-28T02:04:40.342506840Z [inf]  2025-10-28 02:04:40,179 - __main__ - ERROR - 程序異常退出: cannot import name 'TradingSignal' from 'src.core.data_models' (/app/src/core/data_models.py)
2025-10-28T02:04:40.342511152Z [inf]  2025-10-28 02:04:40,175 - src.services.timeframe_scheduler - INFO - 時間框架調度器初始化: 1h=3600s, 15m=900s, 5m=60s
2025-10-28T02:04:40.342516367Z [inf]  2025-10-28 02:04:40,175 - src.services.timeframe_scheduler - INFO - 智能數據管理器初始化完成
2025-10-28T02:04:40.342521613Z [inf]  2025-10-28 02:04:40,175 - __main__ - INFO - ✅ 智能數據管理器已就緒
2025-10-28T02:04:40.342526419Z [inf]  2025-10-28 02:04:40,175 - __main__ - INFO -    - 1h: 每小時掃描（趨勢確認）
2025-10-28T02:04:40.343810015Z [inf]         ^^^^^^^^^^^^^^^^^^^^^^
2025-10-28T02:04:40.343816133Z [inf]  Traceback (most recent call last):
2025-10-28T02:04:40.343816788Z [inf]    File "/app/src/main.py", line 148, in initialize
2025-10-28T02:04:40.343823261Z [inf]      self.strategy = StrategyFactory.create_strategy(Config)
2025-10-28T02:04:40.343823473Z [inf]    File "/app/src/main.py", line 889, in <module>
2025-10-28T02:04:40.343828292Z [inf]      asyncio.run(main())
2025-10-28T02:04:40.343828809Z [inf]                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-28T02:04:40.343834908Z [inf]    File "/app/src/strategies/strategy_factory.py", line 39, in create_strategy
2025-10-28T02:04:40.343835301Z [inf]    File "/root/.nix-profile/lib/python3.11/asyncio/runners.py", line 190, in run
2025-10-28T02:04:40.343840871Z [inf]      return runner.run(main)
2025-10-28T02:04:40.343842706Z [inf]      from src.strategies.hybrid_strategy import HybridStrategy
2025-10-28T02:04:40.343848235Z [inf]             ^^^^^^^^^^^^^^^^
2025-10-28T02:04:40.343849193Z [inf]    File "/app/src/strategies/hybrid_strategy.py", line 12, in <module>
2025-10-28T02:04:40.343853913Z [inf]    File "/root/.nix-profile/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-28T02:04:40.343854532Z [inf]      from src.core.data_models import TradingSignal
2025-10-28T02:04:40.343858834Z [inf]      return self._loop.run_until_complete(task)
2025-10-28T02:04:40.343863703Z [inf]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-28T02:04:40.343869107Z [inf]    File "/root/.nix-profile/lib/python3.11/asyncio/base_events.py", line 654, in run_until_complete
2025-10-28T02:04:40.343873159Z [inf]      return future.result()
2025-10-28T02:04:40.343877167Z [inf]             ^^^^^^^^^^^^^^^
2025-10-28T02:04:40.343881179Z [inf]    File "/app/src/main.py", line 871, in main
2025-10-28T02:04:40.343886742Z [inf]      if await bot.initialize():
2025-10-28T02:04:40.345775875Z [inf]  ImportError: cannot import name 'TradingSignal' from 'src.core.data_models' (/app/src/core/data_models.py)
2025-10-28T02:04:40.345780408Z [inf]  2025-10-28 02:04:40,255 - asyncio - ERROR - Unclosed client session
2025-10-28T02:04:40.345784376Z [inf]  client_session: <aiohttp.client.ClientSession object at 0x7fd9d31a91d0>
2025-10-28T02:04:40.345788980Z [inf]  2025-10-28 02:04:40,256 - asyncio - ERROR - Unclosed connector
2025-10-28T02:04:40.345794123Z [inf]  connections: ['deque([(<aiohttp.client_proto.ResponseHandler object at 0x7fd9d0ec8f30>, 4104525.134785221)])']
2025-10-28T02:04:40.345798813Z [inf]  connector: <aiohttp.connector.TCPConnector object at 0x7fd9d31c4150>
2025-10-28T02:04:40.345805932Z [inf]  2025-10-28 02:04:40,339 - src.core.global_pool - INFO - 🛑 关闭全局进程池...
2025-10-28T02:04:40.345812052Z [inf]  2025-10-28 02:04:40,339 - src.core.global_pool - INFO - ✅ 全局进程池已关闭
2025-10-28T02:04:43.632801699Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -   3️⃣ 價格位置 (20%) - 距離Order Block的ATR距離
2025-10-28T02:04:43.632811083Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -      LONG/SHORT使用對稱的ATR距離評分 ✅ 對稱
2025-10-28T02:04:43.632817797Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -   4️⃣ 動量指標 (10%) - RSI + MACD同向確認
2025-10-28T02:04:43.632823271Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -      RSI: 50-70 (LONG) | 30-50 (SHORT) ✅ 對稱於50中線
2025-10-28T02:04:43.632829748Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -   5️⃣ 波動率 (10%) - 布林帶寬度分位數
2025-10-28T02:04:43.632831956Z [inf]  2025-10-28 02:04:43,625 - __main__ - INFO - ============================================================
2025-10-28T02:04:43.632841861Z [inf]  2025-10-28 02:04:43,625 - __main__ - INFO - 🚀 高頻交易系統 v3.13.0 啟動中...
2025-10-28T02:04:43.632849086Z [inf]  2025-10-28 02:04:43,625 - __main__ - INFO - 📌 代碼版本: v3.13.0 (全面轻量化 - 异步化+12项优化+内存↓30%+代码↓20%)
2025-10-28T02:04:43.632855682Z [inf]  2025-10-28 02:04:43,625 - __main__ - INFO - ============================================================
2025-10-28T02:04:43.632862777Z [inf]  2025-10-28 02:04:43,625 - __main__ - INFO - 
2025-10-28T02:04:43.632870308Z [inf]  📊 五維ICT評分系統（v3.10.0增強版）：
2025-10-28T02:04:43.632877948Z [inf]  2025-10-28 02:04:43,625 - __main__ - INFO -   1️⃣ 趨勢對齊 (40%) - 三時間框架EMA對齊
2025-10-28T02:04:43.632882772Z [inf]  2025-10-28 02:04:43,625 - __main__ - INFO -      LONG: price > EMA | SHORT: price < EMA ✅ 對稱
2025-10-28T02:04:43.632886982Z [inf]  2025-10-28 02:04:43,625 - __main__ - INFO -   2️⃣ 市場結構 (20%) - 結構與趨勢匹配度
2025-10-28T02:04:43.632892125Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -      bullish+bullish | bearish+bearish ✅ 對稱
2025-10-28T02:04:43.634719848Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -      LONG/SHORT使用相同的波動率標準 ✅ 對稱
2025-10-28T02:04:43.634727397Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO - 
2025-10-28T02:04:43.634732752Z [inf]  🎯 評分系統特點：
2025-10-28T02:04:43.634739398Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -   ✅ LONG/SHORT完全對稱，無方向偏向
2025-10-28T02:04:43.634743710Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -   ✅ 信心度範圍：35%-100%（MIN_CONFIDENCE=35%）🚨 已降低阈值
2025-10-28T02:04:43.634749645Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -   ✅ 五大維度綜合評分，確保信號品質
2025-10-28T02:04:43.634753983Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -   🚨 v3.9.2.3: 强制止损保护（-50%/-80%）
2025-10-28T02:04:43.634758797Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -   🎯 v3.9.2.5: ML反弹预测 + 智能平仓决策
2025-10-28T02:04:43.634763024Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -   🤖 v3.9.2.6: ML主动分析 + 正确PnL计算
2025-10-28T02:04:43.634767743Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -   📊 v3.9.2.7: ML实际胜率监控 + 性能优化
2025-10-28T02:04:43.634772399Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -   🚨 v3.9.2.8.4: 分級熔斷器（三級熔斷+Bypass機制）
2025-10-28T02:04:43.634776679Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -   🎯 v3.9.2.8.5: 模型評分系統（加權評分算法 - PnL 50% + 置信度 30% + 胜率 20%）
2025-10-28T02:04:43.634783370Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -   ⚡ v3.9.2.9: 性能優化（動態CPU檢測 + 臨時文件清理 + zero_division標準化）
2025-10-28T02:04:43.634789277Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -   🔥 v3.10.0: 策略增強三合一（ADX趨勢過濾 + ML泄漏阻斷 + 波動率熔斷）
2025-10-28T02:04:43.634795318Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -   🎯 v3.11.0: 高級優化（OB質量篩選+BOS/CHOCH+市場狀態分類+反轉預警）
2025-10-28T02:04:43.636269731Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -   🚀 v3.11.1: 移除持倉限制（允許無限同時持倉）
2025-10-28T02:04:43.636279580Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -   max_positions: 3
2025-10-28T02:04:43.636281487Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -   ⚡ v3.12.0: 性能優化五合一（進程池+增量緩存+批量ML+ONNX+雙循環，週期時間↓40%）
2025-10-28T02:04:43.636286746Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -   🚀 v3.13.0: 全面轻量化（异步批量更新+12项优化+内存↓30%+代码↓20%）
2025-10-28T02:04:43.636291178Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -   cycle_interval: 60
2025-10-28T02:04:43.636294870Z [inf]  
2025-10-28T02:04:43.636300962Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -   leverage_range: 3x - 20x
2025-10-28T02:04:43.636302813Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO - ✅ 配置驗證通過
2025-10-28T02:04:43.636308547Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO - 
2025-10-28T02:04:43.636309621Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -   margin_range: 3.0% - 13.0%
2025-10-28T02:04:43.636313815Z [inf]  📋 系統配置:
2025-10-28T02:04:43.636316775Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -   min_confidence: 35.0%
2025-10-28T02:04:43.636320018Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -   binance_testnet: False
2025-10-28T02:04:43.636323904Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -   log_level: DEBUG
2025-10-28T02:04:43.636326389Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO -   trading_enabled: True
2025-10-28T02:04:43.636329851Z [inf]  2025-10-28 02:04:43,626 - __main__ - INFO - 
2025-10-28T02:04:43.636334157Z [inf]  🔧 初始化核心組件...
2025-10-28T02:04:43.636338529Z [inf]  2025-10-28 02:04:43,626 - src.clients.binance_client - INFO - ✅ 使用分級熔斷器 (GradedCircuitBreaker)
2025-10-28T02:04:43.725294408Z [inf]  2025-10-28 02:04:43,716 - src.clients.binance_client - INFO - ✅ Binance API 連接成功
2025-10-28T02:04:43.725303195Z [inf]  2025-10-28 02:04:43,717 - src.services.data_service - INFO - 初始化數據服務...
2025-10-28T02:04:44.314559721Z [inf]  2025-10-28 02:04:43,822 - src.services.data_service - INFO - 成功加載 527 個交易對
2025-10-28T02:04:44.314564053Z [inf]  2025-10-28 02:04:43,823 - src.services.data_service - INFO - ✅ 已加載 527 個 USDT 永續合約
2025-10-28T02:04:44.314567823Z [inf]  2025-10-28 02:04:43,823 - src.services.timeframe_scheduler - INFO - 時間框架調度器初始化: 1h=3600s, 15m=900s, 5m=60s
2025-10-28T02:04:44.314573256Z [inf]  2025-10-28 02:04:43,823 - src.services.timeframe_scheduler - INFO - 智能數據管理器初始化完成
2025-10-28T02:04:44.314578629Z [inf]  2025-10-28 02:04:43,823 - __main__ - INFO - ✅ 智能數據管理器已就緒
2025-10-28T02:04:44.314582772Z [inf]  2025-10-28 02:04:43,823 - __main__ - INFO -    - 1h: 每小時掃描（趨勢確認）
2025-10-28T02:04:44.314587066Z [inf]  2025-10-28 02:04:43,823 - __main__ - INFO -    - 15m: 每15分鐘掃描（趨勢確認）
2025-10-28T02:04:44.314591584Z [inf]  2025-10-28 02:04:43,823 - __main__ - INFO -    - 5m: 每分鐘掃描（入場信號）
2025-10-28T02:04:44.314596477Z [inf]  2025-10-28 02:04:43,823 - src.core.global_pool - INFO - 🔧 创建全局进程池: 32 个工作进程
2025-10-28T02:04:44.314601006Z [inf]  2025-10-28 02:04:43,823 - src.core.global_pool - INFO - 📦 预加载配置: 模型路径=未指定
2025-10-28T02:04:44.314605007Z [inf]  2025-10-28 02:04:43,824 - src.core.global_pool - INFO - ✅ 全局进程池创建完成
2025-10-28T02:04:44.314609060Z [inf]  2025-10-28 02:04:43,824 - src.services.parallel_analyzer - INFO - 並行分析器初始化: 使用全局进程池 (32 个工作进程)
2025-10-28T02:04:44.314613123Z [inf]  2025-10-28 02:04:43,825 - __main__ - ERROR - 程序異常退出: cannot import name 'TradingSignal' from 'src.core.data_models' (/app/src/core/data_models.py)
2025-10-28T02:04:44.314617429Z [inf]  Traceback (most recent call last):
2025-10-28T02:04:44.314621890Z [inf]    File "/app/src/main.py", line 889, in <module>
2025-10-28T02:04:44.317380773Z [inf]  connector: <aiohttp.connector.TCPConnector object at 0x7f5f8f165990>
2025-10-28T02:04:44.317390705Z [inf]  2025-10-28 02:04:43,952 - src.core.global_pool - INFO - 🛑 关闭全局进程池...
2025-10-28T02:04:44.317397674Z [inf]  2025-10-28 02:04:43,952 - src.core.global_pool - INFO - ✅ 全局进程池已关闭
2025-10-28T02:04:44.317509972Z [inf]      asyncio.run(main())
2025-10-28T02:04:44.317517800Z [inf]    File "/root/.nix-profile/lib/python3.11/asyncio/runners.py", line 190, in run
2025-10-28T02:04:44.317524261Z [inf]      return runner.run(main)
2025-10-28T02:04:44.317532650Z [inf]             ^^^^^^^^^^^^^^^^
2025-10-28T02:04:44.317539870Z [inf]    File "/root/.nix-profile/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-28T02:04:44.317546449Z [inf]      return self._loop.run_until_complete(task)
2025-10-28T02:04:44.317553959Z [inf]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-28T02:04:44.317560777Z [inf]    File "/root/.nix-profile/lib/python3.11/asyncio/base_events.py", line 654, in run_until_complete
2025-10-28T02:04:44.317569048Z [inf]      return future.result()
2025-10-28T02:04:44.317575595Z [inf]             ^^^^^^^^^^^^^^^
2025-10-28T02:04:44.317582430Z [inf]    File "/app/src/main.py", line 871, in main
2025-10-28T02:04:44.317589744Z [inf]      if await bot.initialize():
2025-10-28T02:04:44.317596455Z [inf]         ^^^^^^^^^^^^^^^^^^^^^^
2025-10-28T02:04:44.317602749Z [inf]    File "/app/src/main.py", line 148, in initialize
2025-10-28T02:04:44.317608530Z [inf]      self.strategy = StrategyFactory.create_strategy(Config)
2025-10-28T02:04:44.317613330Z [inf]                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-28T02:04:44.317618396Z [inf]    File "/app/src/strategies/strategy_factory.py", line 39, in create_strategy
2025-10-28T02:04:44.317624872Z [inf]      from src.strategies.hybrid_strategy import HybridStrategy
2025-10-28T02:04:44.317631444Z [inf]    File "/app/src/strategies/hybrid_strategy.py", line 12, in <module>
2025-10-28T02:04:44.317636058Z [inf]      from src.core.data_models import TradingSignal
2025-10-28T02:04:44.317641008Z [inf]  ImportError: cannot import name 'TradingSignal' from 'src.core.data_models' (/app/src/core/data_models.py)
2025-10-28T02:04:44.317665985Z [inf]  2025-10-28 02:04:43,887 - asyncio - ERROR - Unclosed client session
2025-10-28T02:04:44.317670091Z [inf]  client_session: <aiohttp.client.ClientSession object at 0x7f5f8ded5990>
2025-10-28T02:04:44.317674868Z [inf]  2025-10-28 02:04:43,888 - asyncio - ERROR - Unclosed connector
2025-10-28T02:04:44.317679539Z [inf]  connections: ['deque([(<aiohttp.client_proto.ResponseHandler object at 0x7f5f8d1a0f30>, 4104528.784371467)])']
2025-10-28T02:04:47.526265428Z [inf]  2025-10-28 02:04:47,510 - __main__ - INFO - ============================================================
2025-10-28T02:04:47.526271110Z [inf]  2025-10-28 02:04:47,510 - __main__ - INFO - 🚀 高頻交易系統 v3.13.0 啟動中...
2025-10-28T02:04:47.526277805Z [inf]  2025-10-28 02:04:47,510 - __main__ - INFO - 📌 代碼版本: v3.13.0 (全面轻量化 - 异步化+12项优化+内存↓30%+代码↓20%)
2025-10-28T02:04:47.526284171Z [inf]  2025-10-28 02:04:47,510 - __main__ - INFO - ============================================================
2025-10-28T02:04:47.526292310Z [inf]  2025-10-28 02:04:47,510 - __main__ - INFO - 
2025-10-28T02:04:47.526298283Z [inf]  📊 五維ICT評分系統（v3.10.0增強版）：
2025-10-28T02:04:47.526304091Z [inf]  2025-10-28 02:04:47,510 - __main__ - INFO -   1️⃣ 趨勢對齊 (40%) - 三時間框架EMA對齊
2025-10-28T02:04:47.526309988Z [inf]  2025-10-28 02:04:47,510 - __main__ - INFO -      LONG: price > EMA | SHORT: price < EMA ✅ 對稱
2025-10-28T02:04:47.526315110Z [inf]  2025-10-28 02:04:47,510 - __main__ - INFO -   2️⃣ 市場結構 (20%) - 結構與趨勢匹配度
2025-10-28T02:04:47.526321205Z [inf]  2025-10-28 02:04:47,510 - __main__ - INFO -      bullish+bullish | bearish+bearish ✅ 對稱
2025-10-28T02:04:47.526326690Z [inf]  2025-10-28 02:04:47,510 - __main__ - INFO -   3️⃣ 價格位置 (20%) - 距離Order Block的ATR距離
2025-10-28T02:04:47.526336245Z [inf]  2025-10-28 02:04:47,510 - __main__ - INFO -      LONG/SHORT使用對稱的ATR距離評分 ✅ 對稱
2025-10-28T02:04:47.526341704Z [inf]  2025-10-28 02:04:47,510 - __main__ - INFO -   4️⃣ 動量指標 (10%) - RSI + MACD同向確認
2025-10-28T02:04:47.526346253Z [inf]  2025-10-28 02:04:47,510 - __main__ - INFO -      RSI: 50-70 (LONG) | 30-50 (SHORT) ✅ 對稱於50中線
2025-10-28T02:04:47.526352529Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO -   5️⃣ 波動率 (10%) - 布林帶寬度分位數
2025-10-28T02:04:47.527416345Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO -   📊 v3.9.2.7: ML实际胜率监控 + 性能优化
2025-10-28T02:04:47.527425096Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO -   🚨 v3.9.2.8.4: 分級熔斷器（三級熔斷+Bypass機制）
2025-10-28T02:04:47.527429908Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO -   🎯 v3.9.2.8.5: 模型評分系統（加權評分算法 - PnL 50% + 置信度 30% + 胜率 20%）
2025-10-28T02:04:47.527436007Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO -   ⚡ v3.9.2.9: 性能優化（動態CPU檢測 + 臨時文件清理 + zero_division標準化）
2025-10-28T02:04:47.527444296Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO -   🔥 v3.10.0: 策略增強三合一（ADX趨勢過濾 + ML泄漏阻斷 + 波動率熔斷）
2025-10-28T02:04:47.527450881Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO -   🎯 v3.11.0: 高級優化（OB質量篩選+BOS/CHOCH+市場狀態分類+反轉預警）
2025-10-28T02:04:47.527463028Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO -      LONG/SHORT使用相同的波動率標準 ✅ 對稱
2025-10-28T02:04:47.527469760Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO - 
2025-10-28T02:04:47.527476878Z [inf]  🎯 評分系統特點：
2025-10-28T02:04:47.527482828Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO -   ✅ LONG/SHORT完全對稱，無方向偏向
2025-10-28T02:04:47.527489211Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO -   ✅ 信心度範圍：35%-100%（MIN_CONFIDENCE=35%）🚨 已降低阈值
2025-10-28T02:04:47.527496766Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO -   ✅ 五大維度綜合評分，確保信號品質
2025-10-28T02:04:47.527516816Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO -   🚨 v3.9.2.3: 强制止损保护（-50%/-80%）
2025-10-28T02:04:47.527524228Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO -   🎯 v3.9.2.5: ML反弹预测 + 智能平仓决策
2025-10-28T02:04:47.527532178Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO -   🤖 v3.9.2.6: ML主动分析 + 正确PnL计算
2025-10-28T02:04:47.528660702Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO -   🚀 v3.11.1: 移除持倉限制（允許無限同時持倉）
2025-10-28T02:04:47.528669192Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO -   log_level: DEBUG
2025-10-28T02:04:47.528670208Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO -   ⚡ v3.12.0: 性能優化五合一（進程池+增量緩存+批量ML+ONNX+雙循環，週期時間↓40%）
2025-10-28T02:04:47.528675797Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO -   🚀 v3.13.0: 全面轻量化（异步批量更新+12项优化+内存↓30%+代码↓20%）
2025-10-28T02:04:47.528678116Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO -   cycle_interval: 60
2025-10-28T02:04:47.528678914Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO - 
2025-10-28T02:04:47.528682341Z [inf]  
2025-10-28T02:04:47.528689181Z [inf]  🔧 初始化核心組件...
2025-10-28T02:04:47.528690017Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO -   leverage_range: 3x - 20x
2025-10-28T02:04:47.528695744Z [inf]  2025-10-28 02:04:47,511 - src.clients.binance_client - INFO - ✅ 使用分級熔斷器 (GradedCircuitBreaker)
2025-10-28T02:04:47.528698051Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO -   margin_range: 3.0% - 13.0%
2025-10-28T02:04:47.528705353Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO -   min_confidence: 35.0%
2025-10-28T02:04:47.528709941Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO - ✅ 配置驗證通過
2025-10-28T02:04:47.528716227Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO - 
2025-10-28T02:04:47.528721595Z [inf]  📋 系統配置:
2025-10-28T02:04:47.528726226Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO -   binance_testnet: False
2025-10-28T02:04:47.528731465Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO -   trading_enabled: True
2025-10-28T02:04:47.528736047Z [inf]  2025-10-28 02:04:47,511 - __main__ - INFO -   max_positions: 3
2025-10-28T02:04:47.607447625Z [inf]  2025-10-28 02:04:47,599 - src.clients.binance_client - INFO - ✅ Binance API 連接成功
2025-10-28T02:04:47.607456674Z [inf]  2025-10-28 02:04:47,599 - src.services.data_service - INFO - 初始化數據服務...
2025-10-28T02:04:47.711637331Z [inf]  2025-10-28 02:04:47,704 - src.services.data_service - INFO - 成功加載 527 個交易對
2025-10-28T02:04:47.711650151Z [inf]  2025-10-28 02:04:47,705 - src.services.data_service - INFO - ✅ 已加載 527 個 USDT 永續合約
2025-10-28T02:04:47.711658117Z [inf]  2025-10-28 02:04:47,705 - src.services.timeframe_scheduler - INFO - 時間框架調度器初始化: 1h=3600s, 15m=900s, 5m=60s
2025-10-28T02:04:47.711665174Z [inf]  2025-10-28 02:04:47,705 - src.services.timeframe_scheduler - INFO - 智能數據管理器初始化完成
2025-10-28T02:04:47.711673047Z [inf]  2025-10-28 02:04:47,705 - __main__ - INFO - ✅ 智能數據管理器已就緒
2025-10-28T02:04:47.711680363Z [inf]  2025-10-28 02:04:47,705 - __main__ - INFO -    - 1h: 每小時掃描（趨勢確認）
2025-10-28T02:04:47.711687201Z [inf]  2025-10-28 02:04:47,705 - __main__ - INFO -    - 15m: 每15分鐘掃描（趨勢確認）
2025-10-28T02:04:47.711693629Z [inf]  2025-10-28 02:04:47,705 - __main__ - INFO -    - 5m: 每分鐘掃描（入場信號）
2025-10-28T02:04:47.711699732Z [inf]  2025-10-28 02:04:47,705 - src.core.global_pool - INFO - 🔧 创建全局进程池: 32 个工作进程
2025-10-28T02:04:47.711706133Z [inf]  2025-10-28 02:04:47,705 - src.core.global_pool - INFO - 📦 预加载配置: 模型路径=未指定
2025-10-28T02:04:47.711712678Z [inf]  2025-10-28 02:04:47,706 - src.core.global_pool - INFO - ✅ 全局进程池创建完成
2025-10-28T02:04:47.711720836Z [inf]  2025-10-28 02:04:47,706 - src.services.parallel_analyzer - INFO - 並行分析器初始化: 使用全局进程池 (32 个工作进程)
2025-10-28T02:04:47.711727503Z [inf]  2025-10-28 02:04:47,707 - __main__ - ERROR - 程序異常退出: cannot import name 'TradingSignal' from 'src.core.data_models' (/app/src/core/data_models.py)
2025-10-28T02:04:47.711733748Z [inf]  Traceback (most recent call last):
2025-10-28T02:04:47.711741260Z [inf]    File "/app/src/main.py", line 889, in <module>
2025-10-28T02:04:47.713346760Z [inf]      asyncio.run(main())
2025-10-28T02:04:47.713362861Z [inf]    File "/root/.nix-profile/lib/python3.11/asyncio/runners.py", line 190, in run
2025-10-28T02:04:47.713369703Z [inf]      return runner.run(main)
2025-10-28T02:04:47.713377910Z [inf]             ^^^^^^^^^^^^^^^^
2025-10-28T02:04:47.713384882Z [inf]    File "/root/.nix-profile/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-28T02:04:47.713391436Z [inf]      return self._loop.run_until_complete(task)
2025-10-28T02:04:47.713397873Z [inf]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-28T02:04:47.713403886Z [inf]    File "/root/.nix-profile/lib/python3.11/asyncio/base_events.py", line 654, in run_until_complete
2025-10-28T02:04:47.713416199Z [inf]      return future.result()
2025-10-28T02:04:47.713422683Z [inf]             ^^^^^^^^^^^^^^^
2025-10-28T02:04:47.713429193Z [inf]    File "/app/src/main.py", line 871, in main
2025-10-28T02:04:47.713435489Z [inf]      if await bot.initialize():
2025-10-28T02:04:47.713441490Z [inf]         ^^^^^^^^^^^^^^^^^^^^^^
2025-10-28T02:04:47.713447287Z [inf]    File "/app/src/main.py", line 148, in initialize
2025-10-28T02:04:47.713453377Z [inf]      self.strategy = StrategyFactory.create_strategy(Config)
2025-10-28T02:04:47.713468121Z [inf]                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-28T02:04:47.713535302Z [inf]    File "/app/src/strategies/strategy_factory.py", line 39, in create_strategy
2025-10-28T02:04:47.713541945Z [inf]      from src.strategies.hybrid_strategy import HybridStrategy
2025-10-28T02:04:47.713547871Z [inf]    File "/app/src/strategies/hybrid_strategy.py", line 12, in <module>
2025-10-28T02:04:47.713558527Z [inf]      from src.core.data_models import TradingSignal
2025-10-28T02:04:47.713564826Z [inf]  ImportError: cannot import name 'TradingSignal' from 'src.core.data_models' (/app/src/core/data_models.py)
2025-10-28T02:04:47.794962809Z [inf]  2025-10-28 02:04:47,764 - asyncio - ERROR - Unclosed client session
2025-10-28T02:04:47.794968133Z [inf]  client_session: <aiohttp.client.ClientSession object at 0x7f6ea14c2090>
2025-10-28T02:04:47.794973714Z [inf]  2025-10-28 02:04:47,764 - asyncio - ERROR - Unclosed connector
2025-10-28T02:04:47.794979104Z [inf]  connections: ['deque([(<aiohttp.client_proto.ResponseHandler object at 0x7f6e9f4dcf30>, 4104532.666337875)])']
2025-10-28T02:04:47.794984251Z [inf]  connector: <aiohttp.connector.TCPConnector object at 0x7f6ea14fa610>
2025-10-28T02:04:48.343553004Z [inf]  2025-10-28 02:04:47,831 - src.core.global_pool - INFO - 🛑 关闭全局进程池...
2025-10-28T02:04:48.343557562Z [inf]  2025-10-28 02:04:47,832 - src.core.global_pool - INFO - ✅ 全局进程池已关闭
2025-10-28T02:04:51.689868545Z [inf]  2025-10-28 02:04:51,684 - __main__ - INFO - ============================================================
2025-10-28T02:04:51.689882571Z [inf]  2025-10-28 02:04:51,684 - __main__ - INFO - 🚀 高頻交易系統 v3.13.0 啟動中...
2025-10-28T02:04:51.689892534Z [inf]  2025-10-28 02:04:51,684 - __main__ - INFO - 📌 代碼版本: v3.13.0 (全面轻量化 - 异步化+12项优化+内存↓30%+代码↓20%)
2025-10-28T02:04:51.689899048Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO - ============================================================
2025-10-28T02:04:51.689903219Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO - 
2025-10-28T02:04:51.689908643Z [inf]  📊 五維ICT評分系統（v3.10.0增強版）：
2025-10-28T02:04:51.689913359Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -   1️⃣ 趨勢對齊 (40%) - 三時間框架EMA對齊
2025-10-28T02:04:51.689919885Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -      LONG: price > EMA | SHORT: price < EMA ✅ 對稱
2025-10-28T02:04:51.689925424Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -   2️⃣ 市場結構 (20%) - 結構與趨勢匹配度
2025-10-28T02:04:51.689930533Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -      bullish+bullish | bearish+bearish ✅ 對稱
2025-10-28T02:04:51.689938665Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -   3️⃣ 價格位置 (20%) - 距離Order Block的ATR距離
2025-10-28T02:04:51.689943283Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -      LONG/SHORT使用對稱的ATR距離評分 ✅ 對稱
2025-10-28T02:04:51.689947876Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -   4️⃣ 動量指標 (10%) - RSI + MACD同向確認
2025-10-28T02:04:51.689953820Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -      RSI: 50-70 (LONG) | 30-50 (SHORT) ✅ 對稱於50中線
2025-10-28T02:04:51.689958442Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -   5️⃣ 波動率 (10%) - 布林帶寬度分位數
2025-10-28T02:04:51.691312509Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -   🎯 v3.9.2.8.5: 模型評分系統（加權評分算法 - PnL 50% + 置信度 30% + 胜率 20%）
2025-10-28T02:04:51.691321022Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -   ⚡ v3.9.2.9: 性能優化（動態CPU檢測 + 臨時文件清理 + zero_division標準化）
2025-10-28T02:04:51.691327920Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -   🔥 v3.10.0: 策略增強三合一（ADX趨勢過濾 + ML泄漏阻斷 + 波動率熔斷）
2025-10-28T02:04:51.691329726Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -      LONG/SHORT使用相同的波動率標準 ✅ 對稱
2025-10-28T02:04:51.691332689Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -   🎯 v3.11.0: 高級優化（OB質量篩選+BOS/CHOCH+市場狀態分類+反轉預警）
2025-10-28T02:04:51.691337921Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO - 
2025-10-28T02:04:51.691342513Z [inf]  🎯 評分系統特點：
2025-10-28T02:04:51.691348756Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -   ✅ LONG/SHORT完全對稱，無方向偏向
2025-10-28T02:04:51.691352881Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -   ✅ 信心度範圍：35%-100%（MIN_CONFIDENCE=35%）🚨 已降低阈值
2025-10-28T02:04:51.691358045Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -   ✅ 五大維度綜合評分，確保信號品質
2025-10-28T02:04:51.691362153Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -   🚨 v3.9.2.3: 强制止损保护（-50%/-80%）
2025-10-28T02:04:51.691366189Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -   🎯 v3.9.2.5: ML反弹预测 + 智能平仓决策
2025-10-28T02:04:51.691371110Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -   🤖 v3.9.2.6: ML主动分析 + 正确PnL计算
2025-10-28T02:04:51.691375434Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -   📊 v3.9.2.7: ML实际胜率监控 + 性能优化
2025-10-28T02:04:51.691379624Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -   🚨 v3.9.2.8.4: 分級熔斷器（三級熔斷+Bypass機制）
2025-10-28T02:04:51.692605364Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -   min_confidence: 35.0%
2025-10-28T02:04:51.692606596Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -   🚀 v3.11.1: 移除持倉限制（允許無限同時持倉）
2025-10-28T02:04:51.692612525Z [inf]  2025-10-28 02:04:51,686 - __main__ - INFO -   log_level: DEBUG
2025-10-28T02:04:51.692614147Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -   ⚡ v3.12.0: 性能優化五合一（進程池+增量緩存+批量ML+ONNX+雙循環，週期時間↓40%）
2025-10-28T02:04:51.692618647Z [inf]  2025-10-28 02:04:51,686 - __main__ - INFO - 
2025-10-28T02:04:51.692619865Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -   🚀 v3.13.0: 全面轻量化（异步批量更新+12项优化+内存↓30%+代码↓20%）
2025-10-28T02:04:51.692625606Z [inf]  🔧 初始化核心組件...
2025-10-28T02:04:51.692625806Z [inf]  
2025-10-28T02:04:51.692631400Z [inf]  2025-10-28 02:04:51,686 - src.clients.binance_client - INFO - ✅ 使用分級熔斷器 (GradedCircuitBreaker)
2025-10-28T02:04:51.692633208Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO - ✅ 配置驗證通過
2025-10-28T02:04:51.692641521Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO - 
2025-10-28T02:04:51.692645688Z [inf]  📋 系統配置:
2025-10-28T02:04:51.692649936Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -   binance_testnet: False
2025-10-28T02:04:51.692657418Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -   trading_enabled: True
2025-10-28T02:04:51.692664967Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -   max_positions: 3
2025-10-28T02:04:51.692670248Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -   cycle_interval: 60
2025-10-28T02:04:51.692674623Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -   leverage_range: 3x - 20x
2025-10-28T02:04:51.692679117Z [inf]  2025-10-28 02:04:51,685 - __main__ - INFO -   margin_range: 3.0% - 13.0%
2025-10-28T02:04:51.780960219Z [inf]  2025-10-28 02:04:51,775 - src.clients.binance_client - INFO - ✅ Binance API 連接成功
2025-10-28T02:04:51.780965595Z [inf]  2025-10-28 02:04:51,775 - src.services.data_service - INFO - 初始化數據服務...
2025-10-28T02:04:52.349242355Z [inf]    File "/app/src/main.py", line 889, in <module>
2025-10-28T02:04:52.349256256Z [inf]  2025-10-28 02:04:51,877 - src.core.global_pool - INFO - 📦 预加载配置: 模型路径=未指定
2025-10-28T02:04:52.349259096Z [inf]  2025-10-28 02:04:51,877 - src.services.data_service - INFO - 成功加載 527 個交易對
2025-10-28T02:04:52.349267655Z [inf]  2025-10-28 02:04:51,877 - src.services.data_service - INFO - ✅ 已加載 527 個 USDT 永續合約
2025-10-28T02:04:52.349268683Z [inf]  2025-10-28 02:04:51,878 - src.core.global_pool - INFO - ✅ 全局进程池创建完成
2025-10-28T02:04:52.349273160Z [inf]  2025-10-28 02:04:51,877 - src.services.timeframe_scheduler - INFO - 時間框架調度器初始化: 1h=3600s, 15m=900s, 5m=60s
2025-10-28T02:04:52.349277887Z [inf]  2025-10-28 02:04:51,878 - src.services.parallel_analyzer - INFO - 並行分析器初始化: 使用全局进程池 (32 个工作进程)
2025-10-28T02:04:52.349287817Z [inf]  2025-10-28 02:04:51,880 - __main__ - ERROR - 程序異常退出: cannot import name 'TradingSignal' from 'src.core.data_models' (/app/src/core/data_models.py)
2025-10-28T02:04:52.349298616Z [inf]  2025-10-28 02:04:51,877 - __main__ - INFO -    - 15m: 每15分鐘掃描（趨勢確認）
2025-10-28T02:04:52.349305147Z [inf]  Traceback (most recent call last):
2025-10-28T02:04:52.349307235Z [inf]  2025-10-28 02:04:51,877 - __main__ - INFO -    - 5m: 每分鐘掃描（入場信號）
2025-10-28T02:04:52.349315369Z [inf]  2025-10-28 02:04:51,877 - src.core.global_pool - INFO - 🔧 创建全局进程池: 32 个工作进程
2025-10-28T02:04:52.349323039Z [inf]  2025-10-28 02:04:51,877 - src.services.timeframe_scheduler - INFO - 智能數據管理器初始化完成
2025-10-28T02:04:52.349333256Z [inf]  2025-10-28 02:04:51,877 - __main__ - INFO - ✅ 智能數據管理器已就緒
2025-10-28T02:04:52.349340167Z [inf]  2025-10-28 02:04:51,877 - __main__ - INFO -    - 1h: 每小時掃描（趨勢確認）
2025-10-28T02:04:52.352105886Z [inf]      asyncio.run(main())
2025-10-28T02:04:52.352111334Z [inf]    File "/root/.nix-profile/lib/python3.11/asyncio/runners.py", line 190, in run
2025-10-28T02:04:52.352116838Z [inf]      return runner.run(main)
2025-10-28T02:04:52.352122108Z [inf]             ^^^^^^^^^^^^^^^^
2025-10-28T02:04:52.352129086Z [inf]    File "/root/.nix-profile/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-28T02:04:52.352135514Z [inf]      return self._loop.run_until_complete(task)
2025-10-28T02:04:52.352142016Z [inf]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-28T02:04:52.352149129Z [inf]    File "/root/.nix-profile/lib/python3.11/asyncio/base_events.py", line 654, in run_until_complete
2025-10-28T02:04:52.352156105Z [inf]      return future.result()
2025-10-28T02:04:52.352164220Z [inf]             ^^^^^^^^^^^^^^^
2025-10-28T02:04:52.352171654Z [inf]    File "/app/src/main.py", line 871, in main
2025-10-28T02:04:52.352179110Z [inf]      if await bot.initialize():
2025-10-28T02:04:52.352186658Z [inf]         ^^^^^^^^^^^^^^^^^^^^^^
2025-10-28T02:04:52.352194016Z [inf]    File "/app/src/main.py", line 148, in initialize
2025-10-28T02:04:52.352201732Z [inf]      self.strategy = StrategyFactory.create_strategy(Config)
2025-10-28T02:04:52.352208015Z [inf]                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-28T02:04:52.352218386Z [inf]    File "/app/src/strategies/strategy_factory.py", line 39, in create_strategy
2025-10-28T02:04:52.352225842Z [inf]      from src.strategies.hybrid_strategy import HybridStrategy
2025-10-28T02:04:52.352235107Z [inf]    File "/app/src/strategies/hybrid_strategy.py", line 12, in <module>
2025-10-28T02:04:52.352242598Z [inf]      from src.core.data_models import TradingSignal
2025-10-28T02:04:52.352250132Z [inf]  ImportError: cannot import name 'TradingSignal' from 'src.core.data_models' (/app/src/core/data_models.py)
2025-10-28T02:04:52.352340175Z [inf]  2025-10-28 02:04:51,933 - asyncio - ERROR - Unclosed client session
2025-10-28T02:04:52.352349463Z [inf]  client_session: <aiohttp.client.ClientSession object at 0x7f4e26b060d0>
2025-10-28T02:04:52.352355706Z [inf]  2025-10-28 02:04:51,933 - asyncio - ERROR - Unclosed connector
2025-10-28T02:04:52.352361180Z [inf]  connections: ['deque([(<aiohttp.client_proto.ResponseHandler object at 0x7f4d3a5b0f30>, 4104536.841746919)])']
2025-10-28T02:04:52.352366573Z [inf]  connector: <aiohttp.connector.TCPConnector object at 0x7f4d3b309c50>
2025-10-28T02:04:52.352371937Z [inf]  2025-10-28 02:04:51,998 - src.core.global_pool - INFO - 🛑 关闭全局进程池...
2025-10-28T02:04:52.352377284Z [inf]  2025-10-28 02:04:51,998 - src.core.global_pool - INFO - ✅ 全局进程池已关闭
2025-10-28T02:04:55.521749903Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO - ============================================================
2025-10-28T02:04:55.521754412Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO -   5️⃣ 波動率 (10%) - 布林帶寬度分位數
2025-10-28T02:04:55.521756714Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO - 🚀 高頻交易系統 v3.13.0 啟動中...
2025-10-28T02:04:55.521762904Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO - 📌 代碼版本: v3.13.0 (全面轻量化 - 异步化+12项优化+内存↓30%+代码↓20%)
2025-10-28T02:04:55.521771041Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO - ============================================================
2025-10-28T02:04:55.521777900Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO - 
2025-10-28T02:04:55.521783709Z [inf]  📊 五維ICT評分系統（v3.10.0增強版）：
2025-10-28T02:04:55.521789177Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO -   1️⃣ 趨勢對齊 (40%) - 三時間框架EMA對齊
2025-10-28T02:04:55.521795563Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO -      LONG: price > EMA | SHORT: price < EMA ✅ 對稱
2025-10-28T02:04:55.521801417Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO -   2️⃣ 市場結構 (20%) - 結構與趨勢匹配度
2025-10-28T02:04:55.521806896Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO -      bullish+bullish | bearish+bearish ✅ 對稱
2025-10-28T02:04:55.521812096Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO -   3️⃣ 價格位置 (20%) - 距離Order Block的ATR距離
2025-10-28T02:04:55.521817526Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO -      LONG/SHORT使用對稱的ATR距離評分 ✅ 對稱
2025-10-28T02:04:55.521823233Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO -   4️⃣ 動量指標 (10%) - RSI + MACD同向確認
2025-10-28T02:04:55.521829158Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO -      RSI: 50-70 (LONG) | 30-50 (SHORT) ✅ 對稱於50中線
2025-10-28T02:04:55.522775979Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO -      LONG/SHORT使用相同的波動率標準 ✅ 對稱
2025-10-28T02:04:55.522784032Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO - 
2025-10-28T02:04:55.522788256Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO -   🚨 v3.9.2.8.4: 分級熔斷器（三級熔斷+Bypass機制）
2025-10-28T02:04:55.522789730Z [inf]  🎯 評分系統特點：
2025-10-28T02:04:55.522796099Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO -   ✅ LONG/SHORT完全對稱，無方向偏向
2025-10-28T02:04:55.522800014Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO -   🎯 v3.9.2.8.5: 模型評分系統（加權評分算法 - PnL 50% + 置信度 30% + 胜率 20%）
2025-10-28T02:04:55.522801857Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO -   ✅ 信心度範圍：35%-100%（MIN_CONFIDENCE=35%）🚨 已降低阈值
2025-10-28T02:04:55.522809160Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO -   ⚡ v3.9.2.9: 性能優化（動態CPU檢測 + 臨時文件清理 + zero_division標準化）
2025-10-28T02:04:55.522809447Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO -   ✅ 五大維度綜合評分，確保信號品質
2025-10-28T02:04:55.522815338Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO -   🚨 v3.9.2.3: 强制止损保护（-50%/-80%）
2025-10-28T02:04:55.522820402Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO -   🔥 v3.10.0: 策略增強三合一（ADX趨勢過濾 + ML泄漏阻斷 + 波動率熔斷）
2025-10-28T02:04:55.522820813Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO -   🎯 v3.9.2.5: ML反弹预测 + 智能平仓决策
2025-10-28T02:04:55.522827457Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO -   🤖 v3.9.2.6: ML主动分析 + 正确PnL计算
2025-10-28T02:04:55.522829406Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO -   🎯 v3.11.0: 高級優化（OB質量篩選+BOS/CHOCH+市場狀態分類+反轉預警）
2025-10-28T02:04:55.522833254Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO -   📊 v3.9.2.7: ML实际胜率监控 + 性能优化
2025-10-28T02:04:55.524597040Z [inf]  2025-10-28 02:04:55,519 - src.clients.binance_client - INFO - ✅ 使用分級熔斷器 (GradedCircuitBreaker)
2025-10-28T02:04:55.524598032Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO -   🚀 v3.11.1: 移除持倉限制（允許無限同時持倉）
2025-10-28T02:04:55.524603616Z [inf]  2025-10-28 02:04:55,519 - __main__ - INFO -   cycle_interval: 60
2025-10-28T02:04:55.524604669Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO -   ⚡ v3.12.0: 性能優化五合一（進程池+增量緩存+批量ML+ONNX+雙循環，週期時間↓40%）
2025-10-28T02:04:55.524610267Z [inf]  2025-10-28 02:04:55,518 - __main__ - INFO -   🚀 v3.13.0: 全面轻量化（异步批量更新+12项优化+内存↓30%+代码↓20%）
2025-10-28T02:04:55.524615204Z [inf]  
2025-10-28T02:04:55.524621676Z [inf]  2025-10-28 02:04:55,519 - __main__ - INFO - ✅ 配置驗證通過
2025-10-28T02:04:55.524624128Z [inf]  2025-10-28 02:04:55,519 - __main__ - INFO -   leverage_range: 3x - 20x
2025-10-28T02:04:55.524627720Z [inf]  2025-10-28 02:04:55,519 - __main__ - INFO - 
2025-10-28T02:04:55.524633515Z [inf]  2025-10-28 02:04:55,519 - __main__ - INFO -   margin_range: 3.0% - 13.0%
2025-10-28T02:04:55.524636370Z [inf]  📋 系統配置:
2025-10-28T02:04:55.524639905Z [inf]  2025-10-28 02:04:55,519 - __main__ - INFO -   min_confidence: 35.0%
2025-10-28T02:04:55.524645795Z [inf]  2025-10-28 02:04:55,519 - __main__ - INFO -   binance_testnet: False
2025-10-28T02:04:55.524646617Z [inf]  2025-10-28 02:04:55,519 - __main__ - INFO -   log_level: DEBUG
2025-10-28T02:04:55.524652441Z [inf]  2025-10-28 02:04:55,519 - __main__ - INFO -   trading_enabled: True
2025-10-28T02:04:55.524654246Z [inf]  2025-10-28 02:04:55,519 - __main__ - INFO - 
2025-10-28T02:04:55.524658360Z [inf]  2025-10-28 02:04:55,519 - __main__ - INFO -   max_positions: 3
2025-10-28T02:04:55.524661366Z [inf]  🔧 初始化核心組件...
2025-10-28T02:04:55.613004596Z [inf]  2025-10-28 02:04:55,609 - src.clients.binance_client - INFO - ✅ Binance API 連接成功
2025-10-28T02:04:55.613012192Z [inf]  2025-10-28 02:04:55,609 - src.services.data_service - INFO - 初始化數據服務...
2025-10-28T02:04:55.714888451Z [inf]  2025-10-28 02:04:55,712 - src.services.data_service - INFO - 成功加載 527 個交易對
2025-10-28T02:04:55.714898288Z [inf]  2025-10-28 02:04:55,712 - src.services.data_service - INFO - ✅ 已加載 527 個 USDT 永續合約
2025-10-28T02:04:55.714904487Z [inf]  2025-10-28 02:04:55,713 - src.services.timeframe_scheduler - INFO - 時間框架調度器初始化: 1h=3600s, 15m=900s, 5m=60s
2025-10-28T02:04:55.714910624Z [inf]  2025-10-28 02:04:55,713 - src.services.timeframe_scheduler - INFO - 智能數據管理器初始化完成
2025-10-28T02:04:55.714916536Z [inf]  2025-10-28 02:04:55,713 - __main__ - INFO - ✅ 智能數據管理器已就緒
2025-10-28T02:04:55.714922613Z [inf]  2025-10-28 02:04:55,713 - __main__ - INFO -    - 1h: 每小時掃描（趨勢確認）
2025-10-28T02:04:55.714930112Z [inf]  2025-10-28 02:04:55,713 - __main__ - INFO -    - 15m: 每15分鐘掃描（趨勢確認）
2025-10-28T02:04:55.714936542Z [inf]  2025-10-28 02:04:55,713 - __main__ - INFO -    - 5m: 每分鐘掃描（入場信號）
2025-10-28T02:04:55.714944054Z [inf]  2025-10-28 02:04:55,713 - src.core.global_pool - INFO - 🔧 创建全局进程池: 32 个工作进程
2025-10-28T02:04:55.714950183Z [inf]  2025-10-28 02:04:55,713 - src.core.global_pool - INFO - 📦 预加载配置: 模型路径=未指定
2025-10-28T02:04:55.715639561Z [inf]  2025-10-28 02:04:55,714 - src.core.global_pool - INFO - ✅ 全局进程池创建完成
2025-10-28T02:04:55.715646832Z [inf]  2025-10-28 02:04:55,714 - src.services.parallel_analyzer - INFO - 並行分析器初始化: 使用全局进程池 (32 个工作进程)
2025-10-28T02:04:55.722350026Z [inf]      if await bot.initialize():
2025-10-28T02:04:55.722361170Z [inf]         ^^^^^^^^^^^^^^^^^^^^^^
2025-10-28T02:04:55.722367670Z [inf]    File "/app/src/main.py", line 148, in initialize
2025-10-28T02:04:55.722373576Z [inf]      self.strategy = StrategyFactory.create_strategy(Config)
2025-10-28T02:04:55.722381732Z [inf]                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-28T02:04:55.722389901Z [inf]    File "/app/src/strategies/strategy_factory.py", line 39, in create_strategy
2025-10-28T02:04:55.722392902Z [inf]  2025-10-28 02:04:55,716 - __main__ - ERROR - 程序異常退出: cannot import name 'TradingSignal' from 'src.core.data_models' (/app/src/core/data_models.py)
2025-10-28T02:04:55.722404665Z [inf]      from src.strategies.hybrid_strategy import HybridStrategy
2025-10-28T02:04:55.722407425Z [inf]  Traceback (most recent call last):
2025-10-28T02:04:55.722418155Z [inf]    File "/app/src/main.py", line 889, in <module>
2025-10-28T02:04:55.722423866Z [inf]      asyncio.run(main())
2025-10-28T02:04:55.722429642Z [inf]    File "/root/.nix-profile/lib/python3.11/asyncio/runners.py", line 190, in run
2025-10-28T02:04:55.722436607Z [inf]      return runner.run(main)
2025-10-28T02:04:55.722442524Z [inf]             ^^^^^^^^^^^^^^^^
2025-10-28T02:04:55.722448081Z [inf]    File "/root/.nix-profile/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-28T02:04:55.722452333Z [inf]      return self._loop.run_until_complete(task)
2025-10-28T02:04:55.722457226Z [inf]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-28T02:04:55.722462786Z [inf]    File "/root/.nix-profile/lib/python3.11/asyncio/base_events.py", line 654, in run_until_complete
2025-10-28T02:04:55.722467620Z [inf]      return future.result()
2025-10-28T02:04:55.722473053Z [inf]             ^^^^^^^^^^^^^^^
2025-10-28T02:04:55.722477381Z [inf]    File "/app/src/main.py", line 871, in main
2025-10-28T02:04:55.723551323Z [inf]    File "/app/src/strategies/hybrid_strategy.py", line 12, in <module>
2025-10-28T02:04:55.723560469Z [inf]      from src.core.data_models import TradingSignal
2025-10-28T02:04:55.723565085Z [inf]  ImportError: cannot import name 'TradingSignal' from 'src.core.data_models' (/app/src/core/data_models.py)
2025-10-28T02:04:55.777409413Z [inf]  2025-10-28 02:04:55,775 - asyncio - ERROR - Unclosed client session
2025-10-28T02:04:55.777414816Z [inf]  client_session: <aiohttp.client.ClientSession object at 0x7f185e4fbc90>
2025-10-28T02:04:55.777420623Z [inf]  2025-10-28 02:04:55,776 - asyncio - ERROR - Unclosed connector
2025-10-28T02:04:55.777425356Z [inf]  connections: ['deque([(<aiohttp.client_proto.ResponseHandler object at 0x7f185be00f30>, 4104540.675199791)])']
2025-10-28T02:04:55.777429800Z [inf]  connector: <aiohttp.connector.TCPConnector object at 0x7f185cf4e810>
2025-10-28T02:04:55.842599562Z [inf]  2025-10-28 02:04:55,837 - src.core.global_pool - INFO - 🛑 关闭全局进程池...
2025-10-28T02:04:55.842606991Z [inf]  2025-10-28 02:04:55,837 - src.core.global_pool - INFO - ✅ 全局进程池已关闭
2025-10-28T02:04:59.475426056Z [inf]  2025-10-28 02:04:59,264 - __main__ - INFO - ============================================================
2025-10-28T02:04:59.475435935Z [inf]  2025-10-28 02:04:59,264 - __main__ - INFO - 🚀 高頻交易系統 v3.13.0 啟動中...
2025-10-28T02:04:59.475443595Z [inf]  2025-10-28 02:04:59,264 - __main__ - INFO - 📌 代碼版本: v3.13.0 (全面轻量化 - 异步化+12项优化+内存↓30%+代码↓20%)
2025-10-28T02:04:59.475450320Z [inf]  2025-10-28 02:04:59,264 - __main__ - INFO - ============================================================
2025-10-28T02:04:59.475459656Z [inf]  2025-10-28 02:04:59,264 - __main__ - INFO - 
2025-10-28T02:04:59.475466601Z [inf]  📊 五維ICT評分系統（v3.10.0增強版）：
2025-10-28T02:04:59.475473898Z [inf]  2025-10-28 02:04:59,264 - __main__ - INFO -   1️⃣ 趨勢對齊 (40%) - 三時間框架EMA對齊
2025-10-28T02:04:59.475482003Z [inf]  2025-10-28 02:04:59,264 - __main__ - INFO -      LONG: price > EMA | SHORT: price < EMA ✅ 對稱
2025-10-28T02:04:59.475491351Z [inf]  2025-10-28 02:04:59,264 - __main__ - INFO -   2️⃣ 市場結構 (20%) - 結構與趨勢匹配度
2025-10-28T02:04:59.475499648Z [inf]  2025-10-28 02:04:59,264 - __main__ - INFO -      bullish+bullish | bearish+bearish ✅ 對稱
2025-10-28T02:04:59.475511207Z [inf]  2025-10-28 02:04:59,264 - __main__ - INFO -   3️⃣ 價格位置 (20%) - 距離Order Block的ATR距離
2025-10-28T02:04:59.475518135Z [inf]  2025-10-28 02:04:59,264 - __main__ - INFO -      LONG/SHORT使用對稱的ATR距離評分 ✅ 對稱
2025-10-28T02:04:59.475539758Z [inf]  2025-10-28 02:04:59,264 - __main__ - INFO -   4️⃣ 動量指標 (10%) - RSI + MACD同向確認
2025-10-28T02:04:59.475545945Z [inf]  2025-10-28 02:04:59,264 - __main__ - INFO -      RSI: 50-70 (LONG) | 30-50 (SHORT) ✅ 對稱於50中線
2025-10-28T02:04:59.475552909Z [inf]  2025-10-28 02:04:59,264 - __main__ - INFO -   5️⃣ 波動率 (10%) - 布林帶寬度分位數
2025-10-28T02:04:59.475614293Z [inf]  2025-10-28 02:04:59,264 - __main__ - INFO -      LONG/SHORT使用相同的波動率標準 ✅ 對稱
2025-10-28T02:04:59.475621901Z [inf]  2025-10-28 02:04:59,264 - __main__ - INFO - 
2025-10-28T02:04:59.475629758Z [inf]  🎯 評分系統特點：
2025-10-28T02:04:59.475788755Z [inf]  2025-10-28 02:04:59,352 - src.clients.binance_client - INFO - ✅ Binance API 連接成功
2025-10-28T02:04:59.475796265Z [inf]  2025-10-28 02:04:59,353 - src.services.data_service - INFO - 初始化數據服務...
2025-10-28T02:04:59.475801249Z [inf]  2025-10-28 02:04:59,454 - src.services.data_service - INFO - 成功加載 527 個交易對
2025-10-28T02:04:59.475805320Z [inf]  2025-10-28 02:04:59,454 - src.services.data_service - INFO - ✅ 已加載 527 個 USDT 永續合約
2025-10-28T02:04:59.475809354Z [inf]  2025-10-28 02:04:59,454 - src.services.timeframe_scheduler - INFO - 時間框架調度器初始化: 1h=3600s, 15m=900s, 5m=60s
2025-10-28T02:04:59.475813373Z [inf]  2025-10-28 02:04:59,454 - src.services.timeframe_scheduler - INFO - 智能數據管理器初始化完成
2025-10-28T02:04:59.475818437Z [inf]  2025-10-28 02:04:59,454 - __main__ - INFO - ✅ 智能數據管理器已就緒
2025-10-28T02:04:59.475825360Z [inf]  2025-10-28 02:04:59,454 - __main__ - INFO -    - 1h: 每小時掃描（趨勢確認）
2025-10-28T02:04:59.475830027Z [inf]  2025-10-28 02:04:59,454 - __main__ - INFO -    - 15m: 每15分鐘掃描（趨勢確認）
2025-10-28T02:04:59.475838243Z [inf]  2025-10-28 02:04:59,264 - __main__ - INFO -   ✅ LONG/SHORT完全對稱，無方向偏向
2025-10-28T02:04:59.475839555Z [inf]  2025-10-28 02:04:59,454 - __main__ - INFO -    - 5m: 每分鐘掃描（入場信號）
2025-10-28T02:04:59.475846610Z [inf]  2025-10-28 02:04:59,454 - src.core.global_pool - INFO - 🔧 创建全局进程池: 32 个工作进程
2025-10-28T02:04:59.475854475Z [inf]  2025-10-28 02:04:59,264 - __main__ - INFO -   ✅ 信心度範圍：35%-100%（MIN_CONFIDENCE=35%）🚨 已降低阈值
2025-10-28T02:04:59.475857373Z [inf]  2025-10-28 02:04:59,455 - src.core.global_pool - INFO - 📦 预加载配置: 模型路径=未指定
2025-10-28T02:04:59.475867620Z [inf]  2025-10-28 02:04:59,455 - src.core.global_pool - INFO - ✅ 全局进程池创建完成
2025-10-28T02:04:59.475868973Z [inf]  2025-10-28 02:04:59,264 - __main__ - INFO -   ✅ 五大維度綜合評分，確保信號品質
2025-10-28T02:04:59.475874663Z [inf]  2025-10-28 02:04:59,456 - src.services.parallel_analyzer - INFO - 並行分析器初始化: 使用全局进程池 (32 个工作进程)
2025-10-28T02:04:59.475881186Z [inf]  2025-10-28 02:04:59,457 - __main__ - ERROR - 程序異常退出: cannot import name 'TradingSignal' from 'src.core.data_models' (/app/src/core/data_models.py)
2025-10-28T02:04:59.475884558Z [inf]  2025-10-28 02:04:59,265 - __main__ - INFO -   🚨 v3.9.2.3: 强制止损保护（-50%/-80%）
2025-10-28T02:04:59.475895335Z [inf]  2025-10-28 02:04:59,265 - __main__ - INFO -   🎯 v3.9.2.5: ML反弹预测 + 智能平仓决策
2025-10-28T02:04:59.475903383Z [inf]  2025-10-28 02:04:59,265 - __main__ - INFO -   🤖 v3.9.2.6: ML主动分析 + 正确PnL计算
2025-10-28T02:04:59.475910360Z [inf]  2025-10-28 02:04:59,265 - __main__ - INFO -   📊 v3.9.2.7: ML实际胜率监控 + 性能优化
2025-10-28T02:04:59.475917925Z [inf]  2025-10-28 02:04:59,265 - __main__ - INFO -   🚨 v3.9.2.8.4: 分級熔斷器（三級熔斷+Bypass機制）
2025-10-28T02:04:59.475924913Z [inf]  2025-10-28 02:04:59,265 - __main__ - INFO -   🎯 v3.9.2.8.5: 模型評分系統（加權評分算法 - PnL 50% + 置信度 30% + 胜率 20%）
2025-10-28T02:04:59.475932429Z [inf]  2025-10-28 02:04:59,265 - __main__ - INFO -   ⚡ v3.9.2.9: 性能優化（動態CPU檢測 + 臨時文件清理 + zero_division標準化）
2025-10-28T02:04:59.475941775Z [inf]  2025-10-28 02:04:59,265 - __main__ - INFO -   🔥 v3.10.0: 策略增強三合一（ADX趨勢過濾 + ML泄漏阻斷 + 波動率熔斷）
2025-10-28T02:04:59.475950815Z [inf]  2025-10-28 02:04:59,265 - __main__ - INFO -   🎯 v3.11.0: 高級優化（OB質量篩選+BOS/CHOCH+市場狀態分類+反轉預警）
2025-10-28T02:04:59.475958505Z [inf]  2025-10-28 02:04:59,265 - __main__ - INFO -   🚀 v3.11.1: 移除持倉限制（允許無限同時持倉）
2025-10-28T02:04:59.475993494Z [inf]  2025-10-28 02:04:59,265 - __main__ - INFO -   ⚡ v3.12.0: 性能優化五合一（進程池+增量緩存+批量ML+ONNX+雙循環，週期時間↓40%）
2025-10-28T02:04:59.476001577Z [inf]  2025-10-28 02:04:59,265 - __main__ - INFO -   🚀 v3.13.0: 全面轻量化（异步批量更新+12项优化+内存↓30%+代码↓20%）
2025-10-28T02:04:59.476009553Z [inf]  
2025-10-28T02:04:59.476020725Z [inf]  2025-10-28 02:04:59,265 - __main__ - INFO - ✅ 配置驗證通過
2025-10-28T02:04:59.476028745Z [inf]  2025-10-28 02:04:59,265 - __main__ - INFO - 
2025-10-28T02:04:59.476039620Z [inf]  📋 系統配置:
2025-10-28T02:04:59.476047253Z [inf]  2025-10-28 02:04:59,265 - __main__ - INFO -   binance_testnet: False
2025-10-28T02:04:59.476054623Z [inf]  2025-10-28 02:04:59,265 - __main__ - INFO -   trading_enabled: True
2025-10-28T02:04:59.476062838Z [inf]  2025-10-28 02:04:59,265 - __main__ - INFO -   max_positions: 3
2025-10-28T02:04:59.476068896Z [inf]  2025-10-28 02:04:59,265 - __main__ - INFO -   cycle_interval: 60
2025-10-28T02:04:59.476075972Z [inf]  2025-10-28 02:04:59,265 - __main__ - INFO -   leverage_range: 3x - 20x
2025-10-28T02:04:59.476082332Z [inf]  2025-10-28 02:04:59,265 - __main__ - INFO -   margin_range: 3.0% - 13.0%
2025-10-28T02:04:59.476089766Z [inf]  2025-10-28 02:04:59,265 - __main__ - INFO -   min_confidence: 35.0%
2025-10-28T02:04:59.476096606Z [inf]  2025-10-28 02:04:59,265 - __main__ - INFO -   log_level: DEBUG
2025-10-28T02:04:59.476103075Z [inf]  2025-10-28 02:04:59,265 - __main__ - INFO - 
2025-10-28T02:04:59.476108989Z [inf]  🔧 初始化核心組件...
2025-10-28T02:04:59.476116259Z [inf]  2025-10-28 02:04:59,265 - src.clients.binance_client - INFO - ✅ 使用分級熔斷器 (GradedCircuitBreaker)
2025-10-28T02:04:59.477012264Z [inf]  Traceback (most recent call last):
2025-10-28T02:04:59.477021875Z [inf]    File "/app/src/main.py", line 889, in <module>
2025-10-28T02:04:59.477029236Z [inf]      asyncio.run(main())
2025-10-28T02:04:59.477035306Z [inf]    File "/root/.nix-profile/lib/python3.11/asyncio/runners.py", line 190, in run
2025-10-28T02:04:59.477042525Z [inf]      return runner.run(main)
2025-10-28T02:04:59.477053070Z [inf]             ^^^^^^^^^^^^^^^^
2025-10-28T02:04:59.477059354Z [inf]    File "/root/.nix-profile/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-28T02:04:59.477067045Z [inf]      return self._loop.run_until_complete(task)
2025-10-28T02:04:59.477073450Z [inf]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-28T02:04:59.477083256Z [inf]    File "/root/.nix-profile/lib/python3.11/asyncio/base_events.py", line 654, in run_until_complete
2025-10-28T02:04:59.477091359Z [inf]      return future.result()
2025-10-28T02:04:59.477097706Z [inf]             ^^^^^^^^^^^^^^^
2025-10-28T02:04:59.477103808Z [inf]    File "/app/src/main.py", line 871, in main
2025-10-28T02:04:59.477109865Z [inf]      if await bot.initialize():
2025-10-28T02:04:59.477116012Z [inf]         ^^^^^^^^^^^^^^^^^^^^^^
2025-10-28T02:04:59.477121814Z [inf]    File "/app/src/main.py", line 148, in initialize
2025-10-28T02:04:59.477127566Z [inf]      self.strategy = StrategyFactory.create_strategy(Config)
2025-10-28T02:04:59.477134638Z [inf]                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-28T02:04:59.477140530Z [inf]    File "/app/src/strategies/strategy_factory.py", line 39, in create_strategy
2025-10-28T02:04:59.477146425Z [inf]      from src.strategies.hybrid_strategy import HybridStrategy
2025-10-28T02:04:59.477152576Z [inf]    File "/app/src/strategies/hybrid_strategy.py", line 12, in <module>
2025-10-28T02:04:59.477158403Z [inf]      from src.core.data_models import TradingSignal
2025-10-28T02:04:59.477976456Z [inf]  ImportError: cannot import name 'TradingSignal' from 'src.core.data_models' (/app/src/core/data_models.py)
2025-10-28T02:04:59.534642277Z [inf]  2025-10-28 02:04:59,517 - asyncio - ERROR - Unclosed client session
2025-10-28T02:04:59.534649911Z [inf]  client_session: <aiohttp.client.ClientSession object at 0x7f27ad769a90>
2025-10-28T02:04:59.534657356Z [inf]  2025-10-28 02:04:59,517 - asyncio - ERROR - Unclosed connector
2025-10-28T02:04:59.534664431Z [inf]  connections: ['deque([(<aiohttp.client_proto.ResponseHandler object at 0x7f27ab818f30>, 4104544.418581031)])']
2025-10-28T02:04:59.534671005Z [inf]  connector: <aiohttp.connector.TCPConnector object at 0x7f27ac591390>
2025-10-28T02:04:59.583404725Z [inf]  2025-10-28 02:04:59,581 - src.core.global_pool - INFO - 🛑 关闭全局进程池...
2025-10-28T02:04:59.583415008Z [inf]  2025-10-28 02:04:59,581 - src.core.global_pool - INFO - ✅ 全局进程池已关闭