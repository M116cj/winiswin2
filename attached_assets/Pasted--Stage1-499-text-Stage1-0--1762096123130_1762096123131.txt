çœ‹åˆ°æœ€æ–°çš„æ—¥å¿—æ˜¾ç¤ºStage1éªŒè¯ä»ç„¶æœ‰499ä¸ªè¢«æ‹’ç»ï¼Œè¿™è¡¨æ˜æ•°æ®éªŒè¯é—®é¢˜è¿˜æ²¡æœ‰å®Œå…¨è§£å†³ã€‚è®©æˆ‘åˆ†æä¸€ä¸‹å¹¶æä¾›è§£å†³æ–¹æ¡ˆï¼š

ğŸ” é—®é¢˜è¯Šæ–­
ä»æ—¥å¿—å¯ä»¥çœ‹åˆ°ï¼š

text
Stage1é©—è­‰: æœ‰æ•ˆ=0, æ‹’çµ•=499
å¹³å‡åˆ†æ=0.0ms | å¹³å‡æ•¸æ“š=2.5ms
é—®é¢˜åˆ†æï¼š

æ•°æ®éªŒè¯ä»ç„¶å¤±è´¥ï¼ˆ499/500è¢«æ‹’ç»ï¼‰

å¹³å‡åˆ†ææ—¶é—´0.0msè¯´æ˜å¤§éƒ¨åˆ†symbolåœ¨æ—©æœŸé˜¶æ®µå°±è¢«æ‹’ç»

å¹³å‡æ•°æ®æ—¶é—´2.5msè¯´æ˜æ•°æ®è·å–æ­£å¸¸ï¼Œä½†éªŒè¯ä¸é€šè¿‡

ğŸš€ ç«‹å³è§£å†³æ–¹æ¡ˆ
æ–¹æ¡ˆ1ï¼šè¿›ä¸€æ­¥æ”¾å®½æ•°æ®éªŒè¯è¦æ±‚
ä¿®æ”¹ src/strategies/rule_based_signal_generator.py ä¸­çš„ _validate_data æ–¹æ³•ï¼š

python
# å½“å‰ï¼š20è¡Œ â†’ å»ºè®®ï¼š10è¡Œ
def _validate_data(self, multi_tf_data: Dict[str, pd.DataFrame]) -> bool:
    """éªŒè¯å¤šæ—¶é—´æ¡†æ¶æ•°æ®çš„å®Œæ•´æ€§"""
    required_timeframes = ['1h', '15m', '5m']
    
    for tf in required_timeframes:
        if tf not in multi_tf_data:
            logger.debug(f"âš ï¸ æ•°æ®éªŒè¯å¤±è´¥: ç¼ºå¤±æ—¶é—´æ¡†æ¶ {tf}")
            logger.debug(f"   å¯ç”¨æ—¶é—´æ¡†æ¶: {list(multi_tf_data.keys())}")
            return False
            
        df = multi_tf_data[tf]
        
        if df is None:
            logger.debug(f"âš ï¸ æ•°æ®éªŒè¯å¤±è´¥: {tf} DataFrameä¸ºNone")
            return False
            
        # ğŸ”§ å…³é”®ä¿®å¤ï¼šä»20è¡Œé™ä½åˆ°10è¡Œ
        if len(df) < 10:  # åŸæ¥æ˜¯20ï¼Œç°åœ¨æ˜¯10
            logger.debug(f"âš ï¸ æ•°æ®éªŒè¯å¤±è´¥: {tf} åªæœ‰{len(df)}è¡Œæ•°æ® (<10)")
            return False
            
        required_cols = {'open', 'high', 'low', 'close', 'volume'}
        missing_cols = required_cols - set(df.columns)
        if missing_cols:
            logger.debug(f"âš ï¸ æ•°æ®éªŒè¯å¤±è´¥: {tf} ç¼ºå¤±åˆ— {missing_cols}")
            return False
            
    return True
æ–¹æ¡ˆ2ï¼šæ·»åŠ è¯¦ç»†è°ƒè¯•æ—¥å¿—
åœ¨ unified_scheduler.py çš„ scan_symbols æ–¹æ³•ä¸­æ·»åŠ æ•°æ®è¯Šæ–­ï¼š

python
async def scan_symbols(self, symbols: List[str]) -> List[Dict]:
    """æ‰«ææ‰€æœ‰äº¤æ˜“å¯¹å¹¶ç”Ÿæˆä¿¡å·"""
    valid_signals = []
    
    # ğŸ”§ æ·»åŠ æ•°æ®è¯Šæ–­
    diagnostic_count = 0
    
    for i, symbol in enumerate(symbols):
        try:
            # è·å–å¤šæ—¶é—´æ¡†æ¶æ•°æ®
            multi_tf_data = await self.data_fetcher.get_multi_timeframe_data(
                symbol, timeframes=['1h', '15m', '5m']
            )
            
            # è¯Šæ–­å‰3ä¸ªsymbolçš„æ•°æ®æƒ…å†µ
            if diagnostic_count < 3:
                diagnostic_count += 1
                logger.info(f"ğŸ” æ•°æ®è¯Šæ–­ #{diagnostic_count} - {symbol}:")
                for tf, df in multi_tf_data.items():
                    if df is not None:
                        logger.info(f"   {tf}: {len(df)}è¡Œ, åˆ—={list(df.columns)}")
                        if len(df) > 0:
                            logger.info(f"      æœ€æ–°ä»·æ ¼: {df['close'].iloc[-1]:.2f}")
                    else:
                        logger.warning(f"   {tf}: DataFrameä¸ºNone")
            
            # ç”Ÿæˆä¿¡å·
            signal = self.signal_generator.generate_signal(symbol, multi_tf_data)
            
            if signal and signal.get('direction') != 'NONE':
                valid_signals.append(signal)
                
        except Exception as e:
            logger.error(f"âŒ æ‰«æ{symbol}æ—¶å‡ºé”™: {str(e)}")
            continue
            
    return valid_signals
æ–¹æ¡ˆ3ï¼šç´§æ€¥ä¿®å¤éƒ¨ç½²æ­¥éª¤
bash
# 1. ä¿®æ”¹æ•°æ®éªŒè¯è¦æ±‚
git add src/strategies/rule_based_signal_generator.py
git add src/core/unified_scheduler.py

# 2. æäº¤ä¿®å¤
git commit -m "ç´§æ€¥ä¿®å¤: æ•°æ®éªŒè¯ä»20è¡Œæ”¾å®½åˆ°10è¡Œ + è¯¦ç»†æ•°æ®è¯Šæ–­"

# 3. éƒ¨ç½²åˆ°Railway
git push origin main

# 4. ç›‘æ§æ—¥å¿—ï¼ˆç­‰å¾…10-15åˆ†é’Ÿæ•°æ®ç§¯ç´¯ï¼‰
railway logs --follow | grep -E "æ•°æ®è¯Šæ–­|æ•°æ®éªŒè¯|Pipeline|âœ…"

# 5. æŸ¥çœ‹å…·ä½“å¤±è´¥åŸå› 
railway logs --follow | grep "æ•°æ®éªŒè¯å¤±è´¥"
ğŸ“Š é¢„æœŸä¿®å¤æ•ˆæœ
ä¿®å¤æˆåŠŸååº”è¯¥çœ‹åˆ°ï¼š
text
ğŸ” æ•°æ®è¯Šæ–­ #1 - BTCUSDT:
   1h: 15è¡Œ, åˆ—=['open', 'high', 'low', 'close', 'volume']
      æœ€æ–°ä»·æ ¼: 95234.50
   15m: 45è¡Œ, åˆ—=['open', 'high', 'low', 'close', 'volume']  
      æœ€æ–°ä»·æ ¼: 95236.20
   5m: 135è¡Œ, åˆ—=['open', 'high', 'low', 'close', 'volume']
      æœ€æ–°ä»·æ ¼: 95238.10

âœ… BTCUSDT æ•°æ®éªŒè¯é€šè¿‡ (#1)

ğŸ“Š Pipelineè¿›åº¦å¿«ç…§ï¼ˆå·²æ‰«æ50ä¸ªï¼‰
   Stage1éªŒè¯: æœ‰æ•ˆ=50, æ‹’ç»=0
ğŸ¯ å¦‚æœä»ç„¶å¤±è´¥
å¦‚æœ10è¡Œä»ç„¶ä¸å¤Ÿï¼Œå¯ä»¥ä¸´æ—¶é™åˆ°5è¡Œä½œä¸ºæœ€ä½è¦æ±‚ï¼š

python
if len(df) < 5:  # æœ€ä½è¦æ±‚
    logger.debug(f"âš ï¸ æ•°æ®éªŒè¯å¤±è´¥: {tf} åªæœ‰{len(df)}è¡Œæ•°æ® (<5)")
    return False
æ³¨æ„: 5è¡Œæ˜¯æœ€ä½è¦æ±‚ï¼ŒæŠ€æœ¯æŒ‡æ ‡å¯èƒ½ä¸å¤ªå‡†ç¡®ï¼Œä½†è‡³å°‘èƒ½è®©ç³»ç»Ÿå¼€å§‹å·¥ä½œã€‚

ğŸ“‹ éªŒè¯æ¸…å•
éƒ¨ç½²åæ£€æŸ¥ï¼š

çœ‹åˆ°"ğŸ” æ•°æ®è¯Šæ–­"æ—¥å¿—ï¼Œæ˜¾ç¤ºå®é™…æ•°æ®è¡Œæ•°

çœ‹åˆ°"âœ… æ•°æ®éªŒè¯é€šè¿‡"æ—¥å¿—

Stage1éªŒè¯: æœ‰æ•ˆ>0

å¹³å‡åˆ†ææ—¶é—´ >10ms

ç”Ÿæˆä¿¡å· >0ä¸ª

ç«‹å³æ‰§è¡Œä¸Šè¿°ä¿®å¤æ–¹æ¡ˆï¼Œè¿™æ ·åº”è¯¥èƒ½è§£å†³Stage1æ‹’ç»ç‡100%çš„é—®é¢˜ã€‚æ•°æ®è¯Šæ–­æ—¥å¿—ä¼šå‘Šè¯‰æˆ‘ä»¬å…·ä½“æ¯ä¸ªæ—¶é—´æ¡†æ¶æœ‰å¤šå°‘è¡Œæ•°æ®ï¼Œå¸®åŠ©æˆ‘ä»¬è¿›ä¸€æ­¥è°ƒæ•´éªŒè¯è¦æ±‚ã€‚

