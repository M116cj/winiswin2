å‰›å‰›æ·»åŠ äº†æ•¸æ“šå¯ç”¨æ€§ç›£æ§ï¼Œä½†å¾æ—¥èªŒä¾†çœ‹ï¼Œç¾åœ¨é¡¯ç¤ºã€Œæ•¸æ“šå¯ç”¨=530 | æ•¸æ“šç¼ºå¤±=0ã€ï¼Œé€™æ„å‘³è‘—æ•¸æ“šç²å–å·²ç¶“æ­£å¸¸ï¼Œä½†æƒææ™‚é–“åªæœ‰3.0ç§’ï¼Œé‚„æ˜¯å¤ªçŸ­ï¼Œè€Œä¸”æ²’æœ‰æ–°ä¿¡è™Ÿã€‚

æˆ‘å€‘éœ€è¦é€²ä¸€æ­¥åˆ†æç‚ºä»€éº¼æƒæé€™éº¼å¿«ï¼Œä»¥åŠç‚ºä»€éº¼æ²’æœ‰ä¿¡è™Ÿã€‚

å¯èƒ½çš„åŸå› ï¼š

æ•¸æ“šé›–ç„¶å¯ç”¨ï¼Œä½†å¯èƒ½æ˜¯èˆŠæ•¸æ“šï¼ˆæ¯”å¦‚å¾ç·©å­˜ä¸­ç²å–ï¼Œè€Œä¸æ˜¯å¯¦æ™‚WebSocketæ•¸æ“šï¼‰

ä¿¡è™Ÿç”Ÿæˆé‚è¼¯éæ–¼åš´æ ¼ï¼Œå°è‡´æ²’æœ‰äº¤æ˜“ä¿¡è™Ÿ

æƒæé‚è¼¯ä¸­ï¼Œå¯èƒ½æ²’æœ‰æ­£ç¢ºåœ°åˆ†ææ¯å€‹äº¤æ˜“å°ï¼Œæˆ–è€…åˆ†æéç¨‹æœ‰å•é¡Œ

æˆ‘å€‘éœ€è¦æ›´è©³ç´°çš„æ—¥èªŒä¾†äº†è§£æƒæéç¨‹ä¸­ç™¼ç”Ÿäº†ä»€éº¼ã€‚

å»ºè­°ï¼š

åœ¨åˆ†ææ¯å€‹äº¤æ˜“å°æ™‚ï¼Œè¨˜éŒ„åˆ†æçµæœï¼ˆè‡³å°‘è¨˜éŒ„å‰å¹¾å€‹äº¤æ˜“å°çš„åˆ†æçµæœï¼ŒåŒ…æ‹¬ä¿¡å¿ƒå€¼å’Œå‹ç‡ï¼‰

æª¢æŸ¥ä¿¡è™Ÿç”Ÿæˆçš„æ¢ä»¶ï¼Œçœ‹çœ‹æ˜¯å¦å› ç‚ºæ¢ä»¶ä¸æ»¿è¶³è€Œæ²’æœ‰ç”¢ç”Ÿä¿¡è™Ÿ

æˆ‘å€‘å¯ä»¥åœ¨unified_scheduler.pyçš„æƒæå¾ªç’°ä¸­ï¼Œå°æ¯å€‹äº¤æ˜“å°çš„åˆ†æçµæœé€²è¡Œè¨˜éŒ„ï¼ˆæ¯”å¦‚è¨˜éŒ„ä¿¡å¿ƒå€¼å’Œå‹ç‡ï¼Œä»¥åŠæ˜¯å¦ç”¢ç”Ÿä¿¡è™Ÿï¼‰ã€‚

ä½†æ˜¯ï¼Œè€ƒæ…®åˆ°530å€‹äº¤æ˜“å°ï¼Œè¨˜éŒ„æ¯å€‹äº¤æ˜“å°çš„æ—¥èªŒæœƒå¤ªå¤šï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥ï¼š

åªè¨˜éŒ„ç”¢ç”Ÿä¿¡è™Ÿçš„äº¤æ˜“å°

æˆ–è€…åªè¨˜éŒ„å‰10å€‹äº¤æ˜“å°çš„åˆ†æçµæœï¼ˆç”¨æ–¼èª¿è©¦ï¼‰

å¦å¤–ï¼Œæˆ‘å€‘é‚„éœ€è¦æª¢æŸ¥æ•¸æ“šçš„æ–°é®®åº¦ã€‚é›–ç„¶æ•¸æ“šå¯ç”¨ï¼Œä½†å¯èƒ½ä¸æ˜¯æœ€æ–°çš„ã€‚

æˆ‘å€‘å¯ä»¥æ·»åŠ ä¸€å€‹æª¢æŸ¥ï¼šè¨˜éŒ„æ¯å€‹äº¤æ˜“å°çš„æœ€è¿‘ä¸€æ ¹Kç·šçš„æ™‚é–“ï¼Œç¢ºä¿æ•¸æ“šæ˜¯æœ€æ–°çš„ã€‚

æ­¥é©Ÿï¼š

åœ¨æƒæå¾ªç’°ä¸­ï¼Œå°æ–¼æ¯å€‹äº¤æ˜“å°ï¼Œæª¢æŸ¥å¤šæ™‚é–“æ¡†æ¶æ•¸æ“šçš„æœ€æ–°Kç·šæ™‚é–“ã€‚

å¦‚æœæœ€æ–°Kç·šæ™‚é–“èˆ‡ç•¶å‰æ™‚é–“ç›¸å·®è¶…éä¸€å®šé–¾å€¼ï¼ˆæ¯”å¦‚5åˆ†é˜ï¼‰ï¼Œå‰‡èªç‚ºæ•¸æ“šéæœŸï¼Œä¸¦è¨˜éŒ„è­¦å‘Šã€‚

åŒæ™‚ï¼Œæˆ‘å€‘å¯ä»¥è¼¸å‡ºä¸€äº›äº¤æ˜“å°çš„æ•¸æ“šæ™‚é–“æ¨£æœ¬ï¼Œä»¥ç¢ºèªæ•¸æ“šçš„å¯¦æ™‚æ€§ã€‚

æˆ‘å€‘é‚„å¯ä»¥æª¢æŸ¥ä¿¡è™Ÿç”Ÿæˆå™¨çš„é…ç½®ï¼Œç‰¹åˆ¥æ˜¯ä¿¡å¿ƒå€¼å’Œå‹ç‡çš„é–¾å€¼ã€‚

ç›®å‰ï¼Œæˆ‘å€‘åœ¨rule_based_signal_generator.pyä¸­ï¼Œä¿¡è™Ÿç”Ÿæˆæ¢ä»¶æ˜¯ï¼š

ä¿¡å¿ƒå€¼ >= 60

å‹ç‡ >= 55

æˆ‘å€‘å¯ä»¥è¨˜éŒ„å“ªäº›äº¤æ˜“å°é”åˆ°äº†é€™å€‹é–¾å€¼ï¼Œä½†æ²’æœ‰è¢«è¨˜éŒ„ç‚ºä¿¡è™Ÿï¼ˆå¯èƒ½å› ç‚ºå…¶ä»–æ¢ä»¶ï¼‰ã€‚

è®“æˆ‘å€‘åœ¨æƒæå¾ªç’°ä¸­ï¼Œå°æ–¼æ¯å€‹äº¤æ˜“å°ï¼Œè¨˜éŒ„ä¿¡å¿ƒå€¼å’Œå‹ç‡ï¼Œä¸¦æª¢æŸ¥æ˜¯å¦æ»¿è¶³æ¢ä»¶ï¼Œä½†æ²’æœ‰ç”¢ç”Ÿä¿¡è™Ÿçš„åŸå› ã€‚

ä½†æ˜¯ï¼Œè€ƒæ…®åˆ°æ€§èƒ½ï¼Œæˆ‘å€‘ä¸èƒ½è¨˜éŒ„æ‰€æœ‰530å€‹äº¤æ˜“å°çš„è©³ç´°ä¿¡æ¯ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥ï¼š

è¨˜éŒ„æ‰€æœ‰ä¿¡å¿ƒå€¼å¤§æ–¼0çš„äº¤æ˜“å°ï¼ˆæˆ–è€…å¤§æ–¼æŸå€‹è¼ƒä½é–¾å€¼ï¼Œæ¯”å¦‚30ï¼‰

æˆ–è€…åªè¨˜éŒ„å‰10å€‹äº¤æ˜“å°çš„è©³ç´°ä¿¡æ¯

å¦ä¸€ç¨®æ–¹æ³•æ˜¯ï¼šåœ¨æƒæå®Œæˆå¾Œï¼Œè¼¸å‡ºä¿¡å¿ƒå€¼æœ€é«˜çš„å‰10å€‹äº¤æ˜“å°ï¼Œä»¥ä¾¿æˆ‘å€‘äº†è§£ç³»çµ±çœ‹åˆ°äº†ä»€éº¼ã€‚

æˆ‘å€‘å¯ä»¥é€™æ¨£åšï¼š

åœ¨æƒæå¾ªç’°ä¸­ï¼Œæˆ‘å€‘æ”¶é›†æ¯å€‹äº¤æ˜“å°çš„ä¿¡å¿ƒå€¼å’Œå‹ç‡ï¼Œç„¶å¾Œåœ¨æƒæçµæŸå¾Œï¼Œè¼¸å‡ºä¿¡å¿ƒå€¼æœ€é«˜çš„å‰5å€‹äº¤æ˜“å°ã€‚

é€™æ¨£æˆ‘å€‘å°±å¯ä»¥çŸ¥é“ï¼Œç³»çµ±æ˜¯å¦çœ‹åˆ°äº†æ½›åœ¨çš„ä¿¡è™Ÿï¼Œä½†å› ç‚ºä¿¡å¿ƒå€¼æˆ–å‹ç‡ä¸å¤ é«˜è€Œæ²’æœ‰è§¸ç™¼ã€‚

å…·é«”å¯¦ç¾ï¼š

åœ¨unified_scheduler.pyçš„æƒæå¾ªç’°ä¸­ï¼Œæˆ‘å€‘å¯ä»¥ç¶­è­·ä¸€å€‹åˆ—è¡¨ï¼Œå­˜å„²æ¯å€‹äº¤æ˜“å°çš„ä¿¡è™Ÿä¿¡æ¯ï¼ˆåŒ…æ‹¬ä¿¡å¿ƒå€¼ã€å‹ç‡ç­‰ï¼‰ã€‚
ç„¶å¾Œï¼Œåœ¨æƒæçµæŸå¾Œï¼ŒæŒ‰ä¿¡å¿ƒå€¼æ’åºï¼Œè¼¸å‡ºå‰5å€‹ã€‚

åŒæ™‚ï¼Œæˆ‘å€‘ä¹Ÿå¯ä»¥è¼¸å‡ºä¿¡è™Ÿç”Ÿæˆå™¨çš„é…ç½®ï¼Œä»¥ä¾¿ç¢ºèªé–¾å€¼ã€‚

æˆ‘å€‘é‚„éœ€è¦æª¢æŸ¥ä¿¡è™Ÿç”Ÿæˆå™¨çš„æ¨¡å¼ï¼ˆç´”ICTé‚„æ˜¯å‚³çµ±ï¼‰ï¼Œä»¥åŠç‰¹å¾µè¨ˆç®—æ˜¯å¦æ­£å¸¸ã€‚

è€ƒæ…®åˆ°æˆ‘å€‘å‰›å‰›åˆ‡æ›åˆ°ç´”ICTæ¨¡å¼ï¼Œå¯èƒ½æ˜¯ç‰¹å¾µè¨ˆç®—æœ‰å•é¡Œï¼Œå°è‡´ä¿¡å¿ƒå€¼æ™®éåä½ã€‚

æˆ‘å€‘å¯ä»¥åœ¨rule_based_signal_generator.pyçš„ç´”ICTä¿¡å¿ƒå€¼è¨ˆç®—å‡½æ•¸ä¸­ï¼Œè¨˜éŒ„è©³ç´°çš„å­åˆ†æ•¸ï¼Œä»¥ä¾¿èª¿è©¦ã€‚

ä½†æ˜¯ï¼Œç”±æ–¼æˆ‘å€‘åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­ï¼Œæˆ‘å€‘å¯ä»¥æš«æ™‚é–‹å•ŸDEBUGç´šåˆ¥çš„æ—¥èªŒï¼Œæˆ–è€…è¨­è¨ˆä¸€å€‹èª¿è©¦æ¨¡å¼ï¼Œåœ¨èª¿è©¦æ¨¡å¼ä¸‹è¨˜éŒ„è©³ç´°çš„è¨ˆç®—éç¨‹ã€‚

è€ƒæ…®åˆ°æˆ‘å€‘åœ¨Railwayä¸Šï¼Œæˆ‘å€‘å¯ä»¥é€šéç’°å¢ƒè®Šé‡ä¾†æ§åˆ¶èª¿è©¦æ—¥èªŒã€‚

å»ºè­°ï¼š

åœ¨æƒæå¾ªç’°ä¸­ï¼Œè¨˜éŒ„æ¯å€‹äº¤æ˜“å°çš„åˆ†æçµæœï¼ˆä¿¡å¿ƒå€¼ã€å‹ç‡ï¼‰åˆ°ä¸€å€‹åˆ—è¡¨ï¼Œç„¶å¾Œåœ¨æƒæçµæŸå¾Œè¼¸å‡ºå‰5å€‹ä¿¡å¿ƒå€¼æœ€é«˜çš„äº¤æ˜“å°ã€‚

åœ¨ä¿¡è™Ÿç”Ÿæˆå™¨ä¸­ï¼Œå¦‚æœä¿¡å¿ƒå€¼å¤§æ–¼0ï¼Œå‰‡è¨˜éŒ„DEBUGæ—¥èªŒï¼Œé¡¯ç¤ºå­åˆ†æ•¸ï¼ˆé€™æ¨£æˆ‘å€‘å¯ä»¥çœ‹åˆ°ä¿¡å¿ƒå€¼çš„æ§‹æˆï¼‰ã€‚

æª¢æŸ¥æ•¸æ“šçš„æ–°é®®åº¦ã€‚

æˆ‘å€‘å…ˆå¯¦ç¾ç¬¬ä¸€é»ï¼Œåœ¨æƒæçµæŸå¾Œè¼¸å‡ºå‰5å€‹ä¿¡å¿ƒå€¼æœ€é«˜çš„äº¤æ˜“å°ã€‚

ä¿®æ”¹unified_scheduler.pyçš„æƒæå¾ªç’°ï¼š

åˆå§‹åŒ–ä¸€å€‹ç©ºåˆ—è¡¨ï¼šsignals_debug = []

åœ¨æ¯å€‹äº¤æ˜“å°çš„åˆ†æä¸­ï¼Œå³ä½¿æ²’æœ‰ç”¢ç”Ÿä¿¡è™Ÿï¼Œä¹Ÿå°‡ä»¥ä¸‹ä¿¡æ¯å­˜å…¥åˆ—è¡¨ï¼š
(symbol, confidence, win_probability, has_signal)

ç„¶å¾Œï¼Œåœ¨æƒæçµæŸå¾Œï¼ŒæŒ‰ä¿¡å¿ƒå€¼æ’åºï¼Œè¼¸å‡ºå‰5å€‹ã€‚

åŒæ™‚ï¼Œæˆ‘å€‘å¯ä»¥è¼¸å‡ºä¿¡è™Ÿç”Ÿæˆçš„é–¾å€¼ã€‚

å¦å¤–ï¼Œæˆ‘å€‘å¯ä»¥æª¢æŸ¥ä¸€ä¸‹ç•¶å‰çš„ä¿¡è™Ÿç”Ÿæˆå™¨é…ç½®ï¼Œç¢ºä¿æˆ‘å€‘ä½¿ç”¨çš„æ˜¯ç´”ICTæ¨¡å¼ï¼Œä¸¦ä¸”ç‰¹å¾µè¨ˆç®—æ­£å¸¸ã€‚

æˆ‘å€‘é‚„å¯ä»¥åœ¨æƒæé–‹å§‹å‰ï¼Œè¨˜éŒ„ç•¶å‰ä½¿ç”¨çš„ä¿¡è™Ÿç”Ÿæˆå™¨æ¨¡å¼ã€‚

è®“æˆ‘å€‘ä¿®æ”¹ä»£ç¢¼ï¼š

åœ¨unified_scheduler.pyçš„scan_symbolsæ–¹æ³•ä¸­ï¼š

æ­¥é©Ÿï¼š

åˆå§‹åŒ–ä¸€å€‹ç©ºåˆ—è¡¨ï¼šcandidate_signals = []

åœ¨æ¯å€‹äº¤æ˜“å°çš„å¾ªç’°ä¸­ï¼Œèª¿ç”¨analyze_symbolå¾Œï¼Œæˆ‘å€‘æœƒå¾—åˆ°ä¸€å€‹ä¿¡è™Ÿï¼ˆå¯èƒ½ç‚ºNoneï¼‰ï¼Œæˆ‘å€‘å¯ä»¥å¾ä¿¡è™Ÿå°è±¡ä¸­æå–ä¿¡å¿ƒå€¼å’Œå‹ç‡ï¼Œå¦‚æœä¿¡è™Ÿç‚ºNoneï¼Œå‰‡ä¿¡å¿ƒå€¼å’Œå‹ç‡ç‚º0ï¼Œä½†å¯¦éš›ä¸Šæˆ‘å€‘åœ¨åˆ†ææ™‚å·²ç¶“è¨ˆç®—äº†ä¿¡å¿ƒå€¼å’Œå‹ç‡ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥ä¿®æ”¹analyze_symbolæ–¹æ³•ï¼Œè®“å®ƒè¿”å›ä¿¡å¿ƒå€¼å’Œå‹ç‡ï¼Œå³ä½¿æ²’æœ‰ä¿¡è™Ÿã€‚

ä½†æ˜¯ï¼Œç›®å‰analyze_symbolè¿”å›çš„æ˜¯ä¿¡è™Ÿå­—å…¸ï¼ˆå¦‚æœç¬¦åˆæ¢ä»¶ï¼‰æˆ–Noneã€‚æˆ‘å€‘å¯ä»¥ä¿®æ”¹å®ƒï¼Œè®“å®ƒç¸½æ˜¯è¿”å›ä¸€å€‹åŒ…å«ä¿¡å¿ƒå€¼å’Œå‹ç‡çš„å­—å…¸ï¼Œä»¥åŠä¸€å€‹æ¨™èªŒè¡¨ç¤ºæ˜¯å¦ç”¢ç”Ÿä¿¡è™Ÿã€‚

ä½†é€™æ¨£æ”¹å‹•è¼ƒå¤§ã€‚æˆ‘å€‘å¯ä»¥æ›ä¸€ç¨®æ–¹å¼ï¼šåœ¨analyze_symbolå…§éƒ¨ï¼Œæˆ‘å€‘è¨˜éŒ„ä¿¡å¿ƒå€¼å’Œå‹ç‡ï¼Œç„¶å¾Œåœ¨è¿”å›ä¿¡è™Ÿçš„åŒæ™‚ï¼Œä¹Ÿè¿”å›ä¿¡å¿ƒå€¼å’Œå‹ç‡ï¼ˆå³ä½¿æ²’æœ‰ä¿¡è™Ÿï¼‰ã€‚ä½†æ˜¯ï¼Œç›®å‰æ²’æœ‰ä¿¡è™Ÿæ™‚è¿”å›Noneï¼Œæ‰€ä»¥æˆ‘å€‘éœ€è¦èª¿æ•´ã€‚

æˆ‘å€‘å¯ä»¥è®“analyze_symbolè¿”å›ä¸€å€‹å…ƒçµ„ï¼š(signal, confidence, win_probability)ï¼Œå…¶ä¸­signalæ˜¯ä¿¡è™Ÿå­—å…¸ï¼ˆå¦‚æœç¬¦åˆæ¢ä»¶ï¼‰ï¼Œå¦å‰‡ç‚ºNoneï¼Œè€Œconfidenceå’Œwin_probabilityç¸½æ˜¯è¿”å›ã€‚

ç„¶å¾Œï¼Œæˆ‘å€‘åœ¨æƒæå¾ªç’°ä¸­ï¼Œå°±å¯ä»¥æ”¶é›†æ¯å€‹äº¤æ˜“å°çš„ä¿¡å¿ƒå€¼å’Œå‹ç‡ã€‚

ä½†æ˜¯ï¼Œé€™éœ€è¦ä¿®æ”¹analyze_symbolçš„æ¥å£ã€‚

å¦ä¸€ç¨®æ–¹æ³•ï¼šæˆ‘å€‘åœ¨analyze_symbolå…§éƒ¨ï¼Œåœ¨è¨ˆç®—ä¿¡å¿ƒå€¼å’Œå‹ç‡å¾Œï¼Œå³ä½¿ä¸ç”¢ç”Ÿä¿¡è™Ÿï¼Œä¹Ÿå°‡ä¿¡å¿ƒå€¼å’Œå‹ç‡è¨˜éŒ„åœ¨æ—¥èªŒä¸­ï¼ˆä½†é€™æ¨£æœƒç”¢ç”Ÿå¤§é‡æ—¥èªŒï¼‰ã€‚

æˆ‘å€‘æŠ˜ä¸­ï¼šåœ¨analyze_symbolå…§éƒ¨ï¼Œå¦‚æœä¿¡å¿ƒå€¼å¤§æ–¼0ï¼Œå‰‡è¨˜éŒ„DEBUGæ—¥èªŒï¼ŒåŒ…æ‹¬ä¿¡å¿ƒå€¼å’Œå‹ç‡ã€‚

åŒæ™‚ï¼Œåœ¨æƒæå¾ªç’°ä¸­ï¼Œæˆ‘å€‘å¯ä»¥èª¿ç”¨ä¸€å€‹æ–°çš„æ–¹æ³•ï¼Œæ¯”å¦‚get_confidence_and_win_probabilityï¼Œä½†é€™æœƒé‡è¤‡è¨ˆç®—ã€‚

è€ƒæ…®åˆ°æ€§èƒ½ï¼Œæˆ‘å€‘å¯ä»¥åœ¨analyze_symbolä¸­ï¼Œåœ¨è¨ˆç®—ä¿¡å¿ƒå€¼å’Œå‹ç‡å¾Œï¼Œå°‡å®ƒå€‘å­˜å„²åœ¨å¯¦ä¾‹è®Šé‡ä¸­ï¼Œç„¶å¾Œåœ¨æƒæå¾ªç’°ä¸­è®€å–ã€‚

ä½†é€™æ¨£è¨­è¨ˆä¸å¥½ã€‚

æˆ‘å»ºè­°ä¿®æ”¹analyze_symbolï¼Œè®“å®ƒè¿”å›ä¸€å€‹å­—å…¸ï¼Œå³ä½¿æ²’æœ‰ä¿¡è™Ÿï¼Œä¹Ÿè¿”å›ä¸€å€‹åŒ…å«confidenceå’Œwin_probabilityçš„å­—å…¸ï¼Œä½†è¨­ç½®ä¸€å€‹signalå­—æ®µç‚ºFalseã€‚é€™æ¨£æˆ‘å€‘å°±å¯ä»¥çµ±ä¸€è™•ç†ã€‚

ä½†æ˜¯ï¼Œé€™æœƒæ”¹è®Šæ¥å£ï¼Œå¯èƒ½å½±éŸ¿å…¶ä»–ä»£ç¢¼ã€‚

æˆ‘å€‘å¯ä»¥é€™æ¨£åšï¼š

åœ¨analyze_symbolä¸­ï¼Œå…ˆè¨ˆç®—ä¿¡å¿ƒå€¼å’Œå‹ç‡ï¼Œç„¶å¾Œæª¢æŸ¥æ˜¯å¦æ»¿è¶³ä¿¡è™Ÿæ¢ä»¶ï¼Œå¦‚æœæ»¿è¶³ï¼Œå‰‡è¿”å›ä¿¡è™Ÿå­—å…¸ï¼ˆåŒ…å«confidenceå’Œwin_probabilityï¼‰ï¼Œå¦å‰‡è¿”å›ä¸€å€‹å­—å…¸ï¼ŒåŒ…å«confidenceå’Œwin_probabilityï¼Œä»¥åŠsignalå­—æ®µç‚ºFalseã€‚

ç„¶å¾Œï¼Œåœ¨æƒæå¾ªç’°ä¸­ï¼Œæˆ‘å€‘å°±å¯ä»¥çµ±ä¸€è™•ç†ï¼Œæ”¶é›†ä¿¡å¿ƒå€¼å’Œå‹ç‡ã€‚

æˆ‘å€‘ä¿®æ”¹analyze_symbolæ–¹æ³•ï¼š

ç•¶å‰analyze_symbolè¿”å›Noneæˆ–ä¿¡è™Ÿå­—å…¸ã€‚æˆ‘å€‘å°‡å…¶æ”¹ç‚ºç¸½æ˜¯è¿”å›ä¸€å€‹å­—å…¸ï¼ŒåŒ…å«ï¼š

signal: å¸ƒçˆ¾å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦ç”¢ç”Ÿä¿¡è™Ÿ

confidence: ä¿¡å¿ƒå€¼

win_probability: å‹ç‡

å…¶ä»–ä¿¡è™Ÿç›¸é—œå­—æ®µï¼ˆå¦‚æœsignalç‚ºTrueï¼‰

é€™æ¨£ï¼Œæˆ‘å€‘åœ¨æƒæå¾ªç’°ä¸­å°±å¯ä»¥é€™æ¨£å¯«ï¼š

result = self.analyze_symbol(symbol, multi_tf_data)
confidence = result['confidence']
win_probability = result['win_probability']
if result['signal']:
# ç”¢ç”Ÿä¿¡è™Ÿï¼Œå‰µå»ºä¿¡è™Ÿå°è±¡
signal = ... ï¼ˆæ ¹æ“šresultå‰µå»ºä¿¡è™Ÿå­—å…¸ï¼‰
self._process_signal(signal)

ç„¶å¾Œï¼Œæˆ‘å€‘å°‡(symbol, confidence, win_probability, result['signal'])åŠ å…¥candidate_signalsã€‚

é€™æ˜¯ä¸€å€‹è¼ƒå¤§çš„æ”¹å‹•ï¼Œä½†èƒ½æä¾›æ›´å¤šçš„èª¿è©¦ä¿¡æ¯ã€‚

æˆ‘å€‘ç¾åœ¨å°±åšé€™å€‹æ”¹å‹•ã€‚

æ­¥é©Ÿï¼š

ä¿®æ”¹analyze_symbolæ–¹æ³•ï¼Œä½¿å…¶ç¸½æ˜¯è¿”å›ä¸€å€‹å­—å…¸ã€‚

åœ¨æƒæå¾ªç’°ä¸­ï¼Œæ ¹æ“šè¿”å›çš„å­—å…¸ä¸­çš„signalå­—æ®µä¾†åˆ¤æ–·æ˜¯å¦ç”¢ç”Ÿä¿¡è™Ÿã€‚

æ”¶é›†æ¯å€‹äº¤æ˜“å°çš„ä¿¡å¿ƒå€¼å’Œå‹ç‡ï¼ŒæƒæçµæŸå¾Œè¼¸å‡ºå‰5å€‹ã€‚

è€ƒæ…®åˆ°æ™‚é–“ï¼Œæˆ‘å€‘å…ˆå¯¦ç¾ä¸€å€‹è¼•é‡ç´šçš„èª¿è©¦æ–¹æ³•ï¼šåœ¨æƒæå¾ªç’°ä¸­ï¼Œæˆ‘å€‘åªè¨˜éŒ„å‰10å€‹äº¤æ˜“å°çš„ä¿¡å¿ƒå€¼å’Œå‹ç‡ï¼Œä»¥åŠæ˜¯å¦ç”¢ç”Ÿä¿¡è™Ÿã€‚

æˆ‘å€‘å¯ä»¥é€™æ¨£åšï¼š

åœ¨æƒæå¾ªç’°ä¸­ï¼Œæˆ‘å€‘ç”¨ä¸€å€‹è¨ˆæ•¸å™¨ï¼Œåªè¨˜éŒ„å‰10å€‹äº¤æ˜“å°çš„è©³ç´°ä¿¡æ¯ã€‚

ä½†æ˜¯ï¼Œé€™10å€‹äº¤æ˜“å°å¯èƒ½éƒ½æ˜¯æ²’æœ‰ä¿¡è™Ÿçš„ï¼Œæˆ‘å€‘æ›´é—œå¿ƒçš„æ˜¯æœ‰ä¿¡è™Ÿçš„æˆ–è€…ä¿¡å¿ƒå€¼é«˜çš„ã€‚

æ‰€ä»¥ï¼Œæˆ‘å€‘é‚„æ˜¯è¨˜éŒ„æ‰€æœ‰äº¤æ˜“å°çš„ä¿¡å¿ƒå€¼å’Œå‹ç‡ï¼Œä½†åªè¼¸å‡ºå‰5å€‹ä¿¡å¿ƒå€¼æœ€é«˜çš„ã€‚

æˆ‘å€‘å¯ä»¥åœ¨æƒæå¾ªç’°ä¸­ï¼Œå°‡æ¯å€‹äº¤æ˜“å°çš„ä¿¡å¿ƒå€¼å’Œå‹ç‡å­˜å„²åœ¨ä¸€å€‹åˆ—è¡¨ä¸­ï¼Œç„¶å¾Œåœ¨æƒæçµæŸå¾Œæ’åºè¼¸å‡ºã€‚

æˆ‘å€‘ä¸ä¿®æ”¹analyze_symbolçš„è¿”å›çµæ§‹ï¼Œè€Œæ˜¯é€šéåœ¨analyze_symbolå…§éƒ¨å°‡ä¿¡å¿ƒå€¼å’Œå‹ç‡è¨˜éŒ„åˆ°æ—¥èªŒï¼ˆDEBUGç´šåˆ¥ï¼‰çš„æ–¹å¼ï¼Œä½†é€™æ¨£æˆ‘å€‘åœ¨Railwayä¸Šå¯èƒ½çœ‹ä¸åˆ°DEBUGæ—¥èªŒã€‚

æˆ‘å€‘å¯ä»¥é€šéåœ¨æƒæå¾ªç’°ä¸­èª¿ç”¨ä¿¡è™Ÿç”Ÿæˆå™¨çš„è¨ˆç®—ä¿¡å¿ƒå€¼çš„æ–¹æ³•ä¾†ç²å–ä¿¡å¿ƒå€¼å’Œå‹ç‡ï¼Œä½†é€™æœƒé‡è¤‡è¨ˆç®—ã€‚

è€ƒæ…®åˆ°æ€§èƒ½ï¼Œæˆ‘å€‘æš«æ™‚ä¸é‡è¤‡è¨ˆç®—ã€‚

æˆ‘å»ºè­°æˆ‘å€‘ä¿®æ”¹analyze_symbolï¼Œè®“å®ƒåœ¨è¿”å›ä¿¡è™Ÿçš„åŒæ™‚ï¼Œä¹Ÿè¿”å›ä¿¡å¿ƒå€¼å’Œå‹ç‡ï¼Œä½†æˆ‘å€‘ä¸æ”¹è®Šè¿”å›é¡å‹ï¼Œè€Œæ˜¯é€šéé¡å¤–çš„åƒæ•¸è¿”å›ã€‚

ä½†æ˜¯ï¼Œé€™ä¹Ÿéœ€è¦ä¿®æ”¹æ¥å£ã€‚

æˆ‘å€‘æ±ºå®šï¼šåœ¨analyze_symbolå…§éƒ¨ï¼Œè¨ˆç®—å‡ºä¿¡å¿ƒå€¼å’Œå‹ç‡å¾Œï¼Œå°‡å®ƒå€‘ä½œç‚ºå…ƒçµ„è¿”å›ï¼ŒåŒæ™‚è¿”å›ä¿¡è™Ÿå­—å…¸ã€‚æˆ‘å€‘ä¿®æ”¹è¿”å›é¡å‹ç‚ºå…ƒçµ„ï¼š(signal, confidence, win_probability)

ç„¶å¾Œï¼Œåœ¨æƒæå¾ªç’°ä¸­ï¼Œæˆ‘å€‘å¯ä»¥é€™æ¨£å¯«ï¼š

text
  signal, confidence, win_probability = self.analyze_symbol(symbol, multi_tf_data)

  if signal is not None:
      # è™•ç†ä¿¡è™Ÿ
      self._process_signal(signal)

  # å°‡çµæœåŠ å…¥èª¿è©¦åˆ—è¡¨
  candidate_signals.append((symbol, confidence, win_probability, signal is not None))
ç„¶å¾Œï¼Œæˆ‘å€‘åœ¨æƒæçµæŸå¾Œï¼ŒæŒ‰ä¿¡å¿ƒå€¼æ’åºï¼Œè¼¸å‡ºå‰5å€‹ã€‚

é€™æ¨£ï¼Œæˆ‘å€‘å°±å¯ä»¥çœ‹åˆ°æ¯å€‹äº¤æ˜“å°çš„ä¿¡å¿ƒå€¼å’Œå‹ç‡ï¼Œä»¥åŠæ˜¯å¦ç”¢ç”Ÿä¿¡è™Ÿã€‚

æˆ‘å€‘ç¾åœ¨å°±ä¿®æ”¹analyze_symbolæ–¹æ³•ï¼Œè®“å®ƒè¿”å›ä¸‰å€‹å€¼ï¼šä¿¡è™Ÿï¼ˆå­—å…¸æˆ–Noneï¼‰ã€ä¿¡å¿ƒå€¼ï¼ˆæµ®é»æ•¸ï¼‰ã€å‹ç‡ï¼ˆæµ®é»æ•¸ï¼‰ã€‚

ç„¶å¾Œï¼Œæˆ‘å€‘ä¿®æ”¹æƒæå¾ªç’°ä¾†é©æ‡‰é€™å€‹æ”¹è®Šã€‚

æˆ‘å€‘é‚„éœ€è¦ä¿®æ”¹analyze_symbolçš„èª¿ç”¨è™•ï¼Œç›®å‰å®ƒåªè¿”å›ä¸€å€‹ä¿¡è™Ÿå­—å…¸ã€‚

é€™æ˜¯ä¸€å€‹ç ´å£æ€§ä¿®æ”¹ï¼Œä½†æˆ‘å€‘ç¾åœ¨éœ€è¦èª¿è©¦ä¿¡æ¯ã€‚

æˆ‘å€‘é–‹å§‹ä¿®æ”¹ï¼š

åœ¨rule_based_signal_generator.pyçš„analyze_symbolæ–¹æ³•ä¸­ï¼Œåœ¨è¨ˆç®—å®Œä¿¡å¿ƒå€¼å’Œå‹ç‡å¾Œï¼Œå¦‚æœæ¢ä»¶æ»¿è¶³ï¼Œå‰‡ç”Ÿæˆä¿¡è™Ÿå­—å…¸ï¼Œä¸¦è¿”å› (signal_dict, confidence, win_probability)
å¦‚æœæ¢ä»¶ä¸æ»¿è¶³ï¼Œå‰‡è¿”å› (None, confidence, win_probability)

åœ¨unified_scheduler.pyä¸­ï¼Œä¿®æ”¹æƒæå¾ªç’°ï¼Œæ¥æ”¶ä¸‰å€‹è¿”å›å€¼ã€‚

åœ¨æƒæå¾ªç’°ä¸­ï¼Œæ”¶é›†æ¯å€‹äº¤æ˜“å°çš„ä¿¡å¿ƒå€¼å’Œå‹ç‡ã€‚

æƒæçµæŸå¾Œï¼ŒæŒ‰ä¿¡å¿ƒå€¼æ’åºï¼Œè¼¸å‡ºå‰5å€‹ã€‚

æˆ‘å€‘é‚„å¯ä»¥åœ¨æƒæé–‹å§‹æ™‚ï¼Œè¨˜éŒ„ç•¶å‰ä¿¡è™Ÿç”Ÿæˆå™¨çš„æ¨¡å¼ï¼ˆç´”ICTé‚„æ˜¯å‚³çµ±ï¼‰ã€‚

è®“æˆ‘å€‘å¯¦æ–½é€™äº›ä¿®æ”¹ã€‚

çœ‹åˆ°æ—¥å¿—åï¼Œé—®é¢˜å·²ç»å¾ˆæ˜æ˜¾äº†ï¼æ•°æ®è·å–å·²ç»ä¿®å¤ï¼Œä½†ä¿¡å·ç”Ÿæˆé€»è¾‘å¯èƒ½æœ‰é—®é¢˜ã€‚è®©æˆ‘å¸®æ‚¨æ·±å…¥åˆ†æï¼š

ğŸ” å½“å‰çŠ¶æ€åˆ†æ
âœ… å¥½æ¶ˆæ¯ï¼š
æ•°æ®å¯ç”¨æ€§ï¼š530/530 âœ…

æ‰«ææ—¶é—´ï¼š3.0ç§’ â†’ æ¯”ä¹‹å‰çš„1.1ç§’åˆç†å¤šäº†

æ•°æ®ç¼ºå¤±é—®é¢˜å·²è§£å†³

âŒ é—®é¢˜æ‰€åœ¨ï¼š
ä»ç„¶æ²¡æœ‰æ–°ä¿¡å·

530ä¸ªäº¤æ˜“å¯¹åœ¨3ç§’å†…æ‰«æå®Œ â†’ å¯èƒ½åˆ†ææ·±åº¦ä¸è¶³

ğŸ¯ ç«‹å³è¯Šæ–­æ­¥éª¤
æ­¥éª¤1ï¼šæ£€æŸ¥ä¿¡å·ç”Ÿæˆå™¨çš„è¯¦ç»†è¾“å‡º
åœ¨unified_scheduler.pyä¸­æ·»åŠ è¯¦ç»†çš„åˆ†ææ—¥å¿—ï¼š

python
def scan_symbols(self):
    analyzed_count = 0
    signal_candidates = []  # è®°å½•æ½œåœ¨ä¿¡å·
    
    for symbol in self.symbols:
        multi_tf_data = self.data_service.get_multi_timeframe_klines(symbol, self.timeframes)
        if not multi_tf_data:
            continue
            
        # åˆ†æç¬¦å·å¹¶è·å–è¯¦ç»†ç»“æœ
        analysis_result = self.analyze_symbol_with_details(symbol, multi_tf_data)
        analyzed_count += 1
        
        # è®°å½•æ‰€æœ‰åˆ†æç»“æœï¼Œä¸åªæ˜¯ä¿¡å·
        if analysis_result:
            signal_candidates.append(analysis_result)
    
    # è¯¦ç»†æŠ¥å‘Šåˆ†æç»“æœ
    self._log_detailed_analysis_report(signal_candidates, analyzed_count)

def analyze_symbol_with_details(self, symbol, multi_tf_data):
    """å¢å¼ºçš„åˆ†æå‡½æ•°ï¼Œè¿”å›è¯¦ç»†ç»“æœ"""
    try:
        # è°ƒç”¨ä¿¡å·ç”Ÿæˆå™¨
        signal = self.signal_generator.generate_signal(
            symbol=symbol,
            klines_data=multi_tf_data,
            market_structure="NEUTRAL"  # å¯èƒ½éœ€è¦ä»å…¶ä»–åœ°æ–¹è·å–
        )
        
        if signal and signal.get('confidence', 0) > 0:
            return {
                'symbol': symbol,
                'confidence': signal.get('confidence', 0),
                'win_probability': signal.get('win_probability', 0),
                'direction': signal.get('direction'),
                'is_valid_signal': self._is_valid_signal(signal),
                'reason': 'VALID_SIGNAL' if self._is_valid_signal(signal) else 'LOW_CONFIDENCE'
            }
        else:
            # å³ä½¿æ²¡æœ‰ä¿¡å·ï¼Œä¹Ÿè®°å½•åˆ†æç»“æœ
            return {
                'symbol': symbol,
                'confidence': signal.get('confidence', 0) if signal else 0,
                'win_probability': signal.get('win_probability', 0) if signal else 0,
                'direction': signal.get('direction') if signal else None,
                'is_valid_signal': False,
                'reason': 'NO_SIGNAL_GENERATED' if not signal else 'BELOW_THRESHOLD'
            }
            
    except Exception as e:
        logger.error(f"âŒ åˆ†æ {symbol} æ—¶å‡ºé”™: {str(e)}")
        return None

def _log_detailed_analysis_report(self, signal_candidates, analyzed_count):
    """ç”Ÿæˆè¯¦ç»†çš„åˆ†ææŠ¥å‘Š"""
    if not signal_candidates:
        logger.warning("ğŸ” è¯¦ç»†åˆ†æ: 530ä¸ªäº¤æ˜“å¯¹å‡æœªäº§ç”Ÿä»»ä½•ä¿¡å·")
        return
        
    # æŒ‰ä¿¡å¿ƒå€¼æ’åº
    sorted_candidates = sorted(signal_candidates, key=lambda x: x['confidence'], reverse=True)
    
    # ç»Ÿè®¡ä¿¡æ¯
    valid_signals = [s for s in signal_candidates if s['is_valid_signal']]
    high_confidence = [s for s in signal_candidates if s['confidence'] > 30]
    
    logger.info("ğŸ“Š ===== è¯¦ç»†åˆ†ææŠ¥å‘Š =====")
    logger.info(f"ğŸ”§ å®é™…åˆ†æäº¤æ˜“å¯¹: {analyzed_count}/530")
    logger.info(f"ğŸ¯ æœ‰æ•ˆä¿¡å·: {len(valid_signals)}")
    logger.info(f"ğŸ“ˆ é«˜ä¿¡å¿ƒå€¼(>30): {len(high_confidence)}")
    
    # æ˜¾ç¤ºå‰10ä¸ªæœ€é«˜ä¿¡å¿ƒå€¼çš„äº¤æ˜“å¯¹
    logger.info("ğŸ† å‰10ä¸ªæœ€é«˜ä¿¡å¿ƒå€¼äº¤æ˜“å¯¹:")
    for i, candidate in enumerate(sorted_candidates[:10]):
        status = "âœ…" if candidate['is_valid_signal'] else "â¸ï¸"
        logger.info(f"  {i+1}. {candidate['symbol']}: {candidate['confidence']:.1f}åˆ† "
                   f"({candidate['win_probability']:.1%}) - {candidate['reason']} {status}")
    
    # ä¿¡å·åˆ†å¸ƒ
    confidence_ranges = {
        '0-20': len([s for s in signal_candidates if s['confidence'] <= 20]),
        '20-40': len([s for s in signal_candidates if 20 < s['confidence'] <= 40]),
        '40-60': len([s for s in signal_candidates if 40 < s['confidence'] <= 60]),
        '60-80': len([s for s in signal_candidates if 60 < s['confidence'] <= 80]),
        '80-100': len([s for s in signal_candidates if s['confidence'] > 80]),
    }
    
    logger.info("ğŸ“‹ ä¿¡å¿ƒå€¼åˆ†å¸ƒ:")
    for range_name, count in confidence_ranges.items():
        percentage = (count / len(signal_candidates)) * 100
        logger.info(f"  {range_name}: {count}ä¸ª ({percentage:.1f}%)")
æ­¥éª¤2ï¼šæ£€æŸ¥ä¿¡å·ç”Ÿæˆå™¨é…ç½®
åœ¨rule_based_signal_generator.pyä¸­æ·»åŠ é…ç½®æ£€æŸ¥ï¼š

python
def log_configuration(self):
    """è®°å½•å½“å‰ä¿¡å·ç”Ÿæˆå™¨çš„é…ç½®"""
    logger.info("âš™ï¸ ===== ä¿¡å·ç”Ÿæˆå™¨é…ç½® =====")
    logger.info(f"ğŸ”§ è®¡ç®—æ¨¡å¼: {'çº¯ICT' if self.use_pure_ict else 'ä¼ ç»Ÿ'}")
    logger.info(f"ğŸ¯ ä¿¡å¿ƒå€¼é˜ˆå€¼: {self.config.get('min_confidence', 60)}")
    logger.info(f"ğŸ“ˆ èƒœç‡é˜ˆå€¼: {self.config.get('min_win_probability', 55)}")
    logger.info(f"ğŸ•’ ä½¿ç”¨çš„æ—¶é—´æ¡†æ¶: {self.timeframes}")
    
    if self.use_pure_ict:
        logger.info("âœ… çº¯ICTæ¨¡å¼: ä½¿ç”¨12ä¸ªICTç‰¹å¾")
        # æ£€æŸ¥feature_engineçŠ¶æ€
        if hasattr(self, 'feature_engine') and self.feature_engine:
            logger.info("âœ… Feature Engine: å·²åŠ è½½")
        else:
            logger.error("âŒ Feature Engine: æœªåŠ è½½!")
    else:
        logger.info("âœ… ä¼ ç»Ÿæ¨¡å¼: ä½¿ç”¨RSI/MACD/EMAæŒ‡æ ‡")
æ­¥éª¤3ï¼šåœ¨è°ƒåº¦å™¨ä¸­æ·»åŠ é…ç½®æ£€æŸ¥
åœ¨unified_scheduler.pyçš„æ‰«æå¼€å§‹å‰ï¼š

python
def scan_symbols(self):
    # è®°å½•é…ç½®
    self.signal_generator.log_configuration()
    
    # è®°å½•å¸‚åœºçŠ¶æ€
    self._log_market_conditions()
    
    # åŸæœ‰çš„æ‰«æé€»è¾‘...
æ­¥éª¤4ï¼šæ£€æŸ¥å¸‚åœºæ•°æ®è´¨é‡
python
def _log_market_conditions(self):
    """è®°å½•å½“å‰å¸‚åœºçŠ¶å†µ"""
    sample_symbols = self.symbols[:5]  # æ£€æŸ¥å‰5ä¸ªç¬¦å·
    
    logger.info("ğŸŒ¡ï¸ ===== å¸‚åœºçŠ¶å†µæ£€æŸ¥ =====")
    for symbol in sample_symbols:
        try:
            multi_tf_data = self.data_service.get_multi_timeframe_klines(symbol, self.timeframes)
            if multi_tf_data:
                data_status = "âœ… æ•°æ®æ­£å¸¸"
                # æ£€æŸ¥æ•°æ®æ—¶é—´æˆ³
                for tf, data in multi_tf_data.items():
                    if len(data) > 0:
                        latest_time = data.iloc[-1]['timestamp'] if 'timestamp' in data.columns else 'æœªçŸ¥'
                        data_status += f" | {tf}: {len(data)}æ ¹Kçº¿"
            else:
                data_status = "âŒ æ•°æ®ç¼ºå¤±"
                
            logger.info(f"  {symbol}: {data_status}")
        except Exception as e:
            logger.error(f"  {symbol}: æ£€æŸ¥å¤±è´¥ - {str(e)}")
ğŸš¨ å¯èƒ½çš„æ ¹æœ¬åŸå› 
åŸºäº3ç§’æ‰«æ530ä¸ªäº¤æ˜“å¯¹ï¼Œå¯èƒ½çš„é—®é¢˜ï¼š

1. ä¿¡å·ç”Ÿæˆå™¨è¿”å›None
python
# å¯èƒ½é—®é¢˜ï¼šgenerate_signalæ€»æ˜¯è¿”å›None
def generate_signal(self, symbol, klines_data, market_structure):
    # æŸäº›æ¡ä»¶å¯¼è‡´ç«‹å³è¿”å›None
    if not self._validate_input(klines_data):
        return None  # âŒ é™é»˜å¤±è´¥
    
    # æˆ–è€…ä¿¡å¿ƒå€¼è®¡ç®—æ€»æ˜¯è¿”å›0
    confidence = self._calculate_confidence(...)
    if confidence < 0.1:  # é˜ˆå€¼è¿‡é«˜
        return None
2. çº¯ICTæ¨¡å¼ç‰¹å¾è®¡ç®—å¤±è´¥
python
# å¯èƒ½é—®é¢˜ï¼šICTç‰¹å¾è®¡ç®—è¿”å›é»˜è®¤å€¼
def _build_ict_smc_features(self, signal, klines_data):
    try:
        # ç‰¹å¾è®¡ç®—é€»è¾‘...
        return features
    except Exception:
        return {}  # âŒ è¿”å›ç©ºç‰¹å¾ï¼Œå¯¼è‡´ä¿¡å¿ƒå€¼ä¸º0
3. é…ç½®é˜ˆå€¼è¿‡é«˜
python
# å½“å‰é…ç½®å¯èƒ½è¿‡äºä¸¥æ ¼
MIN_CONFIDENCE = 60      # éœ€è¦60åˆ†ä»¥ä¸Š
MIN_WIN_RATE = 55        # éœ€è¦55%èƒœç‡
ğŸ¯ ç«‹å³è¡ŒåŠ¨
è¯·å®æ–½ä¸Šè¿°è¯Šæ–­ä»£ç ï¼Œç„¶åé‡æ–°è¿è¡Œã€‚æˆ‘ä»¬ä¼šçœ‹åˆ°ï¼š

ä¿¡å·ç”Ÿæˆå™¨çš„å®é™…é…ç½®

æ¯ä¸ªäº¤æ˜“å¯¹çš„è¯¦ç»†åˆ†æç»“æœ

ä¿¡å¿ƒå€¼åˆ†å¸ƒæƒ…å†µ

å¸‚åœºæ•°æ®è´¨é‡