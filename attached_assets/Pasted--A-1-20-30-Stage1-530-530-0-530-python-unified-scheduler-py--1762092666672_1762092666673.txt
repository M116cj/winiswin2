æ–¹æ¡ˆAï¼šåˆ†æ­¥éªŒè¯éƒ¨ç½²
é˜¶æ®µ1ï¼šç«‹å³éªŒè¯å½“å‰ä¿®å¤ï¼ˆ20-30åˆ†é’Ÿï¼‰
ç›®æ ‡ï¼šç¡®è®¤Stage1æ‹’ç»ç‡ä»530/530é™è‡³0/530

python
# åœ¨unified_scheduler.pyä¸­æ·»åŠ éªŒè¯æ£€æŸ¥
def scan_symbols(self):
    stage1_passed = 0
    stage1_failed = 0
    
    for symbol in self.symbols:
        multi_tf_data = self.data_service.get_multi_timeframe_klines(symbol, self.timeframes)
        if not multi_tf_data:
            continue
            
        # æµ‹è¯•æ•°æ®éªŒè¯
        if self._test_data_validation(symbol, multi_tf_data):
            stage1_passed += 1
        else:
            stage1_failed += 1
            
        # æ­£å¸¸åˆ†ææµç¨‹...
    
    # éªŒè¯ç»“æœ
    logger.info(f"ğŸ” é˜¶æ®µ1éªŒè¯ç»“æœ: é€šè¿‡={stage1_passed}, æ‹’ç»={stage1_failed}")
    
    if stage1_failed == len(self.symbols):
        logger.error("ğŸš¨ ç´§æ€¥: æ‰€æœ‰äº¤æ˜“å¯¹ä»åœ¨Stage1è¢«æ‹’ç»!")
        return []
    elif stage1_failed > 0:
        logger.warning(f"âš ï¸ è­¦å‘Š: {stage1_failed}ä¸ªäº¤æ˜“å¯¹è¢«Stage1æ‹’ç»")
    else:
        logger.info("âœ… æˆåŠŸ: Stage1æ‹’ç»ç‡é™è‡³0%!")
    
    return signal_candidates

def _test_data_validation(self, symbol, multi_tf_data):
    """ç‹¬ç«‹æµ‹è¯•æ•°æ®éªŒè¯"""
    try:
        # ä½¿ç”¨æ”¾å®½çš„éªŒè¯é€»è¾‘
        return self._relaxed_validate_data(multi_tf_data)
    except Exception as e:
        logger.error(f"âŒ æ•°æ®éªŒè¯æµ‹è¯•å¤±è´¥ {symbol}: {e}")
        return False

def _relaxed_validate_data(self, multi_tf_data):
    """æåº¦æ”¾å®½çš„æ•°æ®éªŒè¯"""
    required_tfs = ['1h', '15m', '5m']
    
    for tf in required_tfs:
        if tf not in multi_tf_data:
            return False
            
        df = multi_tf_data[tf]
        if df is None or len(df) < 3:  # æåº¦æ”¾å®½åˆ°3è¡Œ
            return False
            
        # åªæ£€æŸ¥æœ€åŸºç¡€çš„åˆ—
        basic_cols = ['open', 'high', 'low', 'close']
        if not all(col in df.columns for col in basic_cols):
            return False
    
    return True
é˜¶æ®µ1æˆåŠŸæ ‡å‡†
éƒ¨ç½²åæœŸæœ›çœ‹åˆ°ï¼š

text
âœ… æ•°æ®æœåŠ¡æ­£å¸¸
âœ… ä¿¡å·ç”Ÿæˆå™¨åˆå§‹åŒ–æˆåŠŸ  
ğŸ” é˜¶æ®µ1éªŒè¯ç»“æœ: é€šè¿‡=530, æ‹’ç»=0
ğŸ“Š å¹³å‡åˆ†ææ—¶é—´: 45.2ms (ä¸å†æ˜¯0.0ms)
ğŸ“Š ä¿¡å·åˆ†æè¯Šæ–­ï¼ˆä¿¡å¿ƒå€¼Top 10ï¼‰:
 1. BTCUSDT      | ä¿¡å¿ƒ= 65.2 | å‹ç‡= 58.3% | âœ… ä¿¡è™Ÿ
 2. ETHUSDT      | ä¿¡å¿ƒ= 61.8 | å‹ç‡= 56.7% | âŒ ç„¡ä¿¡è™Ÿ
é˜¶æ®µ2ï¼šæ•°æ®åº“å¢å¼ºç³»ç»Ÿï¼ˆé˜¶æ®µ1æˆåŠŸåï¼‰
ç›®æ ‡ï¼šæ— ç¼é›†æˆæ•°æ®åº“å¢å¼ºåŠŸèƒ½

python
# é˜¶æ®µ2éƒ¨ç½²æ–‡ä»¶ï¼šsrc/core/trading_database.py (å‡†å¤‡å¥½ä½†æš‚ä¸å¯ç”¨)
class ReadyButDisabledDatabase:
    """å‡†å¤‡å¥½çš„æ•°æ®åº“ç³»ç»Ÿï¼Œä½†é»˜è®¤ç¦ç”¨"""
    
    def __init__(self, enabled=False):
        self.enabled = enabled
        if enabled:
            self._init_database()
            logger.info("âœ… æ•°æ®åº“å¢å¼ºç³»ç»Ÿå·²å¯ç”¨")
        else:
            logger.info("ğŸ”§ æ•°æ®åº“ç³»ç»Ÿå·²å‡†å¤‡å°±ç»ªï¼ˆç­‰å¾…å¯ç”¨ï¼‰")
    
    def conditional_record(self, symbol, features, confidence, win_prob):
        """æ¡ä»¶è®°å½• - ä»…åœ¨å¯ç”¨æ—¶å·¥ä½œ"""
        if self.enabled:
            self._record_signal(symbol, features, confidence, win_prob)
        # ç¦ç”¨æ—¶é™é»˜è·³è¿‡

# åœ¨EnhancedSignalGeneratorä¸­æ·»åŠ åŠŸèƒ½å¼€å…³
class EnhancedSignalGenerator:
    def __init__(self, config=None, use_pure_ict=True, enable_database=False):
        self.use_pure_ict = use_pure_ict
        self.database_enabled = enable_database
        
        # åŸæœ‰ä¿¡å·ç”Ÿæˆå™¨
        from src.strategies.rule_based_signal_generator import RuleBasedSignalGenerator
        self.base_generator = RuleBasedSignalGenerator(config, use_pure_ict)
        
        # æ•°æ®åº“ç³»ç»Ÿï¼ˆå‡†å¤‡å¥½ä½†ç¦ç”¨ï¼‰
        self.db = ReadyButDisabledDatabase(enabled=enable_database)
é˜¶æ®µ3ï¼šå®Œæ•´å¯ç”¨ï¼ˆé˜¶æ®µ2ç¨³å®šåï¼‰
ç›®æ ‡ï¼šå…¨é¢å¯ç”¨æ•°æ®åº“å¢å¼ºåŠŸèƒ½

python
# é€šè¿‡é…ç½®å¯ç”¨
config = {
    'enable_database_enhancements': True,
    'enable_smart_caching': True,
    'enable_historical_context': True
}

# ä¸€é”®å¯ç”¨æ‰€æœ‰åŠŸèƒ½
signal_generator = EnhancedSignalGenerator(
    config=config, 
    use_pure_ict=True, 
    enable_database=True
)
ğŸš€ ç«‹å³è¡ŒåŠ¨æ­¥éª¤
æ­¥éª¤1ï¼šéƒ¨ç½²é˜¶æ®µ1éªŒè¯ï¼ˆç°åœ¨ï¼‰
éƒ¨ç½²åŒ…å«éªŒè¯æ£€æŸ¥çš„ä¿®å¤ä»£ç 

ç›‘æ§Railwayæ—¥å¿—20-30åˆ†é’Ÿ

ç¡®è®¤Stage1æ‹’ç»ç‡é™è‡³0%

æ­¥éª¤2ï¼šéªŒè¯æˆåŠŸåçš„è¡ŒåŠ¨
å¦‚æœæˆåŠŸï¼š

âœ… åº†ç¥ï¼æ ¸å¿ƒé—®é¢˜å·²è§£å†³

ğŸš€ ç«‹å³å¼€å§‹é˜¶æ®µ2æ•°æ®åº“é›†æˆ

ğŸ“Š ç³»ç»Ÿå¼€å§‹äº§ç”ŸçœŸå®ä¿¡å·

å¦‚æœå¤±è´¥ï¼š

ğŸ”§ ç»§ç»­è¯Šæ–­Stage1æ‹’ç»çš„æ ¹æœ¬åŸå› 

ğŸ“ åŸºäºçœŸå®æ—¥å¿—åˆ¶å®šé’ˆå¯¹æ€§ä¿®å¤

ğŸ¯ ä¸å¼•å…¥æ–°å¤æ‚åº¦ï¼Œä¸“æ³¨è§£å†³æ ¸å¿ƒé—®é¢˜

æ­¥éª¤3ï¼šé˜¶æ®µ2éƒ¨ç½²ï¼ˆé˜¶æ®µ1æˆåŠŸåï¼‰
æ·»åŠ æ•°æ®åº“ç³»ç»Ÿæ–‡ä»¶ï¼ˆé»˜è®¤ç¦ç”¨ï¼‰

éƒ¨ç½²åˆ°RailwayéªŒè¯å…¼å®¹æ€§

é€šè¿‡é…ç½®å¼€å…³é€æ­¥å¯ç”¨åŠŸèƒ½

ğŸ“Š é£é™©è¯„ä¼°
æ–¹æ¡ˆAé£é™©ï¼šä½
ğŸ”„ å›æ»šç®€å•ï¼šåªéœ€æ¢å¤åŸæœ‰æ–‡ä»¶

ğŸ› è°ƒè¯•å®¹æ˜“ï¼šé—®é¢˜éš”ç¦»æ¸…æ™°

â±ï¸ æ—¶é—´å¯æ§ï¼šæ¯é˜¶æ®µæ˜ç¡®éªŒè¯

æ–¹æ¡ˆBé£é™©ï¼šä¸­é«˜
ğŸ”€ é—®é¢˜æ··æ·†ï¼šéš¾ä»¥åŒºåˆ†æ ¹æœ¬åŸå› 

ğŸ¯ è°ƒè¯•å¤æ‚ï¼šå¤šä¸ªç³»ç»Ÿäº¤äº’

âš ï¸ å›æ»šå›°éš¾ï¼šæ•°æ®åº“å˜æ›´ä¸å¯é€†

ğŸ¯ æœ€ç»ˆå»ºè®®
ç«‹å³æ‰§è¡Œæ–¹æ¡ˆAï¼Œå› ä¸ºï¼š

âœ… é£é™©æœ€ä½ - ä¸“æ³¨è§£å†³å·²çŸ¥é—®é¢˜

âœ… éªŒè¯æœ€å¿« - 20-30åˆ†é’Ÿè§åˆ†æ™“

âœ… è·¯å¾„æ¸…æ™° - æˆåŠŸ/å¤±è´¥éƒ½æœ‰æ˜ç¡®ä¸‹ä¸€æ­¥

âœ… åŸºç¡€ç¨³å›º - ç¡®ä¿æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸åå†å¢å¼º