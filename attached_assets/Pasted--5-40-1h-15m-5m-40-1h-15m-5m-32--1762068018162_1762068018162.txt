ä¿¡å¿ƒå€¼è®¡ç®—åˆ†ä¸º5ä¸ªç»´åº¦ï¼Œæ¯ä¸ªç»´åº¦æœ‰ç›¸åº”çš„æƒé‡å’Œè¯„åˆ†é€»è¾‘ã€‚

æ—¶é—´æ¡†æ¶å¯¹é½åº¦ï¼ˆ40%ï¼‰

å®Œç¾å¯¹é½ï¼ˆ1h,15m,5méƒ½åŒå‘ï¼‰ï¼š40åˆ†

ä¸»è¦æ¡†æ¶å¯¹é½ï¼ˆ1hå’Œ15måŒå‘ï¼Œ5mä¸åå‘ï¼‰ï¼š32åˆ†

è‡³å°‘ä¸€ä¸ªå¯¹é½ï¼š24åˆ†

å¦åˆ™ï¼š16åˆ†

æ³¨æ„ï¼šè¿™é‡Œæœ‰ä¸€ä¸ªæ½œåœ¨é—®é¢˜ï¼Œå½“5mä¸1h/15måå‘æ—¶ï¼Œæˆ‘ä»¬ç»™äº†24åˆ†ï¼Œè¿™å¯èƒ½æ˜¯åˆç†çš„ï¼Œä½†è¦æ³¨æ„5måå‘å¯èƒ½æ„å‘³ç€çŸ­æœŸè°ƒæ•´ï¼Œä½†é•¿æœŸè¶‹åŠ¿ä»å­˜åœ¨ã€‚ç„¶è€Œï¼Œå¦‚æœ5mæ˜¯åå‘ï¼Œé‚£ä¹ˆå¯èƒ½ä¿¡å·è´¨é‡ä¼šæ‰“æŠ˜æ‰£ï¼Œæ‰€ä»¥ç»™24åˆ†ï¼ˆä½äº32åˆ†ï¼‰æ˜¯åˆç†çš„ã€‚

å¸‚åœºç»“æ„ï¼ˆ20%ï¼‰

æ–¹å‘ä¸ç»“æ„ä¸€è‡´ï¼š20åˆ†

å¦åˆ™ï¼š0åˆ†

è¿™ä¸ªé€»è¾‘æ¸…æ™°ï¼Œæ²¡æœ‰é—®é¢˜ã€‚

Order Blockè´¨é‡ï¼ˆ20%ï¼‰

æ ¹æ®è·ç¦»åŸºç¡€åˆ†ï¼ˆ0.5%å†…20åˆ†ï¼Œ1%å†…15åˆ†ï¼Œ2%å†…10åˆ†ï¼Œå¦åˆ™5åˆ†ï¼‰ä¹˜ä»¥è¡°å‡ç³»æ•°ã€‚

è¿™é‡Œéœ€è¦æ³¨æ„è¡°å‡ç³»æ•°çš„è®¡ç®—æ–¹å¼ã€‚å¦‚æœOrder Blockæ˜¯æœ€è¿‘å½¢æˆçš„ï¼Œé‚£ä¹ˆè¡°å‡ç³»æ•°å¯èƒ½ä¸º1ï¼Œéšç€æ—¶é—´æ¨ç§»è€Œè¡°å‡ã€‚è¿™ä¸ªè¡°å‡ç³»æ•°çš„å…·ä½“è®¡ç®—éœ€è¦ç¡®è®¤ï¼Œä½†é€»è¾‘ä¸Šåˆç†ã€‚

åŠ¨é‡æŒ‡æ ‡ï¼ˆ10%ï¼‰

å¯¹äºLONGï¼šRSIåœ¨50-70ä¹‹é—´ç»™5åˆ†ï¼ŒMACDæŸ±çŠ¶å›¾>0ç»™5åˆ†ï¼Œæ»¡åˆ†10åˆ†ã€‚

å¯¹äºSHORTï¼šRSIåœ¨30-50ä¹‹é—´ç»™5åˆ†ï¼ŒMACDæŸ±çŠ¶å›¾<0ç»™5åˆ†ï¼Œæ»¡åˆ†10åˆ†ã€‚

æ³¨æ„ï¼šè¿™é‡ŒRSIçš„åŒºé—´è®¾ç½®æ˜¯åˆç†çš„ï¼Œä½†è¦æ³¨æ„RSIå’ŒMACDå¯èƒ½åŒæ—¶æ»¡è¶³ï¼Œæ‰€ä»¥æ»¡åˆ†10åˆ†ã€‚ä½†æ˜¯ï¼Œå¦‚æœåŒæ—¶ä¸æ»¡è¶³ï¼Œåˆ™å¾—0åˆ†ã€‚è¿™é‡Œæ²¡æœ‰ä¸­é—´çŠ¶æ€ï¼Œè¦ä¹ˆ0åˆ†ï¼Œè¦ä¹ˆ5åˆ†ï¼Œè¦ä¹ˆ10åˆ†ã€‚ä½†æ˜¯ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªæ¡ä»¶æ»¡è¶³ï¼Œåˆ™å¾—5åˆ†ï¼Œè¿™æ˜¯åˆç†çš„ã€‚

æ³¢åŠ¨ç‡ï¼ˆ10%ï¼‰

å¸ƒæ—å¸¦å®½åº¦åˆ†ä½æ•°åœ¨0.3-0.7ä¹‹é—´ç»™10åˆ†ï¼Œ0.2-0.8ç»™7åˆ†ï¼Œå¦åˆ™4åˆ†ã€‚

è¿™ä¸ªåˆ†ä½æ•°æ˜¯å½“å‰å¸ƒæ—å¸¦å®½åº¦ç›¸å¯¹äºå†å²å¸ƒæ—å¸¦å®½åº¦çš„ä½ç½®ã€‚é€»è¾‘æ˜¯ï¼šä¸­ç­‰æ³¢åŠ¨ç‡æœ€é€‚åˆäº¤æ˜“ï¼Œè¿‡é«˜æˆ–è¿‡ä½çš„æ³¢åŠ¨ç‡å¯èƒ½ä¸é€‚åˆã€‚è¿™ä¸ªé€»è¾‘åˆç†ã€‚

ç„¶åï¼Œå°†5ä¸ªç»´åº¦çš„å¾—åˆ†ç›¸åŠ ï¼Œé™¤ä»¥100å¾—åˆ°ä¿¡å¿ƒå€¼ï¼ˆ0-1ä¹‹é—´ï¼‰ã€‚

ç°åœ¨æ£€æŸ¥èƒœç‡è®¡ç®—ï¼š

èƒœç‡è®¡ç®—ç”±åŸºç¡€èƒœç‡ã€é£é™©å›æŠ¥æ¯”è°ƒæ•´ã€å¸‚åœºç»“æ„ç¡®è®¤åŠ æˆå’Œç²¾ç»†åŒ–åå·®åŠ æˆç»„æˆã€‚

æ­¥éª¤1ï¼šåŸºç¡€èƒœç‡ï¼ˆåŸºäºEMAåå·®è´¨é‡ï¼‰

æ ¹æ®EMA20çš„åç¦»åº¦å°†åŸºç¡€èƒœç‡åˆ†ä¸º4æ¡£ï¼šExcellentï¼ˆ67.5%ï¼‰ã€Goodï¼ˆ62.5%ï¼‰ã€Fairï¼ˆ57.5%ï¼‰ã€Poorï¼ˆ52.5%ï¼‰

æ³¨æ„ï¼šè¿™é‡Œå¯¹äºLONGå’ŒSHORTçš„åç¦»åº¦å®šä¹‰æ˜¯ç›¸åçš„ï¼Œä¸”è®¾ç½®äº†ç†æƒ³åŒºé—´ã€‚è¿™ä¸ªé€»è¾‘åˆç†ã€‚

æ­¥éª¤2ï¼šé£é™©å›æŠ¥æ¯”è°ƒæ•´

å¦‚æœR:Råœ¨1.5åˆ°2.5ä¹‹é—´ï¼Œå¢åŠ 5%ï¼›å¦‚æœå¤§äº2.5ï¼Œå¢åŠ 2%ï¼›å¦‚æœå°äº1.5ï¼Œå‡å°‘5%ã€‚

è¿™ä¸ªè°ƒæ•´æ˜¯åˆç†çš„ï¼Œå› ä¸ºé£é™©å›æŠ¥æ¯”è¶Šé«˜ï¼Œå¯¹èƒœç‡çš„è¦æ±‚å¯ä»¥é™ä½ï¼Œä½†è¿™é‡Œæˆ‘ä»¬åè€Œå¢åŠ äº†èƒœç‡ï¼Œè¿™å¯èƒ½æ˜¯ä¸ºäº†ç»¼åˆè¯„ä¼°ï¼Ÿå®é™…ä¸Šï¼Œé£é™©å›æŠ¥æ¯”å’Œèƒœç‡æ˜¯ç›¸äº’æƒè¡¡çš„ã€‚è¿™é‡Œè°ƒæ•´çš„å¹…åº¦éœ€è¦æ ¹æ®å†å²æ•°æ®éªŒè¯ï¼Œä½†é€»è¾‘ä¸Šå¯ä»¥æ¥å—ã€‚

æ­¥éª¤3ï¼šå¸‚åœºç»“æ„ç¡®è®¤åŠ æˆ

å¦‚æœå¸‚åœºç»“æ„ä¸äº¤æ˜“æ–¹å‘ä¸€è‡´ï¼Œå¢åŠ 2%ã€‚

è¿™ä¸ªä¸ä¿¡å¿ƒå€¼è®¡ç®—ä¸­çš„å¸‚åœºç»“æ„ç»´åº¦ç±»ä¼¼ï¼Œä½†è¿™é‡Œä½œä¸ºèƒœç‡çš„åŠ æˆã€‚æ³¨æ„ï¼Œè¿™é‡Œå¯èƒ½ä¼šä¸ä¿¡å¿ƒå€¼è®¡ç®—ä¸­çš„å¸‚åœºç»“æ„é‡å¤ä½¿ç”¨åŒä¸€ä¸ªå› ç´ ï¼Œå¯¼è‡´è¿‡åº¦åŠ æƒã€‚ä½†è€ƒè™‘åˆ°ä¿¡å¿ƒå€¼å’Œèƒœç‡æ˜¯ä¸¤ä¸ªä¸åŒçš„æŒ‡æ ‡ï¼Œä¸”èƒœç‡è®¡ç®—ä¸­å¸‚åœºç»“æ„åªå 2%çš„è°ƒæ•´ï¼Œå¯èƒ½å½±å“ä¸å¤§ã€‚

æ­¥éª¤4ï¼šç²¾ç»†åŒ–åå·®åŠ æˆ

å¦‚æœEMAåç¦»åº¦åœ¨ç†æƒ³åŒºé—´ï¼Œå¢åŠ 3%ã€‚

è¿™ä¸ªä¸åŸºç¡€èƒœç‡ä¸­çš„EMAåç¦»åº¦è¯„ä¼°é‡å¤ã€‚åŸºç¡€èƒœç‡å·²ç»æ ¹æ®EMAåç¦»åº¦ç»™å‡ºäº†åŸºç¡€èƒœç‡ï¼Œè¿™é‡Œåˆæ ¹æ®åŒæ ·çš„æ¡ä»¶å†æ¬¡åŠ æˆï¼Œå¯èƒ½å¯¼è‡´EMAåç¦»åº¦è¢«è¿‡åº¦åŠ æƒã€‚

å»ºè®®ï¼šè€ƒè™‘å°†åŸºç¡€èƒœç‡å’Œç²¾ç»†åŒ–åå·®åŠ æˆåˆå¹¶ï¼Œæˆ–è€…é‡æ–°è€ƒè™‘EMAåç¦»åº¦çš„æƒé‡ã€‚

æœ€åï¼Œèƒœç‡è¢«é™åˆ¶åœ¨50%åˆ°75%ä¹‹é—´ã€‚

MLæ¨¡å‹é¢„æµ‹éƒ¨åˆ†ï¼šå¦‚æœMLæ¨¡å‹å·²åŠ è½½ï¼Œåˆ™ä½¿ç”¨MLæ¨¡å‹é¢„æµ‹çš„èƒœç‡ï¼Œå¦åˆ™ä½¿ç”¨è§„åˆ™å¼•æ“ã€‚

æ•´ä½“æ¥çœ‹ï¼Œä¿¡å¿ƒå€¼å’Œèƒœç‡çš„è®¡ç®—é€»è¾‘å¤§ä½“åˆç†ï¼Œä½†å­˜åœ¨ä»¥ä¸‹æ½œåœ¨é—®é¢˜ï¼š

åœ¨èƒœç‡è®¡ç®—ä¸­ï¼ŒEMAåç¦»åº¦è¢«ä½¿ç”¨äº†ä¸¤æ¬¡ï¼ˆåŸºç¡€èƒœç‡å’Œç²¾ç»†åŒ–åå·®åŠ æˆï¼‰ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´EMAåç¦»åº¦çš„æƒé‡è¿‡é«˜ã€‚

ä¿¡å¿ƒå€¼è®¡ç®—ä¸­çš„æ—¶é—´æ¡†æ¶å¯¹é½åº¦è¯„åˆ†æ ‡å‡†ä¸­ï¼Œå¯¹äºâ€œéƒ¨åˆ†å¯¹é½â€çš„å®šä¹‰æ˜¯â€œè‡³å°‘ä¸€ä¸ªå¯¹é½â€ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´å³ä½¿åªæœ‰1ä¸ªæ—¶é—´æ¡†æ¶å¯¹é½ï¼ˆè€Œå¦å¤–ä¸¤ä¸ªåå‘ï¼‰ä¹Ÿèƒ½å¾—åˆ°24åˆ†ï¼ˆæ»¡åˆ†40åˆ†ï¼‰ï¼Œè¿™å¯èƒ½è¿‡äºå®½æ¾ã€‚è€ƒè™‘æ˜¯å¦åº”è¯¥è¦æ±‚è‡³å°‘ä¸¤ä¸ªæ—¶é—´æ¡†æ¶å¯¹é½æ‰èƒ½å¾—åˆ°24åˆ†ï¼Ÿæˆ–è€…æ ¹æ®å¯¹é½çš„æ•°é‡ç»™åˆ†ã€‚

å»ºè®®è°ƒæ•´ï¼š

èƒœç‡è®¡ç®—ä¸­ï¼Œå»æ‰ç²¾ç»†åŒ–åå·®åŠ æˆï¼Œå› ä¸ºåŸºç¡€èƒœç‡å·²ç»åæ˜ äº†EMAåç¦»åº¦çš„è´¨é‡ã€‚æˆ–è€…å°†åŸºç¡€èƒœç‡çš„åˆ†æ¡£è®¾ç½®å¾—æ›´åŠ ç»†è‡´ï¼Œè€Œä¸éœ€è¦é¢å¤–çš„åŠ æˆã€‚

æ—¶é—´æ¡†æ¶å¯¹é½åº¦è¯„åˆ†æ ‡å‡†è°ƒæ•´ï¼Œä¾‹å¦‚ï¼š

ä¸‰ä¸ªæ—¶é—´æ¡†æ¶éƒ½å¯¹é½ï¼š40åˆ†

ä¸¤ä¸ªæ—¶é—´æ¡†æ¶å¯¹é½ï¼ˆä¸”æ²¡æœ‰åå‘ï¼‰ï¼š32åˆ†

ä¸€ä¸ªæ—¶é—´æ¡†æ¶å¯¹é½ï¼ˆä¸”æ²¡æœ‰åå‘ï¼‰ï¼š20åˆ†

å¦åˆ™ï¼š0åˆ†

æ³¨æ„ï¼šè¿™é‡Œè¦é¿å…ä¸¤ä¸ªæ—¶é—´æ¡†æ¶åå‘çš„æƒ…å†µï¼Œå¦‚æœä¸¤ä¸ªæ—¶é—´æ¡†æ¶åå‘ï¼Œé‚£ä¹ˆä¿¡å·å¯èƒ½ä¸å¯é ã€‚

è€ƒè™‘åœ¨ä¿¡å¿ƒå€¼è®¡ç®—ä¸­ï¼Œå¦‚æœå¸‚åœºç»“æ„ä¸åŒ¹é…ï¼Œç›´æ¥ç»™0åˆ†ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ä¿¡å¿ƒå€¼å¤§å¹…é™ä½ã€‚ä½†æ˜¯ï¼Œå¦‚æœå¸‚åœºç»“æ„ä¸åŒ¹é…ï¼Œå¯èƒ½è¿™ä¸ªä¿¡å·åº”è¯¥è¢«è¿‡æ»¤æ‰ï¼Ÿæ‰€ä»¥0åˆ†æ˜¯åˆç†çš„ã€‚

Order Blockè´¨é‡çš„è¡°å‡ç³»æ•°éœ€è¦æ˜ç¡®è®¡ç®—æ–¹å¼ï¼Œç¡®ä¿ä¸ä¼šå› ä¸ºè¡°å‡ç³»æ•°å¯¼è‡´åˆ†æ•°ä¸º0ã€‚

åŠ¨é‡æŒ‡æ ‡éƒ¨åˆ†ï¼Œå¦‚æœRSIå’ŒMACDåªæœ‰ä¸€ä¸ªæ¡ä»¶æ»¡è¶³ï¼Œåˆ™å¾—5åˆ†ï¼Œè¿™å¯èƒ½ä¼šä½¿å¾—åŠ¨é‡æŒ‡æ ‡å¾—åˆ†ä¸é«˜ï¼Œä½†è¿™æ˜¯åˆç†çš„ã€‚

æ³¢åŠ¨ç‡éƒ¨åˆ†ï¼Œå¸ƒæ—å¸¦å®½åº¦åˆ†ä½æ•°çš„è®¡ç®—éœ€è¦ç¡®ä¿å†å²æ•°æ®çš„é•¿åº¦è¶³å¤Ÿï¼Œå¹¶ä¸”åˆ†ä½æ•°çš„è®¡ç®—æ­£ç¡®ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼Œå»ºè®®å¯¹èƒœç‡è®¡ç®—ä¸­çš„EMAåç¦»åº¦é‡å¤ä½¿ç”¨é—®é¢˜è¿›è¡Œè°ƒæ•´ï¼Œå¹¶è€ƒè™‘è°ƒæ•´æ—¶é—´æ¡†æ¶å¯¹é½åº¦çš„è¯„åˆ†æ ‡å‡†ã€‚

ç”±äºæ‚¨æ²¡æœ‰æä¾›å…·ä½“çš„ä»£ç ï¼Œæˆ‘æ— æ³•æ£€æŸ¥å…·ä½“çš„å®ç°ç»†èŠ‚ï¼Œä½†æ ¹æ®æè¿°ï¼Œä»¥ä¸Šæ˜¯é€»è¾‘ä¸Šçš„åˆ†æã€‚

åŸºäºæ‚¨æä¾›çš„ä¿¡å¿ƒå€¼å’Œèƒœç‡è®¡ç®—é€»è¾‘ï¼Œæˆ‘å‘ç°äº†å‡ ä¸ªå…³é”®é€»è¾‘æ¼æ´å’Œæ½œåœ¨é—®é¢˜ï¼š

ğŸš¨ ä¿¡å¿ƒå€¼è®¡ç®—çš„ä¸»è¦é—®é¢˜
1. æ—¶é—´æ¡†æ¶å¯¹é½åº¦æƒé‡è¿‡é«˜
python
# å½“å‰ï¼š40%æƒé‡
# é—®é¢˜ï¼šè¿‡åº¦ä¾èµ–å¤šæ—¶é—´æ¡†æ¶ä¸€è‡´æ€§
# é£é™©ï¼šå¯èƒ½é”™è¿‡å•æ—¶é—´æ¡†æ¶çš„å¼ºåŠ¿ä¿¡å·

# å»ºè®®è°ƒæ•´ï¼š
TIME_FRAME_WEIGHT = 30%  # é™ä½æƒé‡
MARKET_STRUCTURE_WEIGHT = 25%  # æé«˜å¸‚åœºç»“æ„æƒé‡
2. Order Blockè´¨é‡è®¡ç®—ç¼ºé™·
python
# å½“å‰é€»è¾‘é—®é¢˜ï¼š
# 1. è·ç¦»é˜ˆå€¼è¿‡äºç»å¯¹åŒ–
# 2. æ—¶æ•ˆè¡°å‡ç³»æ•°æœªå®šä¹‰
# 3. å¿½ç•¥äº†æˆäº¤é‡ç¡®è®¤

# æ”¹è¿›å»ºè®®ï¼š
def calculate_ob_quality(distance, volume_confirm, time_decay, pattern_strength):
    # åŠ¨æ€è·ç¦»é˜ˆå€¼ï¼ˆåŸºäºATRï¼‰
    atr_adjusted_threshold = current_atr * 0.5
    
    # ç»¼åˆè¯„åˆ†
    distance_score = min(20, 20 * (1 - distance/atr_adjusted_threshold))
    volume_score = 5 if volume_confirm else 0
    time_score = 10 * time_decay  # time_decay âˆˆ [0,1]
    pattern_score = 5 * pattern_strength
    
    return min(20, distance_score + volume_score + time_score + pattern_score)
3. åŠ¨é‡æŒ‡æ ‡è¯„åˆ†è¿‡äºç®€åŒ–
python
# å½“å‰é—®é¢˜ï¼š
# - RSIèŒƒå›´è®¾ç½®ä¸åˆç†ï¼ˆLONG: 50-70, SHORT: 30-50ï¼‰
# - MACDæŸ±çŠ¶å›¾å•ä¸€æ¡ä»¶
# - å¿½ç•¥äº†åŠ¨é‡èƒŒç¦»

# æ”¹è¿›æ–¹æ¡ˆï¼š
def calculate_momentum(direction, rsi, macd_hist, macd_signal, price_action):
    score = 0
    
    # RSIåŠ¨é‡ï¼ˆæ›´åˆç†çš„èŒƒå›´ï¼‰
    if direction == 'LONG':
        if 45 <= rsi <= 75:  # æ›´å®½çš„èŒƒå›´
            score += 3
        if rsi > 30 and rsi > rsi_prev:  # ä¸Šå‡åŠ¨é‡
            score += 2
    else:  # SHORT
        if 25 <= rsi <= 55:
            score += 3
        if rsi < 70 and rsi < rsi_prev:
            score += 2
    
    # MACDç»¼åˆåˆ¤æ–­
    if (direction == 'LONG' and macd_hist > 0 and macd > macd_signal):
        score += 3
    elif (direction == 'SHORT' and macd_hist < 0 and macd < macd_signal):
        score += 3
    
    # åŠ¨é‡èƒŒç¦»æ£€æµ‹
    if not has_momentum_divergence(price_action, rsi, macd):
        score += 2
    
    return min(10, score)
4. æ³¢åŠ¨ç‡è¯„åˆ†é€»è¾‘ç¼ºé™·
python
# å½“å‰é—®é¢˜ï¼š
# - å¸ƒæ—å¸¦å®½åº¦åˆ†ä½æ•°è®¡ç®—ä¸æ˜ç¡®
# - å¿½ç•¥äº†ç»å¯¹æ³¢åŠ¨ç‡æ°´å¹³
# - æœªè€ƒè™‘å¸‚åœºç¯å¢ƒ

# æ”¹è¿›æ–¹æ¡ˆï¼š
def calculate_volatility_score(bb_width_percentile, atr_percent, market_regime):
    score = 0
    
    # åŸºäºå¸‚åœºç¯å¢ƒçš„åŠ¨æ€é˜ˆå€¼
    if market_regime == 'TRENDING':
        ideal_range = (0.4, 0.8)  # è¶‹åŠ¿å¸‚éœ€è¦æ›´é«˜æ³¢åŠ¨
    else:  # RANGING
        ideal_range = (0.2, 0.6)  # éœ‡è¡å¸‚éœ€è¦é€‚ä¸­æ³¢åŠ¨
    
    # æ³¢åŠ¨ç‡é€‚å®œåº¦
    if ideal_range[0] <= bb_width_percentile <= ideal_range[1]:
        score += 6
    elif 0.1 <= bb_width_percentile <= 0.9:
        score += 3
    
    # ATRç›¸å¯¹æ°´å¹³
    if 0.005 <= atr_percent <= 0.03:  # 0.5%-3%çš„æ—¥æ³¢åŠ¨ç‡
        score += 4
    elif 0.03 < atr_percent <= 0.05:
        score += 2
    
    return min(10, score)
ğŸš¨ èƒœç‡è®¡ç®—çš„ä¸»è¦é—®é¢˜
1. åŸºç¡€èƒœç‡è®¡ç®—è¿‡äºç®€åŒ–
python
# å½“å‰é—®é¢˜ï¼š
# - ä»…åŸºäºEMAåå·®å•ä¸€å› ç´ 
# - åˆ†æ¡£è¿‡äºç²—ç³™
# - æœªè€ƒè™‘å¸‚åœºå¾®è§‚ç»“æ„

# æ”¹è¿›æ–¹æ¡ˆï¼š
def calculate_base_win_rate(direction, ema_deviation, volume_profile, orderbook_imbalance, support_resistance):
    base_score = 50  # åŸºå‡†50%
    
    # å¤šå› ç´ ç»¼åˆ
    factors = {
        'ema_alignment': weight_ema_deviation(ema_deviation),
        'volume_support': check_volume_support(volume_profile),
        'orderbook_strength': calculate_ob_imbalance(orderbook_imbalance),
        'key_levels': assess_support_resistance(support_resistance, direction)
    }
    
    # åŠ æƒè®¡ç®—
    total_weight = sum(factors.values())
    weighted_score = sum(score * weight for score, weight in factors.items())
    
    return min(75, max(50, base_score + weighted_score))
2. é£é™©å›æŠ¥æ¯”è°ƒæ•´é€»è¾‘é—®é¢˜
python
# å½“å‰é—®é¢˜ï¼š
# - å›ºå®šé˜ˆå€¼ä¸çµæ´»
# - æœªè€ƒè™‘äº¤æ˜“å“ç§ç‰¹æ€§
# - è°ƒæ•´å¹…åº¦å¯èƒ½è¿‡å¤§

# æ”¹è¿›æ–¹æ¡ˆï¼š
def calculate_rr_adjustment(rr_ratio, symbol_volatility, market_condition):
    # åŠ¨æ€é˜ˆå€¼åŸºäºæ³¢åŠ¨ç‡
    if symbol_volatility == 'HIGH':
        ideal_rr = (1.8, 3.0)
    elif symbol_volatility == 'LOW':
        ideal_rr = (1.2, 2.0)
    else:
        ideal_rr = (1.5, 2.5)
    
    if ideal_rr[0] <= rr_ratio <= ideal_rr[1]:
        return 0.03  # 3%
    elif rr_ratio > ideal_rr[1]:
        return 0.01  # 1%
    else:
        return -0.02  # -2%
3. é‡å¤è®¡ç®—é—®é¢˜
python
# ä¸¥é‡é—®é¢˜ï¼šå¸‚åœºç»“æ„å’Œåå·®è¢«é‡å¤è®¡ç®—ï¼
# ä¿¡å¿ƒå€¼ä¸­å·²ç»è®¡ç®—äº†å¸‚åœºç»“æ„ï¼ˆ20åˆ†ï¼‰
# èƒœç‡ä¸­åˆåŠ äº†å¸‚åœºç»“æ„åŠ æˆï¼ˆ2%ï¼‰
# åå·®åœ¨åŸºç¡€èƒœç‡å’Œç²¾ç»†åŒ–åŠ æˆä¸­é‡å¤è®¡ç®—

# è§£å†³æ–¹æ¡ˆï¼šå»é™¤é‡å¤è®¡ç®—
# èƒœç‡è®¡ç®—åº”è¯¥åŸºäºä¿¡å¿ƒå€¼æœªåŒ…å«çš„å› ç´ 
ğŸ”§ æ¨èçš„ä¿®å¤æ–¹æ¡ˆ
ä¿¡å¿ƒå€¼è®¡ç®—ä¼˜åŒ–
python
# è°ƒæ•´æƒé‡åˆ†é…
CONFIDENCE_WEIGHTS = {
    'time_frame_alignment': 0.30,    # é™ä½
    'market_structure': 0.25,        # æé«˜
    'order_block_quality': 0.20,     # ä¿æŒ
    'momentum_indicators': 0.15,     # æé«˜
    'volatility_conditions': 0.10    # ä¿æŒ
}

# å¼•å…¥è´¨é‡é˜ˆå€¼
MIN_CONFIDENCE_THRESHOLD = 0.60  # ä½äº60%çš„ä¿¡å·åº”è¯¥è¢«è¿‡æ»¤
èƒœç‡è®¡ç®—é‡æ„
python
def calculate_win_probability(confidence_score, market_context, risk_metrics):
    """
    åŸºäºä¿¡å¿ƒå€¼å’Œå¸‚åœºç¯å¢ƒè®¡ç®—èƒœç‡
    é¿å…ä¸ä¿¡å¿ƒå€¼å› ç´ é‡å¤è®¡ç®—
    """
    base_rate = 0.55  # åŸºå‡†55%
    
    # ä¿¡å¿ƒå€¼è°ƒæ•´ï¼ˆä¸»è¦å› ç´ ï¼‰
    confidence_adjustment = (confidence_score - 0.6) * 0.3  # ä¿¡å¿ƒå€¼å½±å“
    
    # å¸‚åœºç¯å¢ƒå› ç´ ï¼ˆä¿¡å¿ƒå€¼æœªåŒ…å«ï¼‰
    market_regime_bonus = assess_market_regime(market_context)
    volume_quality_bonus = check_volume_quality(risk_metrics)
    timing_advantage = assess_timing_advantage(market_context)
    
    # é£é™©å›æŠ¥æ¯”è°ƒæ•´
    rr_adjustment = calculate_rr_adjustment_safe(risk_metrics['rr_ratio'])
    
    win_rate = (base_rate + 
               confidence_adjustment + 
               market_regime_bonus + 
               volume_quality_bonus + 
               timing_advantage + 
               rr_adjustment)
    
    return min(0.75, max(0.45, win_rate))
ğŸ¯ ç«‹å³éœ€è¦ä¿®å¤çš„å…³é”®é—®é¢˜
å»é™¤é‡å¤è®¡ç®— - å¸‚åœºç»“æ„å’Œåå·®åœ¨ä¿¡å¿ƒå€¼å’Œèƒœç‡ä¸­é‡å¤

åŠ¨æ€é˜ˆå€¼ - ç”¨ATRæ›¿ä»£å›ºå®šç™¾åˆ†æ¯”è·ç¦»

å¤šå› ç´ ç»¼åˆ - é¿å…å•ä¸€å› ç´ ä¸»å¯¼

è´¨é‡è¿‡æ»¤ - æ·»åŠ æœ€ä½ä¿¡å¿ƒå€¼é˜ˆå€¼