æˆ‘å€‘è¦æ¸…é™¤æœªä½¿ç”¨çš„æª”æ¡ˆï¼Œä½†ç”±æ–¼æˆ‘å€‘åœ¨Replitç’°å¢ƒä¸­ï¼Œæˆ‘å€‘éœ€è¦å°å¿ƒä¸è¦åˆªé™¤å¿…è¦çš„æª”æ¡ˆã€‚é¦–å…ˆï¼Œæˆ‘å€‘å¯ä»¥é€šéä»¥ä¸‹æ­¥é©Ÿä¾†è­˜åˆ¥æœªä½¿ç”¨çš„æª”æ¡ˆï¼š

æª¢æŸ¥å°ˆæ¡ˆä¸­å“ªäº›æª”æ¡ˆæ²’æœ‰è¢«ä¸»ç¨‹å¼ï¼ˆmain.pyï¼‰æˆ–ä»»ä½•å…¶ä»–æ ¸å¿ƒæª”æ¡ˆå°å…¥ã€‚

æ³¨æ„ï¼šæœ‰äº›æª”æ¡ˆå¯èƒ½æ˜¯é…ç½®æª”æ¡ˆã€è³‡æ–™æª”æ¡ˆæˆ–æ¨¡å‹æª”æ¡ˆï¼Œå³ä½¿æ²’æœ‰è¢«ä»£ç¢¼ç›´æ¥å°å…¥ï¼Œä¹Ÿå¯èƒ½æ˜¯å¿…è¦çš„ã€‚

ä½†æ˜¯ï¼Œç”±æ–¼æˆ‘å€‘ç„¡æ³•ç›´æ¥é‹è¡Œéœæ…‹åˆ†æå·¥å…·ï¼ˆå¦‚vultureæˆ–pylintï¼‰ä¾†æª¢æŸ¥æ•´å€‹å°ˆæ¡ˆï¼Œæˆ‘å€‘å¯ä»¥æ‰‹å‹•æª¢æŸ¥ã€‚

æ ¹æ“šæä¾›çš„ç³»çµ±æ¶æ§‹ï¼Œæˆ‘å€‘å¯ä»¥åˆ—å‡ºæ‰€æœ‰æ‡‰è©²å­˜åœ¨çš„æª”æ¡ˆï¼Œç„¶å¾Œæ¯”å°ç•¶å‰å°ˆæ¡ˆä¸­çš„æª”æ¡ˆï¼Œåˆªé™¤é‚£äº›ä¸åœ¨æ¶æ§‹ä¸­çš„æª”æ¡ˆã€‚

ä½†æ˜¯ï¼Œè«‹æ³¨æ„ï¼šæˆ‘å€‘ä¸èƒ½åˆªé™¤ä»¥ä¸‹é¡å‹çš„æª”æ¡ˆï¼š

é…ç½®æª”æ¡ˆï¼ˆå¦‚config.pyï¼‰

è³‡æ–™æª”æ¡ˆï¼ˆä½æ–¼data/å’Œmodels/ç›®éŒ„ä¸‹çš„æª”æ¡ˆï¼‰

æ—¥èªŒæª”æ¡ˆï¼ˆå¦‚æœæœ‰çš„è©±ï¼‰

å¦å¤–ï¼Œç”±æ–¼æˆ‘å€‘ä¸ç¢ºå®šå“ªäº›æª”æ¡ˆæœªä½¿ç”¨ï¼Œæˆ‘å€‘å¯ä»¥è€ƒæ…®å…ˆå‚™ä»½æ•´å€‹å°ˆæ¡ˆï¼Œç„¶å¾Œåˆªé™¤æ˜é¡¯æœªä½¿ç”¨çš„æª”æ¡ˆã€‚

ç”±æ–¼æˆ‘å€‘åœ¨Replitä¸­ï¼Œæˆ‘å€‘å¯ä»¥é€šéä»¥ä¸‹æ­¥é©Ÿï¼š

é¦–å…ˆï¼Œç¢ºä¿æˆ‘å€‘æœ‰å‚™ä»½ï¼ˆå¯ä»¥æäº¤åˆ°GitHubæˆ–ä¸‹è¼‰ï¼‰ã€‚

ç„¶å¾Œï¼Œæ ¹æ“šæ¶æ§‹æ–‡æª”ä¸­çš„ç›®éŒ„çµæ§‹ï¼Œåˆªé™¤ä¸åœ¨æ¶æ§‹ä¸­çš„æª”æ¡ˆã€‚

ä½†æ˜¯ï¼Œç”±æ–¼æˆ‘å€‘ç„¡æ³•å¾—çŸ¥å¯¦éš›æª”æ¡ˆçµæ§‹ï¼Œæˆ‘å€‘å¯ä»¥æ ¹æ“šæä¾›çš„æ¶æ§‹æ–‡æª”ä¸­çš„ç›®éŒ„çµæ§‹ä¾†æª¢æŸ¥ã€‚

æ ¹æ“šæ¶æ§‹æ–‡æª”ï¼Œæˆ‘å€‘æ‡‰è©²æœ‰ä»¥ä¸‹ç›®éŒ„å’Œæª”æ¡ˆï¼š

text
src/
â”œâ”€â”€ clients/
â”‚   â”œâ”€â”€ binance_client.py
â”‚   â””â”€â”€ binance_errors.py
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ websocket/
â”‚   â”‚   â”œâ”€â”€ websocket_manager.py
â”‚   â”‚   â”œâ”€â”€ kline_feed.py
â”‚   â”‚   â”œâ”€â”€ price_feed.py
â”‚   â”‚   â””â”€â”€ shard_feed.py
â”‚   â”œâ”€â”€ unified_scheduler.py
â”‚   â”œâ”€â”€ leverage_engine.py
â”‚   â”œâ”€â”€ position_sizer.py
â”‚   â”œâ”€â”€ sltp_adjuster.py
â”‚   â”œâ”€â”€ position_controller.py
â”‚   â”œâ”€â”€ model_evaluator.py
â”‚   â””â”€â”€ model_initializer.py
â”œâ”€â”€ strategies/
â”‚   â”œâ”€â”€ self_learning_trader.py
â”‚   â””â”€â”€ rule_based_signal_generator.py
â”œâ”€â”€ ml/
â”‚   â”œâ”€â”€ model_wrapper.py
â”‚   â””â”€â”€ feature_engine.py
â”œâ”€â”€ managers/
â”‚   â”œâ”€â”€ trade_recorder.py
â”‚   â””â”€â”€ virtual_position_manager.py
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ data_service.py
â”‚   â””â”€â”€ position_monitor.py
â”œâ”€â”€ monitoring/
â”‚   â”œâ”€â”€ health_monitor.py
â”‚   â””â”€â”€ performance_monitor.py
â”œâ”€â”€ config.py
â””â”€â”€ main.py
å¦‚æœæ‚¨çš„å°ˆæ¡ˆä¸­æœ‰ä¸åœ¨ä¸Šè¿°åˆ—è¡¨ä¸­çš„æª”æ¡ˆï¼Œé‚£éº¼å®ƒå€‘å¯èƒ½æ˜¯æœªä½¿ç”¨çš„ã€‚ä½†æ˜¯ï¼Œè«‹æ³¨æ„ï¼š

æœ‰äº›æª”æ¡ˆå¯èƒ½æ˜¯æ¸¬è©¦æª”æ¡ˆï¼Œä¾‹å¦‚test_é–‹é ­çš„æª”æ¡ˆï¼Œæˆ–è€…ä½æ–¼tests/ç›®éŒ„ä¸‹ï¼Œé€™äº›å¯èƒ½ä¸éœ€è¦åˆªé™¤ï¼Œé™¤éæ‚¨ç¢ºå®šä¸éœ€è¦æ¸¬è©¦ã€‚

æœ‰äº›æª”æ¡ˆå¯èƒ½æ˜¯èˆŠç‰ˆæœ¬çš„å‚™ä»½ï¼Œä¾‹å¦‚ä»¥.bakæˆ–.oldçµå°¾çš„æª”æ¡ˆã€‚

å› æ­¤ï¼Œæˆ‘å€‘å¯ä»¥ç·¨å¯«ä¸€å€‹è…³æœ¬ä¾†åˆ—å‡ºæ‰€æœ‰æª”æ¡ˆï¼Œç„¶å¾Œæ‰‹å‹•æª¢æŸ¥ä¸¦åˆªé™¤ã€‚

ä½†æ˜¯ï¼Œç”±æ–¼æˆ‘å€‘åœ¨Replitä¸­ï¼Œæˆ‘å€‘å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä¾†æŸ¥çœ‹å°ˆæ¡ˆä¸­çš„æª”æ¡ˆï¼š

text
find . -type f -name "*.py" | grep -v "__pycache__" | grep -v ".git"
ç„¶å¾Œï¼Œæˆ‘å€‘å¯ä»¥æ¯”å°ä¸Šè¿°æ¶æ§‹ä¸­çš„æª”æ¡ˆï¼Œåˆªé™¤ä¸åœ¨æ¶æ§‹ä¸­çš„Pythonæª”æ¡ˆã€‚

ä½†æ˜¯ï¼Œè«‹æ³¨æ„ï¼šæˆ‘å€‘å¯èƒ½é‚„æœ‰å…¶ä»–é¡å‹çš„æª”æ¡ˆï¼Œå¦‚JSONã€JSONLã€MDç­‰ï¼Œé€™äº›å¯èƒ½æ˜¯è³‡æ–™æˆ–å ±å‘Šï¼Œæˆ‘å€‘éœ€è¦å°å¿ƒä¸è¦åˆªé™¤é‡è¦çš„è³‡æ–™ã€‚

ç”±æ–¼æˆ‘å€‘ä¸ç¢ºå®šå“ªäº›æª”æ¡ˆæœªä½¿ç”¨ï¼Œæˆ‘å»ºè­°å…ˆå°‡æœªä½¿ç”¨çš„æª”æ¡ˆç§»å‹•åˆ°ä¸€å€‹å‚™ä»½ç›®éŒ„ï¼Œç„¶å¾Œé‹è¡Œç³»çµ±ï¼Œå¦‚æœç³»çµ±æ­£å¸¸ï¼Œå†åˆªé™¤å‚™ä»½ç›®éŒ„ã€‚

æ­¥é©Ÿï¼š

å‰µå»ºä¸€å€‹å‚™ä»½ç›®éŒ„ï¼Œä¾‹å¦‚backup_old_filesã€‚

å°‡æ‰€æœ‰ä¸åœ¨æ¶æ§‹æ–‡æª”ä¸­çš„Pythonæª”æ¡ˆç§»å‹•åˆ°å‚™ä»½ç›®éŒ„ã€‚

åŒæ™‚ï¼Œæª¢æŸ¥æ˜¯å¦æœ‰å…¶ä»–æœªä½¿ç”¨çš„éPythonæª”æ¡ˆï¼ˆå¦‚èˆŠçš„æ—¥èªŒã€èˆŠçš„è³‡æ–™æª”æ¡ˆç­‰ï¼‰ï¼Œå¦‚æœç¢ºå®šæœªä½¿ç”¨ï¼Œä¹Ÿç§»å‹•åˆ°å‚™ä»½ç›®éŒ„ã€‚

é‹è¡Œç³»çµ±ï¼Œæ¸¬è©¦åŠŸèƒ½æ˜¯å¦æ­£å¸¸ã€‚

å¦‚æœæ­£å¸¸ï¼Œåˆªé™¤å‚™ä»½ç›®éŒ„ã€‚

ä½†æ˜¯ï¼Œè«‹æ³¨æ„ï¼šæ¶æ§‹æ–‡æª”ä¸­æåˆ°çš„æª”æ¡ˆå¿…é ˆå­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå‰‡å¯èƒ½æ˜¯å°šæœªå¯¦ç¾çš„æ¨¡çµ„ï¼Œæˆ‘å€‘ä¸èƒ½åˆªé™¤å®ƒå€‘ã€‚

ç”±æ–¼æˆ‘å€‘ç„¡æ³•ç›´æ¥çœ‹åˆ°æ‚¨çš„å°ˆæ¡ˆçµæ§‹ï¼Œæˆ‘å°‡æä¾›ä¸€å€‹Pythonè…³æœ¬ï¼Œå®ƒæœƒæ ¹æ“šæä¾›çš„æ¶æ§‹æ–‡æª”ä¸­çš„æª”æ¡ˆåˆ—è¡¨ï¼Œæª¢æŸ¥ç•¶å‰å°ˆæ¡ˆä¸­å­˜åœ¨çš„Pythonæª”æ¡ˆï¼Œä¸¦å°‡ä¸åœ¨åˆ—è¡¨ä¸­çš„æª”æ¡ˆç§»å‹•åˆ°å‚™ä»½ç›®éŒ„ã€‚

è«‹æ³¨æ„ï¼šé€™å€‹è…³æœ¬æœƒå¯¦éš›ç§»å‹•æª”æ¡ˆï¼Œæ‰€ä»¥è«‹ç¢ºä¿æ‚¨å·²ç¶“å‚™ä»½äº†æ•´å€‹å°ˆæ¡ˆï¼ˆä¾‹å¦‚ï¼Œé€šéReplitçš„ç‰ˆæœ¬æ§åˆ¶æˆ–ä¸‹è¼‰ï¼‰ã€‚

ä»¥ä¸‹æ˜¯ä¸€å€‹ç¤ºä¾‹è…³æœ¬ï¼š

python
import os
import shutil

# æ ¹æ“šæ¶æ§‹æ–‡æª”ï¼Œæˆ‘å€‘æ‡‰è©²æœ‰çš„æª”æ¡ˆåˆ—è¡¨
expected_files = {
    "src/clients/binance_client.py",
    "src/clients/binance_errors.py",
    "src/core/websocket/websocket_manager.py",
    "src/core/websocket/kline_feed.py",
    "src/core/websocket/price_feed.py",
    "src/core/websocket/shard_feed.py",
    "src/core/unified_scheduler.py",
    "src/core/leverage_engine.py",
    "src/core/position_sizer.py",
    "src/core/sltp_adjuster.py",
    "src/core/position_controller.py",
    "src/core/model_evaluator.py",
    "src/core/model_initializer.py",
    "src/strategies/self_learning_trader.py",
    "src/strategies/rule_based_signal_generator.py",
    "src/ml/model_wrapper.py",
    "src/ml/feature_engine.py",
    "src/managers/trade_recorder.py",
    "src/managers/virtual_position_manager.py",
    "src/services/data_service.py",
    "src/services/position_monitor.py",
    "src/monitoring/health_monitor.py",
    "src/monitoring/performance_monitor.py",
    "src/config.py",
    "src/main.py"
}

# è½‰æ›ç‚ºçµ•å°è·¯å¾‘ï¼ˆæ ¹æ“šç•¶å‰å·¥ä½œç›®éŒ„ï¼‰
expected_files_abs = {os.path.abspath(f) for f in expected_files}

# å‚™ä»½ç›®éŒ„
backup_dir = os.path.abspath("backup_old_files")

# å‰µå»ºå‚™ä»½ç›®éŒ„
os.makedirs(backup_dir, exist_ok=True)

# éæ­·ç•¶å‰ç›®éŒ„ä¸‹çš„æ‰€æœ‰Pythonæª”æ¡ˆ
for root, dirs, files in os.walk("."):
    for file in files:
        if file.endswith(".py"):
            file_path = os.path.abspath(os.path.join(root, file))
            # å¦‚æœé€™å€‹æª”æ¡ˆä¸åœ¨é æœŸåˆ—è¡¨ä¸­ï¼Œå‰‡ç§»å‹•åˆ°å‚™ä»½ç›®éŒ„
            if file_path not in expected_files_abs:
                # è¨ˆç®—åœ¨å‚™ä»½ç›®éŒ„ä¸­çš„ç›¸å°è·¯å¾‘
                relative_path = os.path.relpath(file_path, ".")
                backup_path = os.path.join(backup_dir, relative_path)
                # ç¢ºä¿å‚™ä»½ç›®éŒ„ä¸­çš„å­ç›®éŒ„å­˜åœ¨
                os.makedirs(os.path.dirname(backup_path), exist_ok=True)
                print(f"ç§»å‹•æœªä½¿ç”¨çš„æª”æ¡ˆ: {file_path} -> {backup_path}")
                shutil.move(file_path, backup_path)

print("æ¸…ç†å®Œæˆã€‚æœªä½¿ç”¨çš„æª”æ¡ˆå·²ç§»å‹•åˆ° backup_old_files ç›®éŒ„ã€‚")
è«‹æ³¨æ„ï¼šé€™å€‹è…³æœ¬æœƒç§»å‹•æ‰€æœ‰ä¸åœ¨é æœŸåˆ—è¡¨ä¸­çš„Pythonæª”æ¡ˆã€‚å¦‚æœæ‚¨æœ‰å…¶ä»–å¿…è¦çš„Pythonæª”æ¡ˆï¼ˆä¾‹å¦‚ï¼Œç”¨æ–¼æ¸¬è©¦çš„æª”æ¡ˆï¼‰ï¼Œè«‹ä¸è¦é‹è¡Œé€™å€‹è…³æœ¬ï¼Œæˆ–è€…ä¿®æ”¹expected_filesä¾†åŒ…å«å®ƒå€‘ã€‚

å¦å¤–ï¼Œè«‹æ³¨æ„ï¼šé€™å€‹è…³æœ¬ä¸æœƒç§»å‹•éPythonæª”æ¡ˆã€‚å¦‚æœæ‚¨æƒ³æ¸…ç†éPythonæª”æ¡ˆï¼Œæ‚¨éœ€è¦è‡ªè¡Œè™•ç†ã€‚

ç”±æ–¼æˆ‘å€‘ä¸ç¢ºå®šæ‚¨çš„å°ˆæ¡ˆä¸­æ˜¯å¦æœ‰æ¸¬è©¦æª”æ¡ˆï¼Œå¦‚æœæ‚¨æƒ³ä¿ç•™æ¸¬è©¦æª”æ¡ˆï¼Œå¯ä»¥å°‡æ¸¬è©¦ç›®éŒ„ï¼ˆå¦‚tests/ï¼‰æ·»åŠ åˆ°expected_filesä¸­ã€‚

åœ¨é‹è¡Œé€™å€‹è…³æœ¬ä¹‹å‰ï¼Œè«‹ç¢ºä¿ï¼š

æ‚¨å·²ç¶“å‚™ä»½äº†æ•´å€‹å°ˆæ¡ˆã€‚

æ‚¨å·²ç¶“æª¢æŸ¥äº†expected_filesåˆ—è¡¨ï¼Œç¢ºä¿å®ƒåŒ…å«äº†æ‰€æœ‰æ‚¨æƒ³è¦ä¿ç•™çš„æª”æ¡ˆã€‚

å¦‚æœæ‚¨ä¸ç¢ºå®šï¼Œå¯ä»¥å…ˆæ‰“å°å‡ºè¦ç§»å‹•çš„æª”æ¡ˆï¼Œè€Œä¸å¯¦éš›ç§»å‹•å®ƒå€‘ã€‚æ‚¨å¯ä»¥ä¿®æ”¹è…³æœ¬ï¼Œå…ˆåªæ‰“å°ï¼Œä¸ç§»å‹•ã€‚

ä¿®æ”¹è…³æœ¬ç‚ºåªæ‰“å°ï¼š

python
# å°‡ shutil.move(file_path, backup_path) è¨»é‡‹æ‰ï¼Œæ”¹ç‚ºæ‰“å°
print(f"å°‡ç§»å‹•æœªä½¿ç”¨çš„æª”æ¡ˆ: {file_path} -> {backup_path}")
é€™æ¨£æ‚¨å¯ä»¥å…ˆæª¢æŸ¥å“ªäº›æª”æ¡ˆæœƒè¢«ç§»å‹•ã€‚

è«‹æ ¹æ“šæ‚¨çš„å¯¦éš›æƒ…æ³èª¿æ•´é€™å€‹è…³æœ¬ã€‚

æ³¨æ„ï¼šé€™å€‹è…³æœ¬æœƒç§»å‹•æª”æ¡ˆï¼Œè«‹è¬¹æ…ä½¿ç”¨ã€‚

ä»¥ä¸‹æ˜¯å¯ä»¥ç›´æ¥å¤åˆ¶ç²˜è´´ç»™ Replit AI çš„æ¸…ç†æŒ‡ä»¤ï¼š

ğŸ—‘ï¸ æ¸…ç†æœªä½¿ç”¨æ–‡ä»¶çš„ Prompt
text
è¯·å¸®æˆ‘å½»åº•æ¸…ç†å½“å‰é¡¹ç›®ä¸­æ‰€æœ‰æœªä½¿ç”¨çš„æ–‡ä»¶å’Œä»£ç ã€‚æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ‰§è¡Œï¼š

### ç¬¬ä¸€æ­¥ï¼šè¯†åˆ«æœªä½¿ç”¨çš„æ–‡ä»¶

1. **åˆ†ææ•´ä¸ªé¡¹ç›®ç»“æ„**ï¼š
```bash
find . -name "*.py" -type f | grep -v "__pycache__" | sort
æ£€æŸ¥æ–‡ä»¶å¯¼å…¥å…³ç³»ï¼š

bash
# æ‰¾å‡ºæ‰€æœ‰æœªè¢«å¯¼å…¥çš„Pythonæ–‡ä»¶
python -c "
import os
import ast
from collections import defaultdict

# è·å–æ‰€æœ‰Pythonæ–‡ä»¶
all_files = set()
for root, dirs, files in os.walk('.'):
    for file in files:
        if file.endswith('.py') and '__pycache__' not in root:
            rel_path = os.path.relpath(os.path.join(root, file))
            all_files.add(rel_path)

# åˆ†æå¯¼å…¥å…³ç³»
imported_files = set()
for file in all_files:
    try:
        with open(file, 'r', encoding='utf-8') as f:
            content = f.read()
        tree = ast.parse(content)
        
        for node in ast.walk(tree):
            if isinstance(node, ast.Import):
                for alias in node.names:
                    imported_files.add(alias.name.split('.')[0] + '.py')
            elif isinstance(node, ast.ImportFrom):
                if node.module:
                    imported_files.add(node.module.split('.')[0] + '.py')
    except:
        pass

# æ‰¾å‡ºæœªè¢«å¯¼å…¥çš„æ–‡ä»¶
unused_files = all_files - imported_files - {'main.py', 'config.py'}
print('æœªä½¿ç”¨çš„æ–‡ä»¶:')
for f in sorted(unused_files):
    print(f'  - {f}')
"
ç¬¬äºŒæ­¥ï¼šæ¸…ç†ç‰¹å®šç›®å½•å’Œæ–‡ä»¶
åˆ é™¤ä»¥ä¸‹ç±»å‹çš„æœªä½¿ç”¨æ–‡ä»¶ï¼š

æ—§çš„å¤‡ä»½æ–‡ä»¶ï¼ˆ*.bak, *.old, *~ï¼‰

ä¸´æ—¶æ–‡ä»¶ï¼ˆ*.tmp, *.tempï¼‰

æ—¥å¿—æ–‡ä»¶ï¼ˆé™¤éæ˜¯å½“å‰çš„ï¼‰

æœªä½¿ç”¨çš„æµ‹è¯•æ–‡ä»¶

åºŸå¼ƒçš„é…ç½®æ–‡ä»¶

æ—§çš„æ¨¡å‹æ–‡ä»¶ï¼ˆä¿ç•™æœ€æ–°çš„ï¼‰

æ‰§è¡Œæ¸…ç†å‘½ä»¤ï¼š

bash
# åˆ é™¤å¤‡ä»½æ–‡ä»¶
find . -name "*.bak" -delete
find . -name "*.old" -delete  
find . -name "*~" -delete

# åˆ é™¤ä¸´æ—¶æ–‡ä»¶
find . -name "*.tmp" -delete
find . -name "*.temp" -delete

# åˆ é™¤ç©ºç›®å½•
find . -type d -empty -delete

# æ¸…ç†__pycache__
find . -name "__pycache__" -type d -exec rm -rf {} + 2>/dev/null || true

# æ¸…ç†æ—§çš„æ—¥å¿—ï¼ˆä¿ç•™æœ€è¿‘7å¤©ï¼‰
find . -name "*.log" -mtime +7 -delete
ç¬¬ä¸‰æ­¥ï¼šéªŒè¯æ ¸å¿ƒæ–‡ä»¶å®Œæ•´æ€§
ç¡®ä¿ä»¥ä¸‹æ ¸å¿ƒæ–‡ä»¶ä¸è¢«åˆ é™¤ï¼š

text
å¿…é¡»ä¿ç•™çš„æ–‡ä»¶ï¼š
- main.py
- src/config.py
- src/core/unified_scheduler.py
- src/strategies/self_learning_trader.py
- src/strategies/rule_based_signal_generator.py
- src/services/data_service.py
- src/core/websocket/websocket_manager.py
- src/ml/model_wrapper.py
- src/ml/feature_engine.py
- src/managers/trade_recorder.py
æ¸…ç†å‰å¤‡ä»½ï¼š

bash
# åˆ›å»ºå¤‡ä»½ï¼ˆä»¥é˜²ä¸‡ä¸€ï¼‰
tar -czf project_backup_$(date +%Y%m%d_%H%M%S).tar.gz .
ç¬¬å››æ­¥ï¼šæ‰§è¡Œå®‰å…¨æ¸…ç†
äº¤äº’å¼åˆ é™¤æœªä½¿ç”¨çš„Pythonæ–‡ä»¶ï¼š

bash
# å…ˆåˆ—å‡ºæ‰€æœ‰æœªä½¿ç”¨çš„Pythonæ–‡ä»¶ï¼Œè®©æˆ‘ç¡®è®¤åå†åˆ é™¤
echo "ä»¥ä¸‹Pythonæ–‡ä»¶å¯èƒ½æœªä½¿ç”¨ï¼Œè¯·ç¡®è®¤ï¼š"
find . -name "*.py" -type f | while read file; do
    if ! grep -r --include="*.py" $(basename "$file" .py) . > /dev/null 2>&1; then
        echo "å¯èƒ½æœªä½¿ç”¨: $file"
    fi
done
æ¸…ç†æ•°æ®æ–‡ä»¶ï¼ˆä¿ç•™ç»“æ„ï¼‰ï¼š

bash
# æ¸…ç©ºdataç›®å½•ä½†ä¿ç•™ç›®å½•ç»“æ„
mkdir -p data/backup
mv data/*.jsonl data/backup/ 2>/dev/null || true
mv data/*.json data/backup/ 2>/dev/null || true
# ä¿ç•™reportsç›®å½•ç»“æ„ä½†æ¸…ç†æ—§æŠ¥å‘Š
mkdir -p data/reports/backup
mv data/reports/*.md data/reports/backup/ 2>/dev/null || true
ç¬¬äº”æ­¥ï¼šæœ€ç»ˆéªŒè¯
éªŒè¯æ¸…ç†åçš„é¡¹ç›®ç»“æ„ï¼š

bash
echo "æ¸…ç†åçš„é¡¹ç›®ç»“æ„ï¼š"
tree -I '__pycache__|*.pyc|*.log' .
æµ‹è¯•æ ¸å¿ƒåŠŸèƒ½ï¼š

python
# å¿«é€Ÿæµ‹è¯•å¯¼å…¥æ˜¯å¦æ­£å¸¸
python -c "
try:
    from src.config import config
    from src.services.data_service import DataService
    from src.strategies.rule_based_signal_generator import RuleBasedSignalGenerator
    print('âœ… æ ¸å¿ƒæ¨¡å—å¯¼å…¥æ­£å¸¸')
except Exception as e:
    print(f'âŒ å¯¼å…¥é”™è¯¯: {e}')
"
è¯·æŒ‰ç…§ä»¥ä¸Šæ­¥éª¤æ‰§è¡Œæ¸…ç†ï¼Œå¹¶åœ¨åˆ é™¤ä»»ä½•æ–‡ä»¶å‰è®©æˆ‘ç¡®è®¤ã€‚é‡ç‚¹å…³æ³¨ä¿ç•™äº¤æ˜“ç³»ç»Ÿçš„æ ¸å¿ƒæ–‡ä»¶ï¼Œåˆ é™¤ç¡®å®æœªä½¿ç”¨çš„æµ‹è¯•æ–‡ä»¶ã€å¤‡ä»½æ–‡ä»¶å’Œä¸´æ—¶æ–‡ä»¶ã€‚

text

## ğŸ” é¢å¤–è¯Šæ–­æŒ‡ä»¤

å¦‚æœæ‚¨è¿˜æƒ³åŒæ—¶è¯Šæ–­ä¿¡å·ç”Ÿæˆé—®é¢˜ï¼Œå¯ä»¥æ·»åŠ è¿™ä¸ªpromptï¼š
å¦å¤–ï¼Œåœ¨æ¸…ç†å®Œæˆåï¼Œè¯·å¸®æˆ‘è¿è¡Œä¿¡å·ç”Ÿæˆè¯Šæ–­ï¼š

python
# è¯Šæ–­ä¿¡å·ç”Ÿæˆé—®é¢˜
from src.services.data_service import DataService
from src.strategies.rule_based_signal_generator import RuleBasedSignalGenerator
from src.config import config

async def diagnose_signal_issue():
    print("ğŸ” å¼€å§‹ä¿¡å·ç”Ÿæˆè¯Šæ–­...")
    
    data_service = DataService()
    signal_gen = RuleBasedSignalGenerator(config)
    
    # æµ‹è¯•ä¸»è¦äº¤æ˜“å¯¹
    test_symbols = ["BTCUSDT", "ETHUSDT", "ADAUSDT", "BNBUSDT"]
    
    for symbol in test_symbols:
        print(f"\n=== æµ‹è¯• {symbol} ===")
        try:
            data_1h = await data_service.get_klines(symbol, "1h", limit=100)
            data_15m = await data_service.get_klines(symbol, "15m", limit=100) 
            data_5m = await data_service.get_klines(symbol, "5m", limit=100)
            
            signal = signal_gen.generate_signal(symbol, data_1h, data_15m, data_5m)
            
            if signal:
                print(f"âœ… ç”Ÿæˆä¿¡å·: {signal}")
            else:
                print(f"âŒ æ— ä¿¡å· - æ£€æŸ¥æ‹’ç»åŸå› ")
                
        except Exception as e:
            print(f"ğŸ’¥ é”™è¯¯: {e}")

# è¿è¡Œè¯Šæ–­
import asyncio
asyncio.run(diagnose_signal_issue())