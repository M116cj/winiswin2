# 系统全面优化指令

作为高级系统架构师和性能优化专家，请对我的加密货币交易系统进行深度优化和清理。请严格按以下要求执行：

## 第一阶段：系统架构审查

**代码结构分析**
```python
# 分析当前项目结构，识别：
- 冗余模块和重复代码
- 性能瓶颈（特别是I/O操作、数据序列化、网络请求）
- 内存泄漏风险点
- 不必要的依赖和导入
依赖项优化审查

bash
# 严格检查所有依赖
REQUIRED_DEPS = [
    "websockets", "binance-connector", "pandas", "numpy", 
    "asyncio", "aiohttp", "ccxt"
]
# 移除所有非必要依赖
第二阶段：性能深度优化
WebSocket 连接优化

python
# 重构 WebSocket 管理器
class OptimizedWebSocketManager:
    def __init__(self):
        self.connection_pool = {}  # 连接池管理
        self.message_queue = asyncio.Queue(maxsize=1000)
        self.heartbeat_interval = 20  # 优化心跳间隔
        self.reconnect_strategy = exponential_backoff(max_attempts=10)
    
    async def enhanced_connect(self):
        # 实现多路复用、连接复用
        # 添加流量控制和背压管理
        # 实现智能重连机制
内存管理优化

python
# 内存使用分析
MEMORY_OPTIMIZATION_TARGETS = {
    "data_structures": "使用更高效的DataFrame操作",
    "caching_strategy": "实现LRU缓存和内存限制",
    "gc_optimization": "主动垃圾回收配置",
    "stream_processing": "使用生成器替代列表"
}
第三阶段：文件清理与重构
文件清理标准

markdown
必须删除的文件类型：
- 临时文件 (*.tmp, *.log, *.cache)
- 备份文件 (*.bak, *.old, backup_*)
- 开发调试文件 (test_*, debug_*, dev_*)
- 冗余配置文件 (重复的 *.json, *.yaml)
- 未使用的资源文件 (images/, docs/, examples/)
- 空目录和孤立文件

保留核心文件：
- 主要交易逻辑文件
- 必要的配置文件
- WebSocket 连接管理
- 风险控制和监控
代码重构要求

python
# 应用以下重构模式：
REFACTORING_PATTERNS = {
    "DRY": "消除重复代码",
    "SOLID": "遵循单一职责原则", 
    "async_optimization": "优化异步操作链",
    "error_handling": "统一错误处理机制",
    "logging": "结构化日志系统"
}
第四阶段：系统监控增强
性能监控集成

python
class PerformanceMonitor:
    def __init__(self):
        self.metrics = {
            "latency": "响应时间监控",
            "throughput": "消息处理吞吐量", 
            "error_rate": "错误率统计",
            "memory_usage": "内存使用跟踪"
        }
    
    def real_time_alerting(self):
        # 实现性能阈值告警
        pass
第五阶段：安全加固
安全优化

python
SECURITY_ENHANCEMENTS = {
    "api_key_protection": "环境变量加密存储",
    "request_signing": "请求签名验证",
    "rate_limiting": "智能限流控制",
    "input_validation": "所有输入参数验证"
}
执行指令
请按以下严格流程执行：

诊断阶段 (5分钟)

完整扫描项目结构

分析性能瓶颈

识别安全风险

清理阶段 (3分钟)

删除所有非必要文件

移除未使用依赖

整理目录结构

优化阶段 (7分钟)

重构核心交易逻辑

优化 WebSocket 连接

增强错误处理

验证阶段 (3分钟)

测试系统功能完整性

验证性能提升指标

确认安全加固效果

交付要求
优化完成后必须提供：

详细的优化报告（包含性能基准对比）

清理的文件清单

重构的代码变更说明

系统架构改进图

性能监控配置

请严格按照以上架构师标准执行，确保系统达到生产级质量标准。每一步操作都需要有明确的 rationale 和性能影响评估。