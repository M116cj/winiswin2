# ç³»çµ±å„ªåŒ–ç¸½çµ

## âœ… å®Œæˆçš„ä¿®æ”¹

æ ¹æ“šæ‚¨çš„è¦æ±‚ï¼Œç³»çµ±å·²å®Œæˆä»¥ä¸‹å„ªåŒ–ï¼š

### 1. ç§»é™¤ 1m Kç·šç›£æ§ âœ…

**ä¿®æ”¹æ–‡ä»¶**ï¼š
- `src/services/data_service.py`
- `src/services/timeframe_scheduler.py`

**çµæœ**ï¼š
```python
# åƒ…ä½¿ç”¨ 3 å€‹æ™‚é–“æ¡†æ¶
timeframes = ["1h", "15m", "5m"]

# èª¿åº¦é–“éš”
scan_intervals = {
    "1h": 3600,   # æ¯å°æ™‚
    "15m": 900,   # æ¯15åˆ†é˜
    "5m": 60      # æ¯åˆ†é˜
}
```

---

### 2. æ³¢å‹•ç‡å„ªå…ˆæ’åº âœ…

**ä¿®æ”¹æ–‡ä»¶**ï¼š
- `src/services/data_service.py`

**å¯¦ç¾é‚è¼¯**ï¼š
```python
async def scan_market(self, top_n: int = 200):
    # ç²å–æ‰€æœ‰648å€‹äº¤æ˜“å°çš„24h ticker
    exchange_info_data = await self.client.get_24h_tickers()
    
    # è¨ˆç®—æ³¢å‹•ç‡ï¼ˆ24håƒ¹æ ¼è®ŠåŒ–ç™¾åˆ†æ¯”çš„çµ•å°å€¼ï¼‰
    for ticker in exchange_info_data:
        volatility = abs(float(ticker.get('priceChangePercent', 0)))
    
    # æŒ‰æ³¢å‹•ç‡æ’åº
    market_data.sort(key=lambda x: x['volatility'], reverse=True)
    
    # è¿”å›å‰200å€‹
    return market_data[:top_n]
```

**çµæœ**ï¼š
- å¾648å€‹äº¤æ˜“å°ä¸­è‡ªå‹•é¸æ“‡æ³¢å‹•ç‡æœ€é«˜çš„å‰200å€‹
- æ¯æ¬¡æƒæéƒ½æœƒé‡æ–°æ’åºï¼Œç¢ºä¿ç›£æ§æœ€æ´»èºçš„æ¨™çš„

---

### 3. å·®ç•°åŒ–æ™‚é–“æ¡†æ¶æ›´æ–° âœ…

**ä¿®æ”¹æ–‡ä»¶**ï¼š
- `src/services/timeframe_scheduler.py`

**æ›´æ–°é »ç‡**ï¼š
```
1h  â†’ æ¯ 3600 ç§’ï¼ˆ1å°æ™‚ï¼‰æ›´æ–°ä¸€æ¬¡  â†’ è¶¨å‹¢ç¢ºèª
15m â†’ æ¯ 900 ç§’ï¼ˆ15åˆ†é˜ï¼‰æ›´æ–°ä¸€æ¬¡ â†’ è¶¨å‹¢ç¢ºèª
5m  â†’ æ¯ 60 ç§’ï¼ˆ1åˆ†é˜ï¼‰æ›´æ–°ä¸€æ¬¡   â†’ è¶¨å‹¢ç¬¦åˆç¢ºèª + å…¥å ´ä¿¡è™Ÿ
```

**æ™ºèƒ½ç·©å­˜**ï¼š
- 1h/15mï¼šä½¿ç”¨ç·©å­˜ï¼Œç›´åˆ°ä¸‹æ¬¡æ›´æ–°æ™‚é–“
- 5mï¼šå§‹çµ‚ç²å–æœ€æ–°æ•¸æ“šï¼ˆé«˜é »å…¥å ´ï¼‰

---

### 4. æ™ºèƒ½å€‰ä½ç®¡ç† âœ…

**å¯¦å€‰ï¼ˆå‰3å€‹ï¼‰**ï¼š
```python
# ä¿¡å¿ƒåº¦æœ€é«˜çš„å‰3å€‹ä¿¡è™Ÿ
if rank <= 3:
    execute_real_position(signal)
```

**è™›æ“¬å€‰ï¼ˆå…¶é¤˜æ‰€æœ‰ï¼‰**ï¼š
```python
# æ‰€æœ‰ç¬¦åˆæ¢ä»¶çš„ä¿¡è™Ÿéƒ½è¿½è¹¤ç‚ºè™›æ“¬å€‰
if rank > 3:
    add_virtual_position(signal)
    # åŒ…å«çœŸå¯¦æ­¢ç›ˆæ­¢æ
    virtual_position = {
        'stop_loss': signal['stop_loss'],
        'take_profit': signal['take_profit'],
        ...
    }
```

**ç¢ºèª**ï¼š
- âœ… è™›æ“¬å€‰ä½åŒ…å«çœŸå¯¦æ­¢ç›ˆæ­¢æ
- âœ… è™›æ“¬å€‰ä½PnLæ ¹æ“šçœŸå¯¦åƒ¹æ ¼è¨ˆç®—
- âœ… æ‰€æœ‰æ•¸æ“šç”¨æ–¼XGBoostè¨“ç·´

---

### 5. XGBoost ML æ•¸æ“šå®Œæ•´æ€§ âœ…

**é©—è­‰é …ç›®**ï¼š
- âœ… æ‰€æœ‰39å€‹å…¥å ´ç‰¹å¾µéƒ½è¢«è¨˜éŒ„
- âœ… trend_1h_encoded, trend_15m_encoded, trend_5m_encoded æ­£ç¢ºç·¨ç¢¼
- âœ… å¯¦å€‰å’Œè™›æ“¬å€‰éƒ½è¨˜éŒ„å®Œæ•´æ•¸æ“š
- âœ… æ­¢ç›ˆæ­¢æåƒ¹æ ¼ç²¾ç¢ºå­˜å„²

**ç‰¹å¾µåˆ—è¡¨ï¼ˆ39å€‹ï¼‰**ï¼š
```python
feature_columns = [
    # åŸºç¤ç‰¹å¾µ (8å€‹)
    'confidence_score', 'leverage', 'position_value',
    'hold_duration_hours', 'risk_reward_ratio',
    'order_blocks_count', 'liquidity_zones_count', 'entry_price',
    
    # æŠ€è¡“æŒ‡æ¨™ (10å€‹)
    'rsi_entry', 'macd_entry', 'macd_signal_entry', 'macd_histogram_entry',
    'atr_entry', 'bb_width_pct', 'volume_sma_ratio',
    'price_vs_ema50', 'price_vs_ema200', 'volatility_24h',
    
    # è¶¨å‹¢ç‰¹å¾µ (6å€‹)
    'trend_1h_encoded', 'trend_15m_encoded', 'trend_5m_encoded',
    'market_structure_encoded', 'direction_encoded', 'trend_alignment',
    
    # å…¶ä»–ç‰¹å¾µ (15å€‹)
    'ema50_slope', 'ema200_slope', 'higher_highs', 'lower_lows',
    'support_strength', 'resistance_strength', 'fvg_count',
    'swing_high_distance', 'swing_low_distance', 'volume_profile',
    'price_momentum', 'order_flow', 'liquidity_grab',
    'institutional_candle', 'smart_money_concept'
]
```

---

## ğŸ“Š ç³»çµ±æ€§èƒ½

### API ä½¿ç”¨é‡

**æ¯åˆ†é˜**ï¼š
```
å¸‚å ´æƒæï¼š40 æ¬Šé‡ï¼ˆç²å–24h tickerï¼‰
5m Kç·šï¼š200 Ã— 7 = 1,400 æ¬Šé‡

å¹³å‡æ¯åˆ†é˜ï¼š1,440 æ¬Šé‡
```

**æ¯15åˆ†é˜**ï¼š
```
15m Kç·šï¼š200 Ã— 7 = 1,400 æ¬Šé‡
5m Kç·šï¼š200 Ã— 7 = 1,400 æ¬Šé‡

ç¸½è¨ˆï¼š2,840 æ¬Šé‡
```

**æ¯å°æ™‚**ï¼š
```
1h Kç·šï¼š200 Ã— 7 = 1,400 æ¬Šé‡
15m Kç·šï¼š200 Ã— 7 = 1,400 æ¬Šé‡
5m Kç·šï¼š200 Ã— 7 = 1,400 æ¬Šé‡

ç¸½è¨ˆï¼š4,200 æ¬Šé‡
```

**å¹³å‡æ¯åˆ†é˜**ï¼š
```
æ¯å°æ™‚ç¸½æ¬Šé‡ï¼š
- 1h: 1 Ã— 1,400 = 1,400
- 15m: 4 Ã— 1,400 = 5,600
- 5m: 60 Ã— 1,400 = 84,000
- æƒæ: 60 Ã— 40 = 2,400

ç¸½è¨ˆï¼š93,400 æ¬Šé‡/å°æ™‚
å¹³å‡ï¼š1,557 æ¬Šé‡/åˆ†é˜

APIé™é¡ï¼š2,400 æ¬Šé‡/åˆ†é˜
ä½¿ç”¨ç‡ï¼š65% âœ…
å®‰å…¨é‚Šéš›ï¼š35%
```

---

## ğŸ¯ é…ç½®åƒæ•¸

### Railway ç’°å¢ƒè®Šé‡

```bash
# === API é…ç½® ===
BINANCE_API_KEY=ä½ çš„_API_Key
BINANCE_API_SECRET=ä½ çš„_API_Secret

# å¯é¸ï¼šäº¤æ˜“å°ˆç”¨ API
BINANCE_TRADING_API_KEY=ä½ çš„_äº¤æ˜“_API_Key
BINANCE_TRADING_API_SECRET=ä½ çš„_äº¤æ˜“_Secret

# === Discord ===
DISCORD_TOKEN=ä½ çš„_Discord_Token

# === æƒæé…ç½® ===
TOP_VOLATILITY_SYMBOLS=200      # ç›£æ§å‰200å€‹é«˜æ³¢å‹•ç‡
SCAN_INTERVAL=60                # æ¯60ç§’æƒæ

# === äº¤æ˜“é…ç½® ===
TRADING_ENABLED=true
MAX_POSITIONS=3                 # æœ€å¤š3å€‹å¯¦å€‰
MIN_CONFIDENCE=0.70
```

---

## ğŸ“ˆ é æœŸæ•ˆæœ

### ç›£æ§èƒ½åŠ›

```
âœ… å¾648å€‹äº¤æ˜“å°ä¸­è‡ªå‹•é¸æ“‡æœ€æ´»èºçš„200å€‹
âœ… 5m Kç·šæ¯åˆ†é˜æ›´æ–°ï¼ˆé«˜é »å…¥å ´ï¼‰
âœ… 15m/1h Kç·šæŒ‰éœ€æ›´æ–°ï¼ˆç¯€çœAPIï¼‰
âœ… å……åˆ†åˆ©ç”¨32æ ¸å¿ƒCPU
```

### äº¤æ˜“é »ç‡

```
ä¿¡è™Ÿç”Ÿæˆï¼š20-40 å€‹/å°æ™‚
å¯¦å€‰åŸ·è¡Œï¼šå‰3å€‹ï¼ˆä¿¡å¿ƒæœ€é«˜ï¼‰
è™›æ“¬è¿½è¹¤ï¼šå…¶é¤˜æ‰€æœ‰ç¬¦åˆæ¢ä»¶çš„
é æœŸäº¤æ˜“ï¼š5-15 ç­†/å¤©
```

### ML æ•¸æ“šæ”¶é›†

```
âœ… æ¯ç­†äº¤æ˜“è¨˜éŒ„39å€‹ç‰¹å¾µ
âœ… è™›æ“¬å€‰ä½åŒ…å«çœŸå¯¦æ­¢ç›ˆæ­¢æ
âœ… å¯¦å€‰å’Œè™›æ“¬å€‰æ•¸æ“šè³ªé‡ä¸€è‡´
âœ… è‡ªå‹•ç´¯ç©é«˜è³ªé‡è¨“ç·´æ•¸æ“š
```

---

## ğŸš€ éƒ¨ç½²æ­¥é©Ÿ

### 1. è¨­ç½®ç’°å¢ƒè®Šé‡

åœ¨ Railway æ§åˆ¶å°ä¸­è¨­ç½®æ‰€æœ‰å¿…éœ€çš„ç’°å¢ƒè®Šé‡ã€‚

### 2. éƒ¨ç½²

```bash
git push origin main
```

Railway æœƒè‡ªå‹•éƒ¨ç½²ä¸¦å•Ÿå‹•ç³»çµ±ã€‚

### 3. ç›£æ§

æŸ¥çœ‹æ—¥èªŒç¢ºèªï¼š
- âœ… æ³¢å‹•ç‡æ’åºæ­£å¸¸
- âœ… æ™‚é–“æ¡†æ¶èª¿åº¦æ­£ç¢º
- âœ… API ä½¿ç”¨ç‡ < 80%
- âœ… ä¿¡è™Ÿç”Ÿæˆç©©å®š

---

## ğŸ“š ç›¸é—œæ–‡æª”

1. **[å¿«é€Ÿå…¥é–€æŒ‡å—](QUICK_START.md)** - éƒ¨ç½²æ­¥é©Ÿå’Œé…ç½®
2. **[å„ªåŒ–æƒæç³»çµ±](OPTIMIZED_SCANNING_SYSTEM.md)** - è©³ç´°æŠ€è¡“èªªæ˜
3. **[é«˜é »äº¤æ˜“æŒ‡å—](HIGH_FREQUENCY_TRADING_GUIDE.md)** - ç­–ç•¥è©³è§£

---

## âœ… ç¸½çµ

### æ ¸å¿ƒæ”¹é€²

1. âœ… **ç§»é™¤ 1m ç›£æ§** - æ¸›å°‘APIèª¿ç”¨ï¼Œå°ˆæ³¨é«˜é »5må…¥å ´
2. âœ… **æ³¢å‹•ç‡æ’åº** - è‡ªå‹•é¸æ“‡æœ€æ´»èºçš„200å€‹æ¨™çš„
3. âœ… **æ™ºèƒ½ç·©å­˜** - 1h/15mç·©å­˜ï¼Œ5må§‹çµ‚æœ€æ–°
4. âœ… **å€‰ä½ç®¡ç†** - 3å¯¦å€‰ + ç„¡é™è™›æ“¬å€‰
5. âœ… **MLæ•¸æ“š** - 39ç‰¹å¾µå®Œæ•´è¨˜éŒ„

### æ€§èƒ½æå‡

```
ç›£æ§èƒ½åŠ›ï¼š40å€‹ â†’ 200å€‹ï¼ˆ5å€æå‡ï¼‰
APIæ•ˆç‡ï¼šå„ªåŒ–65%ä½¿ç”¨ç‡ï¼ˆ35%å®‰å…¨é‚Šéš›ï¼‰
å…¥å ´é »ç‡ï¼š5mæ¯åˆ†é˜æ›´æ–°ï¼ˆçœŸæ­£é«˜é »ï¼‰
æ•¸æ“šè³ªé‡ï¼š39ç‰¹å¾µç²¾ç¢ºå­˜å„²ï¼ˆå®Œæ•´MLè¨“ç·´ï¼‰
```

### ç³»çµ±å°±ç·’ âœ…

**æ‚¨çš„24/7è¶…é«˜é »è‡ªå‹•åŒ–äº¤æ˜“ç³»çµ±å·²å®Œå…¨å„ªåŒ–ä¸¦æº–å‚™éƒ¨ç½²ï¼**
