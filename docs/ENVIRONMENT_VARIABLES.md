# 環境變量配置指南

本文檔說明 Winiswin2 v1 Enhanced 交易系統所需的環境變量。

## 必需環境變量

這些變量是系統運行的必要條件，必須在 Replit Secrets 中配置：

### 1. BINANCE_API_KEY
- **說明**: Binance API 密鑰
- **獲取方式**: 
  1. 登錄 Binance 賬戶
  2. 進入 API 管理頁面
  3. 創建新的 API 密鑰
  4. 確保啟用「期貨交易」權限
- **示例**: `your_binance_api_key_here`
- **注意事項**: 
  - 請勿分享給任何人
  - 建議使用僅具有交易權限的 API 密鑰（無提現權限）

### 2. BINANCE_API_SECRET
- **說明**: Binance API 私鑰
- **獲取方式**: 創建 API 密鑰時獲得
- **示例**: `your_binance_api_secret_here`
- **注意事項**: 
  - 極其敏感，絕不外洩
  - 丟失後無法找回，需重新創建

### 3. DISCORD_TOKEN
- **說明**: Discord 機器人令牌
- **獲取方式**:
  1. 訪問 [Discord Developer Portal](https://discord.com/developers/applications)
  2. 創建新應用程序
  3. 在 Bot 選項卡中創建機器人
  4. 複製 Token
  5. 邀請機器人到您的 Discord 服務器
- **示例**: `your_discord_bot_token_here`
- **注意事項**: 
  - 需要機器人具有發送消息權限
  - 用於實時交易通知

## 可選環境變量

這些變量有默認值，可根據需要自定義：

### BINANCE_TESTNET
- **說明**: 是否使用 Binance 測試網
- **默認值**: `false`
- **可選值**: `true` / `false`
- **推薦**: 首次使用時設為 `true` 進行測試

### TRADING_ENABLED
- **說明**: 是否啟用實盤交易
- **默認值**: `false`
- **可選值**: `true` / `false`
- **注意**: 設為 `false` 時系統僅監控不交易

### MAX_POSITIONS
- **說明**: 最大持倉數量
- **默認值**: `3`
- **範圍**: 1-10
- **推薦**: 初始使用 3

### CYCLE_INTERVAL
- **說明**: 交易週期間隔（秒）
- **默認值**: `60`
- **範圍**: 30-300
- **推薦**: 60 秒

### MIN_CONFIDENCE
- **說明**: 最小信心度閾值
- **默認值**: `0.70` (70%)
- **範圍**: 0.50-0.90
- **推薦**: 0.70

### LOG_LEVEL
- **說明**: 日誌級別
- **默認值**: `INFO`
- **可選值**: `DEBUG` / `INFO` / `WARNING` / `ERROR`
- **推薦**: 日常使用 `INFO`，調試時使用 `DEBUG`

### DISCORD_CHANNEL_ID
- **說明**: Discord 頻道 ID（用於發送通知）
- **默認值**: 無（將發送到所有可訪問頻道）
- **獲取方式**: 
  1. 開啟 Discord 開發者模式
  2. 右鍵點擊頻道
  3. 複製 ID
- **示例**: `1234567890123456789`

## 配置步驟

### 在 Replit 中設置 Secrets

1. 打開 Replit 項目
2. 點擊左側欄的 "Tools"
3. 選擇 "Secrets"
4. 點擊 "Add new secret"
5. 輸入變量名稱和值
6. 點擊 "Add Secret"

### 驗證配置

配置完成後，啟動系統將自動驗證所有必需的環境變量。如果有缺失，系統會在日誌中明確指出。

## 安全建議

1. **API 密鑰安全**:
   - 使用最小權限原則（僅啟用必要的權限）
   - 定期輪換 API 密鑰
   - 監控 API 密鑰使用情況
   - 絕不在代碼或日誌中暴露密鑰

2. **Discord Token 安全**:
   - 不要分享機器人 Token
   - 如果洩露，立即重新生成

3. **測試網使用**:
   - 首次部署時建議使用測試網
   - 確認策略運行正常後再切換到主網

4. **資金安全**:
   - 初始使用小額資金測試
   - 設置合理的倉位大小限制
   - 定期檢查賬戶餘額和交易記錄

## 故障排除

### 配置驗證失敗
如果系統報告「配置驗證失敗」，請檢查：
1. 所有必需的環境變量是否已設置
2. 變量名稱是否正確（區分大小寫）
3. 變量值是否有多餘的空格
4. Replit Secrets 是否正確保存

### API 連接失敗
如果無法連接到 Binance API：
1. 檢查 API 密鑰是否正確
2. 確認 API 密鑰已啟用期貨交易權限
3. 檢查 IP 白名單設置（如有）
4. 驗證網絡連接

### Discord 機器人無響應
如果 Discord 通知不工作：
1. 確認 Discord Token 正確
2. 檢查機器人是否已加入服務器
3. 驗證機器人具有發送消息權限
4. 檢查 DISCORD_CHANNEL_ID 是否正確（如已設置）
